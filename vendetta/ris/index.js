(function(h,e,d,o,F,z,n,$){"use strict";o.findByProps("openLazy","hideActionSheet");function S(a,t){if(a!=null&&t!=null)for(const r of Object.keys(t))typeof t[r]=="object"&&!Array.isArray(t[r])?(typeof a[r]!="object"&&(a[r]={}),S(a[r],t[r])):a[r]??(a[r]=t[r])}const{ScrollView:x,View:le,Text:oe,TouchableOpacity:ie,TextInput:se,Image:ce,Animated:ue}=d.General,{FormLabel:de,FormIcon:ge,FormArrow:fe,FormRow:O,FormSwitch:U,FormSwitchRow:ve,FormSection:E,FormDivider:_,FormInput:ye,FormRadioRow:D}=d.Forms;function N(){var a;return $.useProxy(n.storage),React.createElement(x,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(E,null,React.createElement(O,{label:"Remove Telementry",subLabel:"Remove additional Telementry from url and site tracking",trailing:React.createElement(U,{value:(n.storage===null||n.storage===void 0||(a=n.storage.toggle)===null||a===void 0?void 0:a.removeTracking)||!1,onValueChange:function(t){return n.storage.toggle.removeTracking=t}})})),React.createElement(E,{title:"Services"},React.createElement(e.ReactNative.FlatList,{data:Object.entries(n.storage.services),ItemSeparatorComponent:_,renderItem:function(t){let{item:[r,s]}=t;return React.createElement(D,{label:s.name,selected:s.enabled,onPress:function(){return s.enabled=!s.enabled}})}})))}async function j(a){if(a){const t=`https://api-next.fuzzysearch.net/v1/url?url=${encodeURIComponent(a)}`;let r=await(await fetch(t,{method:"GET",headers:{"x-api-key":"eluIOaOhIP1RXlgYetkcZCF8la7p3NoCPy8U0i8dKiT4xdIH",Accept:"application/json"}})).json();return r=="unavailable"&&(r=null),r}}const{FormLabel:he,FormIcon:me,FormArrow:V,FormRow:G,FormSwitch:pe,FormSwitchRow:Re,FormSection:be,FormDivider:we,FormInput:Fe}=d.Forms,{openURL:I}=o.findByProps("openURL","openDeeplink"),q=e.stylesheet.createThemedStyleSheet({bg:{borderRadius:10,padding:10,margin:6,backgroundColor:"rgba(87, 187, 131, 0.25)"}});function H(a){let{data:t}=a;var r;const s={furaffinity:"https://www.furaffinity.net/view/",e621:"https://e621.net/posts/",weasyl:"https://www.weasyl.com/view/"};return e.React.createElement(e.React.Fragment,null,e.React.createElement(G,{label:t?.site,subLabel:`Uploaded/Created by ${t==null||(r=t.artists)===null||r===void 0?void 0:r[0]}`,trailing:e.React.createElement(V,null),style:[q.bg],onPress:function(){var u,i;if((t==null||(i=t.site)===null||i===void 0||(u=i.toLowerCase)===null||u===void 0?void 0:u.call(i))=="twitter"){var l;I(`https://twitter.com/${(l=t.artists)===null||l===void 0?void 0:l[0]}/status/${t?.site_id_str}`)}else{var f,c;I(`${s[t==null||(c=t.site)===null||c===void 0||(f=c.toLowerCase)===null||f===void 0?void 0:f.call(c)]}${t?.site_id||t?.site_id_str}`)}}}))}const{ScrollView:M,View:Y,Text:$e,TouchableOpacity:Se,TextInput:Ee,Image:Ie,Animated:Pe}=d.General,{FormLabel:Ae,FormIcon:Be,FormArrow:Le,FormRow:P,FormSwitch:ke,FormSwitchRow:Te,FormSection:Ce,FormDivider:K,FormInput:ze}=d.Forms,A=e.stylesheet.createThemedStyleSheet({baseBg:{margin:20,padding:25,backgroundColor:"rgba(55, 149, 225, 0.3)"},bg:{borderRadius:10,backgroundColor:"rgba(117, 227, 151, 0.35)"},border:{borderRadius:10}});function Q(a){let{url:t}=a;$.useProxy(n.storage);const[r,s]=e.React.useState([]);if(Array.isArray(r)&&r?.length<1){var u;let i=t;if(!(n.storage===null||n.storage===void 0||(u=n.storage.toggle)===null||u===void 0)&&u.removeTracking){const l=new URL(t);i=`${l.origin}${l.pathname}`}j(i).then(function(l){return s(l)})}return e.React.createElement(e.React.Fragment,null,e.React.createElement(M,null,e.React.createElement(Y,{style:[A.baseBg,A.border]},Array.isArray(r)&&r.length<1&&e.React.createElement(e.React.Fragment,null,e.React.createElement(P,{label:"Loading..."})),Array.isArray(r)?r?.map(function(i,l){return e.React.createElement(e.React.Fragment,null,e.React.createElement(H,{data:i}),l==r.length-1?void 0:e.React.createElement(K,null))}):e.React.createElement(e.React.Fragment,null,e.React.createElement(P,{label:"Sorry, Couldn't find any results!"})))))}var m,p,R;const{openURL:X}=o.findByProps("openURL","openDeeplink"),{FormRow:Z}=d.Forms,J=o.findByName("Icon")??o.findByProps("Sizes","compare"),B=o.findByProps("openLazy","hideActionSheet"),W=e.React.createElement(J,{source:z.getAssetIDByName("search")}),L=o.findByProps("push","pushLazy","pop"),ee=((m=o.findByProps("getRenderCloseButton"))===null||m===void 0?void 0:m.getRenderCloseButton)??((p=o.findByProps("getHeaderCloseButton"))===null||p===void 0?void 0:p.getHeaderCloseButton),te=o.findByName("Navigator")??((R=o.findByProps("Navigator"))===null||R===void 0?void 0:R.Navigator),g={saucenao:{name:"SauceNAO",url:"https://saucenao.com/search.php?url=%s",enabled:!0},tracemoe:{name:"trace.moe (Anime)",url:"https://trace.moe/?url=%s",enabled:!0},iqdb:{name:"IQDB",url:"https://iqdb.org/?url=%s",enabled:!1},imgops:{name:"ImgOps",url:"https://imgops.com/%s",enabled:!1},tineye:{name:"TinEye",url:"https://tineye.com/search?url=%s",enabled:!1},google:{name:"Google Images",url:"https://www.google.com/searchbyimage?image_url=%s&safe=off&sbisrc=cr_1_5_2",enabled:!1},yandex:{name:"Yandex Images",url:"https://yandex.com/images/search?rpt=imageview&url=%s",enabled:!1},fuzzysearch:{name:"FuzzySearch (FurAffinity, Twitter)",enabled:!1,titlePage:"Fuzzysearch.net"}};S(n.storage,{services:g,toggle:{removeTracking:!1}});const k=[];var re={onLoad:function(){k.push(F.before("openLazy",B,function(a){let[t,r]=a;r==="MediaShareActionSheet"&&t.then(function(s){const u=F.after("default",s,function(i,l){let[{syncer:f}]=i;e.React.useEffect(function(){return u()},[]);let c=f.sources[f.index.value];Array.isArray(c)&&(c=c[0]);const b=c.sourceURI??c.uri,T=l.props.children.props.children;if(T){const ae=Object.keys(g).filter(function(v){return n.storage.services[v].enabled});T.push(ae.map(function(v){const ne=function(){if(g[v].url){var w;let y=b;if(!(n.storage===null||n.storage===void 0||(w=n.storage.toggle)===null||w===void 0)&&w.removeTracking){const C=new URL(b);y=`${C.origin}${C.pathname}`}X(g[v].url.replace("%s",y))}else{const y=function(){return e.React.createElement(te,{initialRouteName:"ServicePage",goBackOnBackPress:!0,screens:{ServicePage:{title:g[v].titlePage,headerLeft:ee?.(function(){return L.pop()}),render:function(){return e.React.createElement(Q,{url:b})}}}})};B.hideActionSheet(),L.push(y)}};return e.React.createElement(e.React.Fragment,null,e.React.createElement(Z,{leading:W,label:g[v].name,onPress:ne}))}))}})})}))},onUnload:function(){k.forEach(function(a){return a()})},settings:N};return h.default=re,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro.common,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.plugin,vendetta.storage);
