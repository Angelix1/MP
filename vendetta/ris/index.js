(function(g,t,s,n,m,z,f,w){"use strict";n.findByProps("openLazy","hideActionSheet");function F(a,r){if(a!=null&&r!=null)for(const e of Object.keys(r))typeof r[e]=="object"&&!Array.isArray(r[e])?(typeof a[e]!="object"&&(a[e]={}),F(a[e],r[e])):a[e]??(a[e]=r[e])}const{ScrollView:C,View:te,Text:re,TouchableOpacity:ae,TextInput:ne,Image:ie,Animated:le}=s.General,{FormLabel:oe,FormIcon:se,FormArrow:ce,FormRow:ue,FormSwitch:de,FormSwitchRow:fe,FormSection:x,FormDivider:k,FormInput:pe,FormRadioRow:T}=s.Forms;function O(){return w.useProxy(f.storage),React.createElement(C,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(x,{title:"Services"},React.createElement(t.ReactNative.FlatList,{data:Object.entries(f.storage.services),ItemSeparatorComponent:k,renderItem:function(a){let{item:[r,e]}=a;return React.createElement(T,{label:e.name,selected:e.enabled,onPress:function(){return e.enabled=!e.enabled}})}})))}async function U(a){if(a){const r=`https://api-next.fuzzysearch.net/v1/url?url=${encodeURIComponent(a)}`;let e=await(await fetch(r,{method:"GET",headers:{"x-api-key":"eluIOaOhIP1RXlgYetkcZCF8la7p3NoCPy8U0i8dKiT4xdIH",Accept:"application/json"}})).json();return e=="unavailable"&&(e=null),e}}const{FormLabel:ye,FormIcon:he,FormArrow:_,FormRow:D,FormSwitch:ge,FormSwitchRow:Re,FormSection:be,FormDivider:ve,FormInput:me}=s.Forms,{openURL:$}=n.findByProps("openURL","openDeeplink"),N=t.stylesheet.createThemedStyleSheet({bg:{borderRadius:10,padding:10,margin:6,backgroundColor:"rgba(87, 187, 131, 0.25)"}});function j(a){let{data:r}=a;var e;const p={furaffinity:"https://www.furaffinity.net/view/",e621:"https://e621.net/posts/",weasyl:"https://www.weasyl.com/view/"};return t.React.createElement(t.React.Fragment,null,t.React.createElement(D,{label:r?.site,subLabel:`Uploaded/Created by ${r==null||(e=r.artists)===null||e===void 0?void 0:e[0]}`,trailing:t.React.createElement(_,null),style:[N.bg],onPress:function(){var i,l;if((r==null||(l=r.site)===null||l===void 0||(i=l.toLowerCase)===null||i===void 0?void 0:i.call(l))=="twitter"){var y;$(`https://twitter.com/${(y=r.artists)===null||y===void 0?void 0:y[0]}/status/${r?.site_id_str}`)}else{var u,o;$(`${p[r==null||(o=r.site)===null||o===void 0||(u=o.toLowerCase)===null||u===void 0?void 0:u.call(o)]}${r?.site_id||r?.site_id_str}`)}}}))}const{ScrollView:V,View:G,Text:we,TouchableOpacity:Fe,TextInput:$e,Image:Se,Animated:Ee}=s.General,{FormLabel:Ae,FormIcon:Ie,FormArrow:Be,FormRow:S,FormSwitch:Pe,FormSwitchRow:Le,FormSection:ze,FormDivider:H,FormInput:Ce}=s.Forms,E=t.stylesheet.createThemedStyleSheet({baseBg:{margin:20,padding:25,backgroundColor:"rgba(55, 149, 225, 0.3)"},bg:{borderRadius:10,backgroundColor:"rgba(117, 227, 151, 0.35)"},border:{borderRadius:10}});function q(a){let{url:r}=a;w.useProxy(f.storage);const[e,p]=t.React.useState([]);if(Array.isArray(e)&&e?.length<1){const i=new URL(r);U(`${i.origin}${i.pathname}`).then(function(l){return p(l)})}return t.React.createElement(t.React.Fragment,null,t.React.createElement(V,null,t.React.createElement(G,{style:[E.baseBg,E.border]},Array.isArray(e)&&e.length<1&&t.React.createElement(t.React.Fragment,null,t.React.createElement(S,{label:"Loading..."})),Array.isArray(e)?e?.map(function(i,l){return t.React.createElement(t.React.Fragment,null,t.React.createElement(j,{data:i}),l==e.length-1?void 0:t.React.createElement(H,null))}):t.React.createElement(t.React.Fragment,null,t.React.createElement(S,{label:"Sorry, Couldn't find any results!"})))))}var R,b,v;const{openURL:M}=n.findByProps("openURL","openDeeplink"),{FormRow:Y}=s.Forms,K=n.findByName("Icon")??n.findByProps("Sizes","compare"),A=n.findByProps("openLazy","hideActionSheet"),Q=t.React.createElement(K,{source:z.getAssetIDByName("search")}),I=n.findByProps("push","pushLazy","pop"),X=((R=n.findByProps("getRenderCloseButton"))===null||R===void 0?void 0:R.getRenderCloseButton)??((b=n.findByProps("getHeaderCloseButton"))===null||b===void 0?void 0:b.getHeaderCloseButton),Z=n.findByName("Navigator")??((v=n.findByProps("Navigator"))===null||v===void 0?void 0:v.Navigator),c={saucenao:{name:"SauceNAO",url:"https://saucenao.com/search.php?url=%s",enabled:!0},tracemoe:{name:"trace.moe (Anime)",url:"https://trace.moe/?url=%s",enabled:!0},iqdb:{name:"IQDB",url:"https://iqdb.org/?url=%s",enabled:!1},imgops:{name:"ImgOps",url:"https://imgops.com/%s",enabled:!1},tineye:{name:"TinEye",url:"https://tineye.com/search?url=%s",enabled:!1},google:{name:"Google Images",url:"https://www.google.com/searchbyimage?image_url=%s&safe=off&sbisrc=cr_1_5_2",enabled:!1},yandex:{name:"Yandex Images",url:"https://yandex.com/images/search?rpt=imageview&url=%s",enabled:!1},fuzzysearch:{name:"FuzzySearch (FurAffinity, Twitter)",enabled:!1,titlePage:"Fuzzysearch.net"}};F(f.storage,{services:c});const B=[];var J={onLoad:function(){B.push(m.before("openLazy",A,function(a){let[r,e]=a;e==="MediaShareActionSheet"&&r.then(function(p){const i=m.after("default",p,function(l,y){let[{syncer:u}]=l;t.React.useEffect(function(){return i()},[]);let o=u.sources[u.index.value];Array.isArray(o)&&(o=o[0]);const P=o.sourceURI??o.uri,L=y.props.children.props.children;if(L){const W=Object.keys(c).filter(function(d){return f.storage.services[d].enabled});L.push(W.map(function(d){const ee=function(){if(c[d].url){const h=new URL(P);M(c[d].url.replace("%s",`${h.origin}${h.pathname}`))}else{const h=function(){return t.React.createElement(Z,{initialRouteName:"ServicePage",goBackOnBackPress:!0,screens:{ServicePage:{title:c[d].titlePage,headerLeft:X?.(function(){return I.pop()}),render:function(){return t.React.createElement(q,{url:P})}}}})};A.hideActionSheet(),I.push(h)}};return t.React.createElement(t.React.Fragment,null,t.React.createElement(Y,{leading:Q,label:c[d].name,onPress:ee}))}))}})})}))},onUnload:function(){B.forEach(function(a){return a()})},settings:O};return g.default=J,Object.defineProperty(g,"__esModule",{value:!0}),g})({},vendetta.metro.common,vendetta.ui.components,vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.plugin,vendetta.storage);
