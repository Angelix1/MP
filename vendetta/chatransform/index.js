(function(c,N,U,w,y,j,e,x,C,E){"use strict";U.findByProps("openLazy","hideActionSheet");function L(t,o){if(t!=null&&o!=null)for(const a of Object.keys(o))typeof o[a]=="object"&&!Array.isArray(o[a])?(typeof t[a]!="object"&&(t[a]={}),L(t[a],o[a])):t[a]??(t[a]=o[a])}const{ScrollView:O,View:_,Text:V,TouchableOpacity:B,TextInput:G,Pressable:J,Image:q}=y.General,{FormLabel:z,FormIcon:H,FormArrow:K,FormRow:Q,FormSwitch:X,FormSwitchRow:Y,FormSection:A,FormDivider:D,FormInput:k,FormSliderRow:Z}=y.Forms;function v(t,o,a,r){return{id:t,title:o,type:a,placeholder:r}}const T=[v("imageURL","URL for the avatars (Leave Empty to Disable)","default","https://cdn.discordapp.com/attachments/919655852724604978/1197224092554772622/9k.png"),v("username","The usernames (Leave Empty to Disable)","default","Wario"),v("tagText","The Tag text (Leave Empty to Disable)","default","WARIO")];function I(){return x.useProxy(e.storage),React.createElement(O,null,React.createElement(A,{title:"Plugin Setting"},T?.map(function(t,o){var a;return React.createElement(React.Fragment,null,React.createElement(k,{title:t?.title,keyboardType:t?.type,placeholder:t==null||(a=t.placeholder)===null||a===void 0?void 0:a.toString(),value:(e.storage===null||e.storage===void 0?void 0:e.storage[t.id])??t?.placeholder,onChange:function(r){return e.storage[t.id]=r.toString()}}),o!==T.length-1&&React.createElement(D,null))})))}const{DCDChatManager:P}=w.ReactNative.NativeModules;function W(){return E.before("updateRows",P,function(t){let o=JSON.parse(t[1]);for(const a of o){let r=function(s){var i,m,g,u,f;if(!(e.storage===null||e.storage===void 0)&&e.storage.imageURL&&(e.storage===null||e.storage===void 0||(i=e.storage.imageURL)===null||i===void 0?void 0:i.length)>0&&(e.storage===null||e.storage===void 0?void 0:e.storage.imageURL)!=""&&!(e.storage===null||e.storage===void 0||(m=e.storage.imageURL)===null||m===void 0)&&m.startsWith("http")){let l=e.storage===null||e.storage===void 0?void 0:e.storage.imageURL;const F=new URL(l);F?.search&&(l=l?.replace(F.search,"")),s.avatarURL=l}if(!(e.storage===null||e.storage===void 0)&&e.storage.username&&(e.storage===null||e.storage===void 0||(g=e.storage.username)===null||g===void 0?void 0:g.length)>0&&(e.storage===null||e.storage===void 0?void 0:e.storage.username)!=""){var h,n;s.username=e.storage===null||e.storage===void 0||(n=e.storage.username)===null||n===void 0||(h=n.toString)===null||h===void 0?void 0:h.call(n)}if(!(e.storage===null||e.storage===void 0)&&e.storage.tagText&&(e.storage===null||e.storage===void 0||(u=e.storage.tagText)===null||u===void 0?void 0:u.length)>0&&(e.storage===null||e.storage===void 0?void 0:e.storage.tagText)!=""){var R,d;s.tagText=e.storage===null||e.storage===void 0||(d=e.storage.tagText)===null||d===void 0||(R=d.toString)===null||R===void 0?void 0:R.call(d)}!(s==null||(f=s.referencedMessage)===null||f===void 0)&&f.message&&r(s.referencedMessage.message)};const{message:b}=a;b&&r(b)}t[1]=JSON.stringify(o)})}L(e.storage,{imageURL:"https://cdn.discordapp.com/attachments/919655852724604978/1197224092554772622/9k.png",username:"Wario",tagText:"WARIO"});const S=[];var M={onLoad:function(){S.push(W())},onUnload:function(){S.forEach(function(t){return t()})},settings:I};return c.default=M,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta,vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui.assets,vendetta.plugin,vendetta.storage,vendetta.ui.toasts,vendetta.patcher);
