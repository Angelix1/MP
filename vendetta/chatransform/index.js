(function(v,N,U,n,w,j,e,x,C,E){"use strict";U.findByProps("openLazy","hideActionSheet");function L(t,o){if(t!=null&&o!=null)for(const a of Object.keys(o))typeof o[a]=="object"&&!Array.isArray(o[a])?(typeof t[a]!="object"&&(t[a]={}),L(t[a],o[a])):t[a]??(t[a]=o[a])}({...n.General,...n.Forms});const{ScrollView:O,View:_,Text:G,TouchableOpacity:V,TextInput:B,Pressable:J,Image:q}=n.General,{FormLabel:z,FormIcon:H,FormArrow:K,FormRow:Q,FormSwitch:X,FormSwitchRow:Y,FormSection:A,FormDivider:D,FormInput:k,FormSliderRow:Z}=n.Forms;function i(t,o,a,r){return{id:t,title:o,type:a,placeholder:r}}const T=[i("imageURL","URL for the avatars (Leave Empty to Disable)","default","https://cdn.discordapp.com/attachments/919655852724604978/1197224092554772622/9k.png"),i("username","The usernames (Leave Empty to Disable)","default","Wario"),i("tagText","The Tag text (Leave Empty to Disable)","default","WARIO")];function I(){return x.useProxy(e.storage),React.createElement(O,null,React.createElement(A,{title:"Plugin Setting"},T?.map(function(t,o){var a;return React.createElement(React.Fragment,null,React.createElement(k,{title:t?.title,keyboardType:t?.type,placeholder:t==null||(a=t.placeholder)===null||a===void 0?void 0:a.toString(),value:(e.storage===null||e.storage===void 0?void 0:e.storage[t.id])??t?.placeholder,onChange:function(r){return e.storage[t.id]=r.toString()}}),o!==T.length-1&&React.createElement(D,null))})))}const{DCDChatManager:P}=w.ReactNative.NativeModules;function W(){return E.before("updateRows",P,function(t){let o=JSON.parse(t[1]);for(const a of o){let r=function(s){var m,g,u,f,h;if(!(e.storage===null||e.storage===void 0)&&e.storage.imageURL&&(e.storage===null||e.storage===void 0||(m=e.storage.imageURL)===null||m===void 0?void 0:m.length)>0&&(e.storage===null||e.storage===void 0?void 0:e.storage.imageURL)!=""&&!(e.storage===null||e.storage===void 0||(g=e.storage.imageURL)===null||g===void 0)&&g.startsWith("http")){let c=e.storage===null||e.storage===void 0?void 0:e.storage.imageURL;const b=new URL(c);b?.search&&(c=c?.replace(b.search,"")),s.avatarURL=c}if(!(e.storage===null||e.storage===void 0)&&e.storage.username&&(e.storage===null||e.storage===void 0||(u=e.storage.username)===null||u===void 0?void 0:u.length)>0&&(e.storage===null||e.storage===void 0?void 0:e.storage.username)!=""){var R,d;s.username=e.storage===null||e.storage===void 0||(d=e.storage.username)===null||d===void 0||(R=d.toString)===null||R===void 0?void 0:R.call(d)}if(!(e.storage===null||e.storage===void 0)&&e.storage.tagText&&(e.storage===null||e.storage===void 0||(f=e.storage.tagText)===null||f===void 0?void 0:f.length)>0&&(e.storage===null||e.storage===void 0?void 0:e.storage.tagText)!=""){var y,l;s.tagText=e.storage===null||e.storage===void 0||(l=e.storage.tagText)===null||l===void 0||(y=l.toString)===null||y===void 0?void 0:y.call(l)}!(s==null||(h=s.referencedMessage)===null||h===void 0)&&h.message&&r(s.referencedMessage.message)};const{message:S}=a;S&&r(S)}t[1]=JSON.stringify(o)})}L(e.storage,{imageURL:"https://cdn.discordapp.com/attachments/919655852724604978/1197224092554772622/9k.png",username:"Wario",tagText:"WARIO"});const F=[];var M={onLoad:function(){F.push(W())},onUnload:function(){F.forEach(function(t){return t()})},settings:I};return v.default=M,Object.defineProperty(v,"__esModule",{value:!0}),v})({},vendetta,vendetta.metro,vendetta.ui.components,vendetta.metro.common,vendetta.ui.assets,vendetta.plugin,vendetta.storage,vendetta.ui.toasts,vendetta.patcher);
