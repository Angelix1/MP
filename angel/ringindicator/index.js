(function(l,i,D,b,C,S,F,I,e,O){"use strict";const{openLazy:q,hideActionSheet:J}=b.findByProps("openLazy","hideActionSheet");function w(t,n){if(t!=null&&n!=null)for(const a of Object.keys(n))typeof n[a]=="object"&&!Array.isArray(n[a])?(typeof t[a]!="object"&&(t[a]={}),w(t[a],n[a])):t[a]??(t[a]=n[a])}function P(){return I.before("render",C.General.View,function(t){if(!l.isEnabled)return;const[n]=t;if(!n||!Array.isArray(n.style))return;const a=i.storage.colors||{online:"#3BA55C",idle:"#FAA81A",dnd:"#ED4245"},B=n.style.findIndex(function(r){return r&&r.width===32&&r.height===32&&r.borderRadius===16});if(n.style.findIndex(function(r){return r&&r.width===92&&r.height===92&&r.borderRadius===92&&r.padding===6&&r.zIndex===0}),B!==-1){const r=n.children?.[1]?.props,s=n.children?.[3]?.props;if(!r?.hasOwnProperty("user")||typeof r.user?.id!="string"||!s?.hasOwnProperty("status")||typeof s.status!="string")return;const h=s.status,y=a[h]??null;if(y){s.size=0,s.isMobileOnline=!1,s.style.display="none",r.cutout.nativeCutouts[0].size=0;const d=i.storage.mult||1.2,u=i.storage.size||30;n.style[0]={width:u*d,height:u*d,borderRadius:16*d,overflow:"hidden"},n.style.push({borderWidth:2.5*d,borderColor:y,borderStyle:"solid"})}}})}const{ScrollView:T,View:o,Text:g,TextInput:k,Animated:R,Easing:m,Pressable:Q}=e.ReactNative,{useState:p,useEffect:V,useRef:x}=e.React,{FormSection:A,FormDivider:Y,FormRow:L}=C.Forms,{openAlert:N}=b.findByProps("openAlert","dismissAlert"),{AlertModal:j,AlertActions:W,AlertActionButton:M}=b.findByProps("AlertModal","AlertActions","AlertActionButton");function $(){O.useProxy(i.storage);const[t,n]=p(i.storage.colors||{online:"#3BA55C",idle:"#FAA81A",dnd:"#ED4245"}),[a,B]=p(i.storage.mult||1.2),[r,s]=p(i.storage.size||30),h=x(new R.Value(0)).current;V(function(){R.loop(R.timing(h,{toValue:1,duration:1e3,easing:m.linear,useNativeDriver:!1})).start()},[]);const y=h.interpolate({inputRange:[0,1],outputRange:["#ff0000","#ff0000"]}),d=function(f,c){const E={...t,[f]:c};n(E),i.storage.colors=E},u=function({status:f,color:c}){return e.React.createElement(o,{style:{width:48,height:48,borderRadius:24,backgroundColor:"#1E1E1E",margin:8,justifyContent:"center",alignItems:"center"}},e.React.createElement(o,{style:{width:44,height:44,borderRadius:22,borderWidth:4,borderColor:c}}),e.React.createElement(g,{style:{color:"#fff",fontSize:10,marginTop:4}},f))},K="I'm toooooo lazy to finish this plugin, so deal with it.",X={online:"Online",idle:"Idle",dnd:"Do Not Disturb"};return e.React.createElement(T,{style:{backgroundColor:"#111"}},e.React.createElement(R.View,{style:{paddingVertical:40,alignItems:"center",backgroundColor:y}},e.React.createElement(g,{style:{fontSize:32,fontWeight:"bold",color:"#fff"}},"Presence Ring"),e.React.createElement(g,{style:{fontSize:14,color:"#eee",marginTop:4}},"Customise indicator colors")),e.React.createElement(A,{title:"Live preview"},e.React.createElement(o,{style:{flexDirection:"row",justifyContent:"space-evenly",paddingVertical:16}},e.React.createElement(u,{status:"Online",color:t.online}),e.React.createElement(u,{status:"Idle",color:t.idle}),e.React.createElement(u,{status:"DND",color:t.dnd}))),e.React.createElement(A,{title:"Colour palette"},e.React.createElement(o,{style:{marginHorizontal:16,marginVertical:8}},Object.entries(t).map(function([f,c]){return e.React.createElement(e.React.Fragment,null,e.React.createElement(g,{style:{color:"#fff",fontSize:16,marginBottom:4}},X[f]),e.React.createElement(o,{style:{flexDirection:"row",alignItems:"center"}},e.React.createElement(k,{style:{flex:1,backgroundColor:"#222",color:"#fff",borderRadius:8,paddingHorizontal:12,paddingVertical:10,fontFamily:"monospace",fontSize:14,borderWidth:2,borderColor:c},value:c,onChangeText:function(E){return d(f,E)},placeholder:"#RRGGBB"}),e.React.createElement(o,{style:{width:32,height:32,borderRadius:16,backgroundColor:c,marginLeft:12,borderWidth:3,borderColor:"#444"}})))}))),e.React.createElement(A,{title:"Wild extras"},e.React.createElement(o,{style:{margin:16,padding:20,backgroundColor:"#252525",borderRadius:12,borderWidth:2,borderColor:"#5865F2"}},e.React.createElement(L,{label:"Click to Randomize the color palette",style:{color:"#aaa",fontSize:12,textAlign:"center",marginTop:8},onPress:function(){N("rainbomizer",e.React.createElement(e.React.Fragment,null,e.React.createElement(j,{title:"Note",content:e.React.createElement(g,{variant:"text-md/semibold",color:"TEXT_NORMAL"},K),actions:e.React.createElement(W,null,e.React.createElement(M,{text:"OK",variant:"primary"}))})))}}))),e.React.createElement(o,{style:{paddingBottom:"50vh"}}))}w(i.storage,{colors:{online:"#3BA55C",idle:"#FAA81A",dnd:"#ED4245"},mult:1.3,size:28}),l.isEnabled=!1;const v="[Ring Indicator]",G=function(t){return new URL(t).pathname.split(".").pop()};let z=null;const _=[[P,[]]],H=function(){return _.forEach(function([t,n]){return t(...n)})};var U={onLoad:function(){l.isEnabled=!0;try{z=H()}catch(t){D.logger.info(`${v} Crash On Load.

`,t),F.showToast(`${v} Crashing On Load. Please check debug log for more info.`),S.stopPlugin(i.id)}},onUnload:function(){l.isEnabled=!1,z?.()},settings:$};return l.default=U,l.getExt=G,l.pluginNameToast=v,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.plugin,vendetta,vendetta.metro,vendetta.ui.components,vendetta.plugins,vendetta.ui.toasts,vendetta.patcher,vendetta.metro.common,vendetta.storage);
