(function(oe,F,h,_,e,M,a,S,p,G,na,L,pe){"use strict";const{openLazy:ra,hideActionSheet:ar}=h.findByProps("openLazy","hideActionSheet");function Ct(n,r){if(n!=null&&r!=null)for(const t of Object.keys(r))typeof r[t]=="object"&&!Array.isArray(r[t])?(typeof n[t]!="object"&&(n[t]={}),Ct(n[t],r[t])):n[t]??(n[t]=r[t])}function la(n,r){try{ra(new Promise(function(t){return t({default:n})}),"ActionSheet",r)}catch(t){F.logger.error(t.stack),showToast("Got error when opening ActionSheet! Please check debug logs")}}const oa=function(n,r){return`${n}${Math.floor(r*255).toString(16).padStart(2,0)}`},Y={toInt(n){return n=n.replace(/^#/,""),parseInt(n,16)},toHex(n){return"#"+n.toString(16).toUpperCase()},HSLtoHEX(n,r,t){t/=100;const i=r*Math.min(t,1-t)/100,l=function(c){const d=(c+n/30)%12,y=t-i*Math.max(Math.min(d-3,9-d,1),-1);return Math.round(255*y).toString(16).padStart(2,"0")};return`#${l(0)}${l(8)}${l(4)}`}};function ie(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{version:n,new:r,updated:t,fix:i}}const U={..._.General,..._.Forms},ia="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII=",sa={toPercentage:function(n){return n=Number(n),n===0?0:n===1?100:Math.round(n*100)},toDecimal:function(n){n=Number(n);const r=Math.min(Math.max(n,0),100);return r===0?0:r===100?1:r/100},formatDecimal:function(n){return n=Number(n),n===0||n===1?n:n.toFixed(2)},alphaToHex:function(n){n=Number(n);const r=Math.min(Math.max(n,0),100),t=Math.round(r/100*255).toString(16).toUpperCase();return t.length===1?"0"+t:t},hexAlphaToPercent:function(n){const r=parseInt(n,16);return isNaN(r)?0:Math.round(r/255*100)}},{View:ca,FormRow:da,FormIcon:ua,FormSwitch:ga,FormDivider:fa}=U,wt=[{id:"enableMD",default:!0,label:"Toggle Message Delete",subLabel:"Logs deleted message"},{id:"enableMU",default:!0,label:"Toggle Message Update",subLabel:"Logs edited message"},{id:"enableLogging",default:!1,label:"Toggle Antied Logging",subLabel:"Save Logs to plugin's storage"},{id:"logWarning",default:!1,label:"Toggle Exceeding Log Limit Warning",subLabel:"Warn if log limit exceed"}];function ha(n){let{styles:r}=n;return M.useProxy(a.storage),React.createElement(React.Fragment,null,React.createElement(ca,{style:[r.subText]},wt?.map(function(t,i){return React.createElement(React.Fragment,null,React.createElement(da,{label:t?.label,subLabel:t?.subLabel,leading:t?.icon&&React.createElement(ua,{style:{opacity:1},source:p.getAssetIDByName(t?.icon)}),trailing:"id"in t?React.createElement(ga,{value:(a.storage===null||a.storage===void 0?void 0:a.storage.switches[t?.id])??t?.default,onValueChange:function(l){return a.storage.switches[t?.id]=l}}):void 0}),i!==wt?.length-1&&React.createElement(fa,null))})))}const{View:va,FormInput:Ra,FormDivider:ma}=U,St=[{id:"deletedMessageBuffer",title:"Customize Deleted Message",type:"default",placeholder:"This message is deleted"},{id:"editedMessageBuffer",title:"Customize Edited Separator",type:"default",placeholder:"`[ EDITED ]`"},{id:"historyToast",title:"Customize Remove History Toast Message",type:"default",placeholder:"History Removed"},{id:"logLength",title:"Customize Log message length",type:"numeric",placeholder:"60"},{id:"logCount",title:"Customize Log Limit",type:"numeric",placeholder:"1000"}];function Ea(n){let{styles:r}=n;return M.useProxy(a.storage),React.createElement(React.Fragment,null,React.createElement(va,{style:[r.subText]},St?.map(function(t,i){var l;return React.createElement(React.Fragment,null,React.createElement(Ra,{title:t?.title,keyboardType:t?.type,placeholder:t==null||(l=t.placeholder)===null||l===void 0?void 0:l.toString(),value:(a.storage===null||a.storage===void 0?void 0:a.storage.inputs[t.id])??t?.placeholder,onChange:function(c){return a.storage.inputs[t.id]=c.toString()}}),i!==St.length-1&&React.createElement(ma,null))})))}const $t=h.findByProps("show","confirm","close");h.findByName("StaticSearchBarContainer"),h.findByStoreName("UserStore");const pa=h.findByProps("showUserProfile"),ya=h.findByName("useIsFocused"),{openURL:ba}=h.findByProps("openURL","openDeeplink"),{ScrollView:Ca,View:z,Text:ye,TouchableOpacity:Ae,TextInput:nr,Image:wa,Animated:be}=_.General,{FormLabel:rr,FormIcon:lr,FormArrow:or,FormRow:X,FormSwitch:ir,FormSwitchRow:sr,FormSection:cr,FormDivider:dr,FormInput:ur}=_.Forms,{FlatList:Sa}=e.ReactNative,N=e.stylesheet.createThemedStyleSheet({main_text:{opacity:.975,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL},item_container:{display:"flex",flexDirection:"row",alignItems:"center",paddingTop:4,paddingBottom:4,width:"100%"},log_header:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",maxWidth:"95%"},log_sub_header:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"50%"},log_time:{color:S.semanticColors.TEXT_MUTED,opacity:.99,fontSize:13,paddingLeft:4},log_type:{color:S.semanticColors.TEXT_MUTED,opacity:.45,fontSize:16,marginLeft:"auto"},avatar_container:{alignSelf:"start",justifySelf:"start",marginTop:5},author_avatar:{width:40,height:40,borderRadius:80},author_name:{color:S.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:14,letterSpacing:.25,paddingBottom:4},old_message:{color:S.semanticColors.TEXT_MUTED,opacity:.89,fontSize:13},message_content:{color:S.semanticColors.TEXT_NORMAL,opacity:.985,fontSize:13},main_container:{paddingLeft:8,paddingRight:4,paddingTop:2,paddingBottom:16,width:"95%"},text_container:{display:"flex",flexDirection:"column",paddingBottom:4,paddingLeft:8,width:"95%"}});function Ie(n,r){return n?.length>r?n?.substring(0,r)+"...":n}function _e(){var n,r,t;M.useProxy(a.storage),ya();const i=e.React.useRef(new be.Value(1)).current,l=function(){return be.spring(i,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},c=function(){return be.spring(i,{toValue:1,duration:250,useNativeDriver:!0}).start()},d={transform:[{scale:i}]},[y,b]=e.React.useState([]);e.React.useEffect(function(){var u;(a.storage===null||a.storage===void 0||(u=a.storage.log)===null||u===void 0?void 0:u.length)>0&&b(a.storage.log.reverse())},[]),y?.length>(a.storage===null||a.storage===void 0||(n=a.storage.inputs)===null||n===void 0?void 0:n.logCount)&&a.storage.logWarning&&$t.show({title:"Log exceed limit",body:"Clear log?",confirmText:"Yes",cancelText:"NO",confirmColor:"brand",onConfirm:function(){a.storage.log=[],b([]),G.showToast("[ANTIED] Cleared the log")}});const C=Number((a.storage===null||a.storage===void 0||(r=a.storage.inputs)===null||r===void 0?void 0:r.logLength)||60);function $(u){let{data:m}=u;const{type:E,author:s,content:f,edited:o,where:R}=m;return e.React.createElement(e.React.Fragment,null,e.React.createElement(z,{style:N.item_container},e.React.createElement(Ae,{style:N.avatar_container,onPress:function(){return pa.showUserProfile({userId:s.id})},onPressIn:l,onPressOut:c},e.React.createElement(be.View,{style:[d]},e.React.createElement(wa,{source:{uri:s.avatar?`https://cdn.discordapp.com/avatars/${s?.id}/${s.avatar}.png`:"https://cdn.discordapp.com/embed/avatars/2.png"},style:N.author_avatar}))),e.React.createElement(z,{style:N.text_container},e.React.createElement(z,{style:N.log_header},e.React.createElement(z,{style:N.log_sub_header},e.React.createElement(ye,{style:[N.main_text,N.author_name]},`${s.username}`),e.React.createElement(z,{style:{paddingLeft:"2px"}},E=="MessageUpdate"?e.React.createElement(X.Icon,{source:p.getAssetIDByName("pencil")}):e.React.createElement(X.Icon,{source:p.getAssetIDByName("ic_message_delete")})),e.React.createElement(Ae,{onPress:function(){E=="MessageUpdate"&&m.where.guild&&m.where.channel&&m.where.messageLink?ba(`https://discord.com/channels/${m.where.guild}/${m.where.channel}/${m.where.messageLink}`):G.showToast("Cannot find target Message")}},e.React.createElement(z,{style:{paddingLeft:"2px"}},e.React.createElement(X.Icon,{source:p.getAssetIDByName("ic_show_media")}))))),e.React.createElement(Ae,{onPress:function(){let g=s.username;g+=` (${s.id}):
`,g+=`>>> ${f}`,o&&(g+=`

${o}`),e.clipboard.setString(g),G.showToast("Log content copied")},style:N.text_container},e.React.createElement(z,null,o?.length>0?e.React.createElement(e.React.Fragment,null,e.React.createElement(ye,{style:[N.main_text,N.old_message]},Ie(f,C)),e.React.createElement(ye,{style:[N.main_text,N.message_content]},Ie(o,C))):e.React.createElement(ye,{style:N.message_content},Ie(f,C)))))))}return e.React.createElement(e.React.Fragment,null,e.React.createElement(Ca,null,!(!(a.storage===null||a.storage===void 0||(t=a.storage.switches)===null||t===void 0)&&t.enableLogging)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(X,{label:"To save log of edited/deleted messages, go to plugin setting > patches > Toggle Antied Logging"})),y?.length>0?e.React.createElement(e.React.Fragment,null,e.React.createElement(X,{label:"Nuke logs",trailing:e.React.createElement(X.Icon,{source:p.getAssetIDByName("ic_trash_24px")}),onPress:function(){$t.show({title:"Nuke logs",body:"Nuke the Log?",confirmText:"Yash",cancelText:"nu uh",confirmColor:"brand",onConfirm:function(){a.storage.log=[],b([]),G.showToast("[ANTIED] Logs cleared")}})}})):e.React.createElement(e.React.Fragment,null,e.React.createElement(X,{label:"Only us chicken here, go touch some grass"})),y.length>0&&e.React.createElement(e.React.Fragment,null,e.React.createElement(z,{style:N.main_container},e.React.createElement(Sa,{style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20,paddingHorizontal:5},data:y,renderItem:function(u){let{item:m}=u;return e.React.createElement($,{data:m})}})))))}const $a=h.findByProps("show","confirm","close"),{FormRow:ee}=U;function Aa(){var n;M.useProxy(a.storage);const r=e.NavigationNative.useNavigation();return React.createElement(React.Fragment,null,React.createElement(ee,{label:"Anti Edit & Delete Logs",leading:React.createElement(ee.Icon,{source:p.getAssetIDByName("ic_audit_log_24px")}),trailing:ee.Arrow,onPress:function(){return r.push("VendettaCustomPage",{title:"Antied Logging Page",render:function(){return React.createElement(_e,null)}})}}),(a.storage===null||a.storage===void 0||(n=a.storage.log)===null||n===void 0?void 0:n.length)>0&&React.createElement(React.Fragment,null,React.createElement(ee,{label:"Clear Logs",leading:React.createElement(ee.Icon,{source:p.getAssetIDByName("ic_trash_24px")}),trailing:ee.Arrow,onPress:function(){$a.show({title:"Clear logs",body:"This will erase saved logs, continue?",confirmText:"Yes",cancelText:"No",confirmColor:"brand",onConfirm:function(){a.storage.log=[],G.showToast("[ANTIED] Logs cleared")}})}})))}const{FormRow:Ia}=U,_a=h.findByName("RowCheckmark");function Te(n){let{label:r,subLabel:t,selected:i,onPress:l}=n;return React.createElement(Ia,{label:r,subLabel:t,trailing:React.createElement(_a,{selected:i}),onPress:l})}const At=[{type:"t",label:"Short Time",subLabel:"16:20"},{type:"T",label:"Long Time",subLabel:"16:20:30"},{type:"d",label:"Short Date",subLabel:"20/04/2021"},{type:"D",label:"Long Date",subLabel:"20 April 2021"},{type:"f",label:"Short Date/Time",subLabel:"20 April 2021 16:20"},{type:"F",label:"Long Date/Time",subLabel:"Tuesday, 20 April 2021 16:20"},{type:"R",label:"Relative Time",subLabel:"2 months ago"}],It=[{label:"Before",subLabel:"Old Message (2 minutes ago) [Edited] New Message",key:"BEFORE"},{label:"After",subLabel:"Old Message [Edited] (2 minutes ago) New Message",key:"AFTER"}],{FormRow:_t,FormDivider:Fe}=U;function Ta(){return M.useProxy(a.storage),React.createElement(React.Fragment,null,React.createElement(_t,{label:"Timestamp Style"}),At.map(function(n,r){let{type:t,label:i,subLabel:l}=n;return React.createElement(React.Fragment,null,React.createElement(Te,{label:i,subLabel:`Example: ${l}`,selected:a.storage.switches.timestampStyle==t,onPress:function(){return a.storage.switches.timestampStyle=t}}),r!==At.length-1&&React.createElement(Fe,null))}),React.createElement(Fe,null),React.createElement(_t,{label:"Timestamp Position"}),It.map(function(n,r){let{key:t,label:i,subLabel:l}=n;var c;return React.createElement(React.Fragment,null,React.createElement(Te,{label:i,subLabel:`Example: ${l}`,selected:((c=a.storage.misc)===null||c===void 0?void 0:c.timestampPos)==t,onPress:function(){return a.storage.misc.timestampPos=t}}),r!==It.length-1&&React.createElement(Fe,null))}))}const Fa=Object.keys(S.semanticColors).map(function(n){return`semanticColors.${n}`}),La=Object.keys(S.rawColors).map(function(n){return`rawColors.${n}`}),Tt=[...Fa,...La],{FormRow:Na,FormDivider:Da,ScrollView:Ba}=U;function Pa(){return M.useProxy(a.storage),React.createElement(React.Fragment,null,React.createElement(Ba,null,React.createElement(Na,{label:"Choose Color"}),Tt.map(function(n,r){return React.createElement(React.Fragment,null,React.createElement(Te,{label:n,selected:a.storage.colors.semRawColorPrefix==n,onPress:function(){return a.storage.colors.semRawColorPrefix=n}}),r!==Tt.length-1&&React.createElement(Da,null))})))}const xa=h.findByName("CustomColorPickerActionSheet"),{alphaToHex:Le,hexAlphaToPercent:Ft,toPercentage:se,toDecimal:Lt,formatDecimal:Nt}=sa,{View:ce,FormRow:de,FormSwitch:Ma,FormSliderRow:Dt,FormDivider:ka,Text:Bt,TouchableOpacity:Ua,Image:Oa}=U,Pt=[{id:"textColor",label:"Deleted Message Text Color",subLabel:"Click to customize Deleted Message Text Color",defaultColor:"#E40303"},{id:"backgroundColor",label:"Deleted Message Background Color",subLabel:"Click to customize Background Color",defaultColor:"#FF2C2F"},{id:"gutterColor",label:"Deleted Message Background Gutter Color",subLabel:"Click to customize Background Gutter Color",defaultColor:"#FF2C2F"}];function Va(n){let{styles:r}=n;var t,i,l,c,d,y,b;M.useProxy(a.storage);const[C,$]=e.React.useState(Lt(Ft(a.storage===null||a.storage===void 0||(t=a.storage.colors)===null||t===void 0?void 0:t.backgroundColorAlpha)??100)),[u,m]=e.React.useState(Lt(Ft(a.storage===null||a.storage===void 0||(i=a.storage.colors)===null||i===void 0?void 0:i.gutterColorAlpha)??100)),E=e.NavigationNative.useNavigation(),s=function(o){return Le(se(o))},f=function(o){if(!o)return null;const[R,g]=o.split(".");return R=="semanticColors"?S.semanticColors[g]:S.rawColors[g]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(ce,{style:[r.subText]},(a.storage===null||a.storage===void 0||(l=a.storage.switches)===null||l===void 0?void 0:l.useSemRawColors)&&e.React.createElement(e.React.Fragment,null,e.React.createElement(de,{label:"Semantic & Raw Colors",subLabel:"If you enabled [Use Semantic/Raw Color], you can pick the colors from here",leading:e.React.createElement(de.Icon,{source:p.getAssetIDByName("ic_audit_log_24px")}),trailing:de.Arrow,onPress:function(){return E.push("VendettaCustomPage",{title:"Semantic & Raw Colors",render:function(){return e.React.createElement(Pa,null)}})}})),Pt?.map(function(o){var R;const g=function(){return la(xa,{color:Y?.toInt(a.storage.colors[o.id]||o?.defaultColor||"#000"),onSelect:function(w){const I=Y?.toHex(w);a.storage.colors[o.id]=I}})};return e.React.createElement(e.React.Fragment,null,e.React.createElement(de,{label:o?.label,subLabel:o?.subLabel||"Click to Update",onPress:g,trailing:e.React.createElement(Ua,{onPress:g},e.React.createElement(Oa,{source:{uri:ia},style:{width:32,height:32,borderRadius:10,backgroundColor:(a.storage===null||a.storage===void 0?void 0:a.storage.colors[o.id])||((R=Pt.find(function(w){return w?.id==o?.id}))===null||R===void 0?void 0:R.defaultColor)||"#000"}}))}))}),e.React.createElement(ce,{style:r.container},e.React.createElement(de,{style:{justifyContent:"center",alignItems:"center"},label:`Preview Style: ${!(a.storage===null||a.storage===void 0||(c=a.storage.switches)===null||c===void 0)&&c.darkMode?"Dark":"Light"} Mode`,subLabel:"Click to Switch Mode",trailing:e.React.createElement(Ma,{value:(a.storage===null||a.storage===void 0||(d=a.storage.switches)===null||d===void 0?void 0:d.darkMode)??!0,onValueChange:function(o){return a.storage.switches.darkMode=o}})}),e.React.createElement(ce,{style:[r.row,r.border,{overflow:"hidden",marginRight:10}]},e.React.createElement(ce,{style:{width:"2%",backgroundColor:`${a.storage.colors.gutterColor}${s(u)}`}}),e.React.createElement(ce,{style:{flex:1,backgroundColor:`${a.storage.switches.useSemRawColors&&f(a.storage===null||a.storage===void 0||(y=a.storage.colors)===null||y===void 0?void 0:y.semRawColorPrefix)||a.storage.colors.backgroundColor}${s(C)}`,justifyContent:"center",alignItems:"center"}},e.React.createElement(Bt,{style:{fontSize:20,color:!(a.storage===null||a.storage===void 0||(b=a.storage.switches)===null||b===void 0)&&b.darkMode?"white":"black"}}," Low Effort Normal Example Message "),e.React.createElement(Bt,{style:{fontSize:20,color:a.storage.colors.textColor||"#000000"}}," Low Effort Deleted Example Message "))),e.React.createElement(Dt,{label:`Background Color Alpha: ${se(C)}%`,value:C,style:{width:"90%"},onValueChange:function(o){$(Number(Nt(o))),a.storage.colors.backgroundColorAlpha=Le(se(o))}}),e.React.createElement(ka,null),e.React.createElement(Dt,{label:`Background Gutter Alpha: ${se(u)}%`,value:u,style:{width:"90%"},onValueChange:function(o){m(Number(Nt(o))),a.storage.colors.gutterColorAlpha=Le(se(o))}}))))}const{ScrollView:Ga,View:Ne,Text:za,TouchableOpacity:xt,TextInput:gr,Image:Ha,Animated:Ce}=_.General,{FormLabel:Ya,FormIcon:Xa,FormArrow:fr,FormRow:De,FormSwitch:Wa,FormSwitchRow:hr,FormSection:ja,FormDivider:Ja,FormInput:Mt}=_.Forms,Ka=h.findByName("useIsFocused");h.findByProps("BottomSheetScrollView");const kt=h.findByStoreName("UserStore"),Be=h.findByProps("showUserProfile");p.getAssetIDByName("ic_add_24px"),p.getAssetIDByName("ic_arrow"),p.getAssetIDByName("ic_minus_circle_24px"),p.getAssetIDByName("Check"),p.getAssetIDByName("Small");function Ut(n){return e.React.createElement(Xa,{style:{opacity:1},source:p.getAssetIDByName(n)})}const W=e.stylesheet.createThemedStyleSheet({basicPad:{paddingRight:10,marginBottom:10,letterSpacing:.25},header:{color:S.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,paddingLeft:"3%",letterSpacing:.25},sub:{color:S.semanticColors.TEXT_POSITIVE,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,paddingLeft:"4%",fontSize:18},flagsText:{color:S.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"4%",fontSize:16},container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.2,shadowRadius:4.65,elevation:8},image:{width:75,height:75,borderRadius:10,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.2,shadowRadius:4.65,elevation:8},mainText:{opacity:.975,letterSpacing:.25},subHeader:{color:S.semanticColors.HEADER_SECONDARY,fontSize:12.75}});function Ot(n){let{index:r}=n;var t,i,l,c;M.useProxy(a.storage);let d=a.storage===null||a.storage===void 0||(t=a.storage.inputs)===null||t===void 0?void 0:t.ignoredUserList[r];const y=e.React.useRef(new Ce.Value(1)).current,b=function(){return Ce.spring(y,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},C=function(){return Ce.spring(y,{toValue:1,duration:250,useNativeDriver:!0}).start()},$={transform:[{scale:y}]};let u=kt.getUser(d?.id),m=Object.values(kt.getUsers());u||(u=m.find(function(s){return s?.username==d?.username})),u||(u=m.find(function(s){var f,o;return(s==null||(f=s.username)===null||f===void 0?void 0:f.toLowerCase())==(d==null||(o=d.username)===null||o===void 0?void 0:o.toLowerCase())}));const E=e.NavigationNative.useNavigation();return Ka(),e.React.createElement(e.React.Fragment,null,e.React.createElement(Ga,null,e.React.createElement(Ne,{style:[W.basicPad,W.sub]},e.React.createElement(ja,{title:"User Setting",style:[W.header]},e.React.createElement(De,{label:"Find User Id or Username",leading:Ut("ic_search"),onPress:function(){var s,f;u&&!(!((s=d.username)===null||s===void 0)&&s.length)?d.username=u.username:u&&!(!((f=d.id)===null||f===void 0)&&f.length)?d.id=u.id:G.showToast("Cannot find User Id/Username.")}}),e.React.createElement(Mt,{title:"User Username | Case Sensitive",placeholder:"Missing No",value:d?.username,onChange:function(s){return d.username=s}}),e.React.createElement(Mt,{title:"User Id",placeholder:"Missing No",value:d?.id,onChange:function(s){return d.id=s}}),e.React.createElement(De,{label:"User is webhook?",subLabel:"User is webhook or system, and not BOT or Normal User.",leading:Ut("ic_webhook_24px"),trailing:e.React.createElement(Wa,{value:d?.isWebhook||!1,onValueChange:function(s){return d.isWebhook=s}})})),u&&e.React.createElement(Ne,{style:[W.container,{paddingBottom:10}]},e.React.createElement(xt,{onPress:function(){var s;return(s=Be.showUserProfile)===null||s===void 0?void 0:s.call(Be,{userId:u?.id})},onPressIn:b,onPressOut:C},e.React.createElement(Ce.View,{style:$},e.React.createElement(Ha,{source:{uri:(u==null||(c=u.getAvatarURL)===null||c===void 0||(l=c.call(u))===null||l===void 0||(i=l.replace)===null||i===void 0?void 0:i.call(l,"webp","png"))||"https://cdn.discordapp.com/embed/avatars/2.png"},style:{width:128,height:128,borderRadius:10}}))),e.React.createElement(Ne,{style:W.textContainer},e.React.createElement(xt,{onPress:function(){return Be.showUserProfile({userId:u?.id})}},e.React.createElement(za,{style:[W.mainText,W.header]},u?.username||d?.username||"No Name"))),e.React.createElement(Ja,null)),e.React.createElement(De,{label:e.React.createElement(Ya,{text:"Remove User from Ignore List",style:{color:S.rawColors.RED_400}}),onPress:function(){var s,f;E.pop(),a.storage===null||a.storage===void 0||(f=a.storage.inputs)===null||f===void 0||(s=f.ignoredUserList)===null||s===void 0||s.splice(r,1)}}))))}const{ScrollView:Qa,View:qa,Text:vr,TouchableOpacity:Za,TextInput:en}=_.General,{FormLabel:Rr,FormIcon:tn,FormArrow:an,FormRow:Pe,FormSwitch:mr,FormSwitchRow:Er,FormSection:nn,FormDivider:rn,FormInput:pr}=_.Forms;function Vt(n,r){return e.React.createElement(tn,{style:{opacity:1},source:n})}const ln=h.findByName("useIsFocused");h.findByProps("BottomSheetScrollView");const{getUser:on}=h.findByProps("getUser"),sn=p.getAssetIDByName("ic_add_24px");p.getAssetIDByName("ic_arrow"),p.getAssetIDByName("ic_minus_circle_24px"),p.getAssetIDByName("Check"),p.getAssetIDByName("Small");const cn=p.getAssetIDByName("ic_trash_24px"),te=e.stylesheet.createThemedStyleSheet({basicPad:{paddingRight:10,marginBottom:10,letterSpacing:.25},header:{color:S.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"3.5%",fontSize:24},sub:{color:S.semanticColors.TEXT_POSITIVE,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,paddingLeft:"4%",fontSize:18},flagsText:{color:S.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"4%",fontSize:16},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:S.semanticColors.TEXT_NORMAL},placeholder:{color:S.semanticColors.INPUT_PLACEHOLDER_TEXT}});function dn(){var n;M.useProxy(a.storage);let[r,t]=e.React.useState("");const i=e.NavigationNative.useNavigation();ln();let l=(a.storage===null||a.storage===void 0||(n=a.storage.inputs)===null||n===void 0?void 0:n.ignoredUserList)??[];const c=function(){if(r){if(isNaN(parseInt(r)))l.push({id:void 0,username:r});else{let d=on(r);if(d)l.push({id:d?.id,username:"",showUser:!1,isWebhook:!1});else return G.showToast("Invalid User Id")}t(""),i.push("VendettaCustomPage",{title:"Adding User to Ignore List",render:function(){return e.React.createElement(Ot,{index:l?.length-1})}})}};return e.React.createElement(e.React.Fragment,null,e.React.createElement(Qa,{style:{flex:1}},e.React.createElement(nn,{style:[te.header,te.basicPad]},e.React.createElement(qa,{style:[te.header,te.sub]},l.length>0&&e.React.createElement(Pe,{label:"Clear List",trailing:Vt(cn),onPress:function(){l.length!==0&&na.showConfirmationAlert({title:"Hol up, wait a minute!",content:`This will removes in total ${l.length} users from ignore list.`,confirmText:"Ye",cancelText:"Nah",confirmColor:"brand",onConfirm:function(){a.storage.inputs.ignoredUserList=[]}})}}),l?.map(function(d,y){return e.React.createElement(e.React.Fragment,null,e.React.createElement(Pe,{label:d?.username||d?.id||"No Data",trailing:e.React.createElement(an,null),onPress:function(){return i.push("VendettaCustomPage",{title:"Editing User",render:function(){return e.React.createElement(Ot,{index:y})}})}}),y!==l?.length-1&&e.React.createElement(rn,null))}),e.React.createElement(Pe,{label:e.React.createElement(en,{value:r,onChangeText:t,placeholder:"User ID or Username",placeholderTextColor:te.placeholder.color,selectionColor:e.constants.Colors.PRIMARY_DARK_100,onSubmitEditing:c,returnKeyType:"done",style:te.input}),trailing:e.React.createElement(Za,{onPress:c},Vt(sn))})))))}const{FormRow:un,FormDivider:gn,FormIcon:Gt,TouchableOpacity:fn}=U;function hn(){M.useProxy(a.storage);const n=e.NavigationNative.useNavigation(),r=function(){n.push("VendettaCustomPage",{title:"List of Ignored Users",render:function(){return React.createElement(dn,null)}})};return React.createElement(React.Fragment,null,React.createElement(un,{label:"Add User to List",subLabel:"List of ignored users for the plugin",leading:React.createElement(Gt,{style:{opacity:1},source:p.getAssetIDByName("ic_members")}),onPress:r,trailing:React.createElement(fn,{onPress:r},React.createElement(Gt,{style:{opacity:1},source:p.getAssetIDByName("ic_add_24px")}))}),React.createElement(gn,null))}const{View:vn,FormRow:Rn,FormIcon:mn,FormSwitch:En,FormDivider:pn}=U,zt=[{id:"minimalistic",default:!0,label:"Minimalistic Settings",subLabel:"Removes all Styling (Enabled by Default)"},{id:"useBackgroundColor",default:!1,label:"Enable Background Color",subLabel:"Background Color for Deleted Message, similiar to Mention but Customizeable"},{id:"useSemRawColors",default:!1,label:"Use Semantic/Raw Color",subLabel:"Use Semantic/Raw Color instead of Custom Color for Background Color, doesn't applied to GutterColor"},{id:"ignoreBots",default:!1,label:"Ignore Bots",subLabel:"Ignore bot deleted messages."},{id:"removeDismissButton",default:!1,label:"Remove Dissmiss Message",subLabel:"Remove clickable Dismiss Message text from deleted ephemeral messages."},{id:"addTimestampForEdits",default:!1,label:"Add Edit Timestamp",subLabel:"Add Timestamp for edited messages."}];function yn(n){let{styles:r}=n;return M.useProxy(a.storage),React.createElement(React.Fragment,null,React.createElement(vn,{style:[r.subText]},zt?.map(function(t,i){return React.createElement(React.Fragment,null,React.createElement(Rn,{label:t?.label,subLabel:t?.subLabel,leading:t?.icon&&React.createElement(mn,{style:{opacity:1},source:p.getAssetIDByName(t?.icon)}),trailing:"id"in t?React.createElement(En,{value:(a.storage===null||a.storage===void 0?void 0:a.storage.switches[t?.id])??t?.default,onValueChange:function(l){return a.storage.switches[t?.id]=l}}):void 0}),i!==zt?.length-1&&React.createElement(pn,null))})))}function j(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return[...r]}var xe=[ie("1.2.0",j("Added Update Section")),ie("1.2.1",null,j("Redesign Setting Page")),ie("1.2.2",j("Added Support for Semantic Colors","Added Support for Raw Colors","Added Support for Timestamp Format"),j("Reworked how Message update appends separator")),ie("1.2.3",null,null,j("Fixed Remove Edit button to not persist under Edit Message Button")),ie("1.2.4",null,j("Update Remove Edit button style"),j("Fixed Message Parser Fails to parse edited message"))].reverse();const{ScrollView:br,View:Ht,Text:Cr,TouchableOpacity:wr,TextInput:Sr,Image:$r,Animated:Ar}=_.General,{FormLabel:Ir,FormIcon:bn,FormArrow:_r,FormRow:Me,FormSwitch:Tr,FormSwitchRow:Fr,FormSection:Lr,FormDivider:Cn,FormInput:Nr}=_.Forms,wn=p.getAssetIDByName("ic_radio_square_checked_24px"),Sn=p.getAssetIDByName("ic_radio_square_24px"),$n=p.getAssetIDByName("ic_information_24px");p.getAssetIDByName("ic_info");const An=p.getAssetIDByName("premium_sparkles"),In=p.getAssetIDByName("ic_sync_24px"),_n=p.getAssetIDByName("ic_progress_wrench_24px"),ae=e.stylesheet.createThemedStyleSheet({border:{borderRadius:10},textBody:{color:S.semanticColors.TEXT_NORMAL,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,letterSpacing:.25,fontSize:22},textBody:{color:S.semanticColors.INPUT_PLACEHOLDER_TEXT,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,letterSpacing:.25,fontSize:16},versionBG:{margin:10,padding:15,backgroundColor:"rgba(55, 149, 225, 0.3)"},rowLabel:{margin:10,padding:15,backgroundColor:"rgba(33, 219, 222, 0.34)"}});function we(n){return e.React.createElement(bn,{style:{opacity:1},source:n})}function Tn(n){let{change:r,index:t,totalIndex:i}=n;var l,c,d;const[y,b]=e.React.useState(!1);e.React.useState(!1);function C($,u,m,E){return e.React.createElement(Ht,null,e.React.createElement(Me,{label:u||"No Section",subLabel:m||null,leading:E&&we(E),style:[ae.textHeader]}),$.map(function(s,f){return e.React.createElement(e.React.Fragment,null,e.React.createElement(Me,{label:s,style:[ae.textBody,ae.rowLabel,ae.border]}))}))}return e.React.createElement(e.React.Fragment,null,e.React.createElement(_.ErrorBoundary,null,e.React.createElement(Me,{label:r?.version,leading:t==0?we(wn):we(Sn),trailing:we($n),onPress:function(){b(!y)}}),y&&e.React.createElement(Ht,{style:[ae.versionBG,ae.border]},(r==null||(l=r.new)===null||l===void 0?void 0:l.length)>0&&C(r.new,"New","New stuffies",An),(r==null||(c=r.updated)===null||c===void 0?void 0:c.length)>0&&C(r.updated,"Changes","Update things",In),(r==null||(d=r.fix)===null||d===void 0?void 0:d.length)>0&&C(r.fix,"Fixes","Me hate borken things",_n)),t==i.length-1?void 0:e.React.createElement(Cn,null)))}const{FormSwitch:Yt,FormSection:Xt,FormRow:Wt,ScrollView:Fn,View:ke,FormDivider:jt,Animated:Ue}=U,Ln=h.findByName("LinearGradient"),k=e.stylesheet.createThemedStyleSheet({text:{color:S.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:16},subText:{color:S.semanticColors.TEXT_POSITIVE,paddingLeft:"6%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,fontSize:12},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:S.semanticColors.TEXT_NORMAL},placeholder:{color:S.semanticColors.INPUT_PLACEHOLDER_TEXT},container:{flex:1,justifyContent:"center",alignItems:"center"},colorPreview:{width:"75%",height:100,marginBottom:20},row:{flexDirection:"row",height:80,width:"90%",marginBottom:20},border:{borderRadius:12},lnBorder:{borderRadius:12,overflow:"hidden"},shadowTemplate:{shadowOffset:{width:1,height:3},shadowOpacity:.9,shadowRadius:24,elevation:16},lnShadow:{flex:1,margin:"1%",shadowColor:"#b8ff34"},darkMask:{backgroundColor:"rgba(10, 10, 10, 0.9)",margin:2,padding:"3%"},padBot:{paddingBottom:20}});function Oe(){M.useProxy(a.storage);const[n]=e.React.useState(new Ue.Value(0));e.React.useEffect(function(){Ue.loop(Ue.timing(n,{toValue:4,duration:8e3,useNativeDriver:!0})).start()},[]);const r={backgroundColor:n.interpolate({inputRange:[0,1,2,3,4],outputRange:["rgba(188,31,31,0.5)","rgba(46,168,30,0.5)","rgba(48,179,173,0.5)","rgba(183,40,198,0.5)","rgba(188,31,31,0.5)"]})},t=function(l,c,d,y,b,C){return{id:l,title:c,label:d,subLabel:y,props:b,propsData:C}},i=[t("patches","Plugin Patcher","Patches","Toggle what the plugin patch",ha,k),t("customize","Customization","Customize",null,yn,k),t("logging","Logging","Toggle Logger",null,Aa,null),t("text","Text Variables","Customize Texts",null,Ea,k),t("timestamp","Timestamp","Timestamp Styles",null,Ta,k),t("colorpick","Colors","Customize Colors",null,Va,k),t("ingorelist","Ignore List","Show IngoreList",null,hn,null)];return e.React.createElement(e.React.Fragment,null,e.React.createElement(Fn,null,e.React.createElement(Ln,{start:{x:.8,y:0},end:{x:0,y:.8},colors:["#b8ff34","#4bff61","#44f6ff","#4dafff","#413dff","#d63efd"],style:[k.lnBorder,k.shadowTemplate,k.lnShadow,k.padBot]},e.React.createElement(ke,{style:[k.lnBorder,r,k.darkMask]},i.map(function(l){return e.React.createElement(e.React.Fragment,null,e.React.createElement(Xt,{title:l?.title},e.React.createElement(Wt,{label:l?.label,subLabel:l?.subLabel,trailing:e.React.createElement(Yt,{value:a.storage.setting[l?.id],onValueChange:function(c){a.storage.setting[l?.id]=c}})}),a.storage.setting[l.id]&&l.props&&e.React.createElement(ke,{style:{margin:5,padding:10,borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.15)"}},e.React.createElement(l.props,{styles:l.propsData}))))}),e.React.createElement(jt,null),e.React.createElement(Wt,{label:"Debug",subLabel:"Enable console logging",style:[k.padBot],trailing:e.React.createElement(Yt,{value:a.storage.debug,onValueChange:function(l){a.storage.debug=l}})}),e.React.createElement(jt,null),xe&&e.React.createElement(Xt,{title:"Updates"},e.React.createElement(ke,{style:{margin:5,padding:5,borderRadius:10,backgroundColor:"rgba(59, 30, 55, 0.15)"}},xe.map(function(l,c){return e.React.createElement(Tn,{change:l,index:c,totalIndex:xe.length})})))))))}h.findByProps("openLazy","hideActionSheet");const J=h.findByProps("getChannel","getDMFromUserId"),Nn=h.findByProps("_channelMessages"),Dn=h.findByProps("getMessage","getMessages");function Bn(n){return L.before("dispatch",e.FluxDispatcher,function(r){const[t]=r,i=t?.type;if(i=="MESSAGE_DELETE"){var l,c,d,y,b,C,$,u,m,E,s,f,o;if(a.storage.switches.enableMD==!1||t?.otherPluginBypass)return r;const A=Nn.get(t.channelId),v=A?.get(t.id);if(!v||t?.id&&((l=n[t?.id])===null||l===void 0?void 0:l.stage)==2)return r;if(t?.id&&((c=n[t?.id])===null||c===void 0?void 0:c.stage)==1){var R;return n[t?.id].stage=2,((R=n[t?.id])===null||R===void 0?void 0:R.message)??r}const yt=v==null||(d=v.author)===null||d===void 0?void 0:d.id,bt=v==null||(y=v.author)===null||y===void 0?void 0:y.username,ve=!v?.content&&(v==null||(b=v.attachments)===null||b===void 0?void 0:b.length)==0&&(v==null||(C=v.embeds)===null||C===void 0?void 0:C.length)==0;if(!yt||!bt||ve||!(a.storage===null||a.storage===void 0||($=a.storage.switches)===null||$===void 0)&&$.ignoreBots&&!(v==null||(u=v.author)===null||u===void 0)&&u.bot||(a.storage===null||a.storage===void 0||(E=a.storage.inputs)===null||E===void 0||(m=E.ignoredUserList)===null||m===void 0?void 0:m.length)>0&&!((s=a.storage.inputs.ignoredUserList)===null||s===void 0)&&s.some(function(ne){var Re;return ne?.id==(v==null||(Re=v.author)===null||Re===void 0?void 0:Re.id)||ne.username==v.author.username}))return r;if(r[0]={type:"MESSAGE_UPDATE",channelId:v?.channel_id||t?.channelId,message:{...v,content:v?.content,type:0,flags:64,channel_id:v?.channel_id||t?.channelId,guild_id:J==null||(f=J.getChannel(v?.channel_id))===null||f===void 0?void 0:f.guild_id,timestamp:`${new Date().toJSON()}`,state:"SENT",was_deleted:!0},optimistic:!1,sendMessageOptions:{},isPushNotification:!1},n[t?.id||v?.id]={message:r,stage:1},!(a.storage===null||a.storage===void 0||(o=a.storage.switches)===null||o===void 0)&&o.enableLogging){var g,w,I,T,D,x,O,V;a.storage.log.push({type:"MessageDelete",author:{id:v==null||(g=v.author)===null||g===void 0?void 0:g.id,username:`${(v==null||(w=v.author)===null||w===void 0?void 0:w.discriminator)=="0"?`@${v==null||(I=v.author)===null||I===void 0?void 0:I.username}`:`${v==null||(T=v.author)===null||T===void 0?void 0:T.username}#${v==null||(D=v.author)===null||D===void 0?void 0:D.discriminator}`}`,avatar:v==null||(x=v.author)===null||x===void 0?void 0:x.avatar,bot:v==null||(O=v.author)===null||O===void 0?void 0:O.bot},content:v?.content,where:{channel:v?.channel_id||t?.channelId,guild:J==null||(V=J.getChannel(v?.channel_id))===null||V===void 0?void 0:V.guild_id,messageLink:v?.id}})}return r}if(i=="MESSAGE_UPDATE"){var B,ue,ge,K,P,Q,q,Z,fe,H,he,ze,He,Ye,Xe,We,je,Je,Ke;if(a.storage.switches.enableMU==!1||t?.otherPluginBypass||!(t==null||(ue=t.message)===null||ue===void 0||(B=ue.author)===null||B===void 0)&&B.bot)return r;const A=Dn.getMessage((t==null||(ge=t.message)===null||ge===void 0?void 0:ge.channel_id)||t?.channelId,(t==null||(K=t.message)===null||K===void 0?void 0:K.id)||t?.id),v=A==null||(P=A.author)===null||P===void 0?void 0:P.id,yt=A==null||(Q=A.author)===null||Q===void 0?void 0:Q.username,bt=!A?.content&&(A==null||(q=A.attachments)===null||q===void 0?void 0:q.length)==0&&(A==null||(Z=A.embeds)===null||Z===void 0?void 0:Z.length)==0;if(!A||!v||!yt||bt||!(!(t==null||(fe=t.message)===null||fe===void 0)&&fe.content)||!A?.content||(t==null||(H=t.message)===null||H===void 0?void 0:H.content)==A?.content||(a.storage===null||a.storage===void 0||(ze=a.storage.inputs)===null||ze===void 0||(he=ze.ignoredUserList)===null||he===void 0?void 0:he.length)>0&&!(a.storage===null||a.storage===void 0||(Ye=a.storage.inputs)===null||Ye===void 0||(He=Ye.ignoredUserList)===null||He===void 0)&&He.some(function(re){var me,le;return re?.id==(A==null||(me=A.author)===null||me===void 0?void 0:me.id)||re?.username==(A==null||(le=A.author)===null||le===void 0?void 0:le.username)}))return r;let ve=(a.storage===null||a.storage===void 0||(Xe=a.storage.inputs)===null||Xe===void 0?void 0:Xe.editedMessageBuffer)||"`[ EDITED ]`";const ne=function(re){return`${re}

`},Re=t?.message||A;let $e=`${A?.content}`;if(!(a.storage===null||a.storage===void 0||(We=a.storage.switches)===null||We===void 0)&&We.addTimestampForEdits){var Qe;const re=Date.now(),me=["t","T","d","D","f","F","R"].some(function(Ee){return Ee==a.storage.switches.timestampStyle})?a.storage.switches.timestampStyle:"R",le=`<t:${Math.abs(Math.round(re/1e3))}:${me}>`;if((a.storage===null||a.storage===void 0||(Qe=a.storage.misc)===null||Qe===void 0?void 0:Qe.timestampPos)=="BEFORE"){var qe;const Ee=`${ne(`(${le}) ${ve}`)}${(t==null||(qe=t.message)===null||qe===void 0?void 0:qe.content)??""}`;$e+=`  ${Ee}`}else{var Ze;const Ee=`${ne(`${ve} (${le})`)}${(t==null||(Ze=t.message)===null||Ze===void 0?void 0:Ze.content)??""}`;$e+=`  ${Ee}`}}else{var et;$e+=`  ${ne(ve)}${(t==null||(et=t.message)===null||et===void 0?void 0:et.content)??""}`}if(r[0]={type:"MESSAGE_UPDATE",message:{...Re,content:$e,guild_id:(je=J.getChannel(t?.channelId||(t==null||(Je=t.message)===null||Je===void 0?void 0:Je.channel_id)||A?.channel_id))===null||je===void 0?void 0:je.guild_id,edited_timestamp:"invalid_timestamp"}},!(a.storage===null||a.storage===void 0||(Ke=a.storage.switches)===null||Ke===void 0)&&Ke.enableLogging){var tt,at,nt,rt,lt,ot,it,st,ct,dt,ut,gt,ft,ht,vt,Rt,mt,Et,pt;a.storage.log.push({type:"MessageUpdate",author:{id:t==null||(at=t.message)===null||at===void 0||(tt=at.author)===null||tt===void 0?void 0:tt.id,username:`${(t==null||(rt=t.message)===null||rt===void 0||(nt=rt.author)===null||nt===void 0?void 0:nt.discriminator)=="0"?`@${t==null||(ot=t.message)===null||ot===void 0||(lt=ot.author)===null||lt===void 0?void 0:lt.username}`:`${t==null||(st=t.message)===null||st===void 0||(it=st.author)===null||it===void 0?void 0:it.username}#${t==null||(dt=t.message)===null||dt===void 0||(ct=dt.author)===null||ct===void 0?void 0:ct.discriminator}`}`,avatar:t==null||(gt=t.message)===null||gt===void 0||(ut=gt.author)===null||ut===void 0?void 0:ut.avatar,bot:t==null||(ht=t.message)===null||ht===void 0||(ft=ht.author)===null||ft===void 0?void 0:ft.bot},content:A?.content,edited:t==null||(vt=t.message)===null||vt===void 0?void 0:vt.content,where:{channel:t?.channelId||(t==null||(Rt=t.message)===null||Rt===void 0?void 0:Rt.channel_id)||A?.channel_id,guild:J==null||(mt=J.getChannel(t?.channelId||(t==null||(Et=t.message)===null||Et===void 0?void 0:Et.channel_id)||A?.channel_id))===null||mt===void 0?void 0:mt.guild_id,messageLink:t==null||(pt=t.message)===null||pt===void 0?void 0:pt.id}})}return r}return r})}const Pn=h.findByProps("startEditMessage");function xn(){return L.before("startEditMessage",Pn,function(n){var r;let t=(a.storage===null||a.storage===void 0||(r=a.storage.inputs)===null||r===void 0?void 0:r.editedMessageBuffer)||"`[ EDITED ]`";const i=Se(t),l=new RegExp(`(?:(?:\\s${i}(\\s\\(<t:\\d+:[tTdDfFR]>\\))?\\n{2})|(?:(?:\\s\\(<t:\\d+:[tTdDfFR]>\\) ${i}\\n{2})))`,"gm"),[c,d,y]=n,b=y.split(l);return n[2]=b[b.length-1],n})}const{DCDChatManager:Mn}=e.ReactNative.NativeModules;function kn(n){return L.before("updateRows",Mn,function(r){var t;let i=JSON.parse(r[1]);const{textColor:l,backgroundColor:c,backgroundColorAlpha:d,gutterColor:y,gutterColorAlpha:b}=a.storage.colors,C=(t=a.storage.inputs)===null||t===void 0?void 0:t.deletedMessageBuffer,{useBackgroundColor:$,minimalistic:u,removeDismissButton:m}=a.storage.switches;function E(o,R){o||(o=R);const g=o?.trim();if(g.startsWith("#")){const w=g.slice(1);if(/^[0-9A-Fa-f]{6}$/.test(w))return"#"+w.toUpperCase()}else if(/^[0-9A-Fa-f]{6}$/.test(g))return"#"+g.toUpperCase();return R||"#000"}function s(o,R){const g=R?.toString(),w=["text","heading","s","u","em","strong","list","blockQuote"];if(Array.isArray(o))return o.map(function(I){return s(I,g)});if(typeof o=="object"&&o!==null){const{content:I,type:T,target:D,items:x}=o;if(!w.includes(T))return o;if(T==="text"&&I&&I.length>=1)return{content:[{content:I,type:"text"}],target:"usernameOnClick",type:"link",context:{username:1,medium:!0,usernameOnClick:{action:"0",userId:"0",linkColor:e.ReactNative.processColor(g),messageChannelId:"0"}}};const O=s(I,g),V=x?x.map(s,g):void 0;if(O!==I||V!==x||!w.includes(T)){const B={...o,content:O};return T==="blockQuote"&&D&&(B.content=O,B.target=D),T==="list"&&B?.content&&delete B.content,x&&(B.items=V),B}}return o}function f(o,R,g){return o&&o.content[0].content.splice(1),o}return i.forEach(function(o){if(o?.type==1){var R;if(n[o==null||(R=o.message)===null||R===void 0?void 0:R.id]){if((C?.length>0||C!="")&&(o.message.edited=C),u==!1){var g;const w=E(l,"#E40303"),I=s(o==null||(g=o.message)===null||g===void 0?void 0:g.content,w);o.message.content=I}if(m&&(o.message.ephemeralIndication=f(o.message.ephemeralIndication)),u==!1&&$==!0){const w=E(`${c}`,"#FF2C2F"),I=E(`${y}`,"#FF2C2F");o.backgroundHighlight??(o.backgroundHighlight={}),o.backgroundHighlight={backgroundColor:e.ReactNative.processColor(`${w}${d}`),gutterColor:e.ReactNative.processColor(`${I}${b}`)}}}}}),r[1]=JSON.stringify(i),r[1]})}const Un=h.findByProps("updateMessageRecord","createMessageRecord");function On(){return L.after("createMessageRecord",Un,function(n,r){let[t]=n;r.was_deleted=t.was_deleted})}const Vn=h.findByName("MessageRecord",!1);function Gn(){return L.after("default",Vn,function(n,r){let[t]=n;r.was_deleted=!!t.was_deleted})}const Jt=h.findByProps("updateMessageRecord","createMessageRecord");function zn(){return L.instead("updateMessageRecord",Jt,function(n,r){let[t,i]=n;return i.was_deleted?Jt.createMessageRecord(i,t.reactions):r.apply(this,[t,i])})}const{FormSection:Hn}=_.Forms,Yn=h.findByName("getScreens"),Xn=h.findByName("UserSettingsOverviewWrapper",!1),Wn=e.stylesheet.createThemedStyleSheet({container:{flex:1,backgroundColor:S.semanticColors.BACKGROUND_MOBILE_PRIMARY}});function jn(n,r){r||(r=e.NavigationNative.useNavigation()),e.React.useEffect(function(){r.setOptions(n)},[r])}function Kt(n,r,t){const i=[],l=L.after("default",Xn,function(c,d){l();const y=pe.findInReactTree(d.props.children,function(b){return b.type&&b.type.name==="UserSettingsOverview"});i.push(L.after("render",y.type.prototype,function(b,C){let{props:{children:$}}=C;const u=[e.i18n.Messages.BILLING_SETTINGS,e.i18n.Messages.PREMIUM_SETTINGS];$=pe.findInReactTree($,function(E){return E.children[1].type===Hn}).children;const m=$.findIndex(function(E){return u.includes(E?.props.label)});n()&&$.splice(m===-1?4:m,0,r({}))}))},!0);if(i.push(l),Yn&&t){const c=`BUNNY_PLUGIN_${e.lodash.snakeCase(t.key).toUpperCase()}`,d=t.page.render,y=e.React.memo(function(u){let{navigation:m}=u;return jn(pe.without(t.page,"noErrorBoundary","render"),m),e.React.createElement(e.ReactNative.View,{style:Wn.container},t.page.noErrorBoundary?e.React.createElement(d,null):e.React.createElement(_.ErrorBoundary,null,e.React.createElement(d,null)))}),b={[c]:{type:"route",title:function(){return t.title},usePredicate:n,icon:t.icon,parent:null,screen:{route:`BunnyPlugin${e.lodash.chain(t.key).camelCase().upperFirst().value()}`,getComponent:function(){return y}}}},C=function(u,m){var E,s;const f=[...u],o=m?f==null||(E=f[0])===null||E===void 0?void 0:E.sections:f;if(!Array.isArray(o))return o;const R="Bunny",g=o.find(function(w){return w?.title===R||w?.label===R});return g&&!(!(g==null||(s=g.settings)===null||s===void 0)&&s.includes(c))&&g.settings.push(c),f},$=function(){const u=h.findByProps("useOverviewSettings"),m=h.findByProps("getSettingTitleConfig"),E=h.findByProps("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),s="getSettingSearchListItems",f="getSettingListItems",o=h.findByProps(s),R=o?s:f,g=o??h.findByProps(f);if(!g||!u)return!1;i.push(L.after("useOverviewSettings",u,function(T,D){return C(D)})),i.push(L.after("getSettingTitleConfig",m,function(T,D){return{...D,[c]:t.title}})),i.push(L.after(R,g,function(T,D){let[x]=T;return[...x.includes(c)?[{type:"setting_search_result",ancestorRendererData:b[c],setting:c,title:function(){return t.title},breadcrumbs:["Bunny","Nexpid"],icon:b[c].icon}]:[],...D]}));const w=E.SETTING_RELATIONSHIPS,I=E.SETTING_RENDERER_CONFIGS;return E.SETTING_RELATIONSHIPS={...w,[c]:null},E.SETTING_RENDERER_CONFIGS={...I,...b},i.push(function(){E.SETTING_RELATIONSHIPS=w,E.SETTING_RENDERER_CONFIGS=w}),!0};(function(){const u=h.findByProps("SearchableSettingsList"),m=h.findByProps("SETTING_RENDERER_CONFIG"),E=h.findByProps("getSettingListItems");if(!E||!u||!m)return!1;i.push(L.before("type",u.SearchableSettingsList,function(f){return C(f,!0)})),i.push(L.after("getSettingListSearchResultItems",E,function(f,o){for(const R of o)R.setting===c&&(R.breadcrumbs=["Bunny","Nexpid"])}));const s=m.SETTING_RENDERER_CONFIG;return m.SETTING_RENDERER_CONFIG={...s,...b},i.push(function(){m.SETTING_RENDERER_CONFIG=s}),!0})()||$()}return function(){return i.forEach(function(c){return c()})}}const{FormRow:Ve}=_.Forms;function Jn(){var n;const r=e.NavigationNative.useNavigation(),t=function(l){return l.replace(/\s?v\d+.\d+.\w+/,"")},i=!(F.plugin===null||F.plugin===void 0||(n=F.plugin.manifest)===null||n===void 0)&&n.name?`${t(F.plugin.manifest.name)} Settings`:"Anti Edit & Delete Settings";return React.createElement(_.ErrorBoundary,null,React.createElement(Ve,{label:i,leading:React.createElement(Ve.Icon,{source:p.getAssetIDByName("ic_edit_24px")}),trailing:Ve.Arrow,onPress:function(){return r.push("VendettaCustomPage",{title:i,render:Oe})}}))}const{FormRow:Ge}=_.Forms;function Kn(){var n;const r=e.NavigationNative.useNavigation(),t=function(l){return l.replace(/\s?v\d+.\d+.\w+/,"")},i=!(F.plugin===null||F.plugin===void 0||(n=F.plugin.manifest)===null||n===void 0)&&n.name?`${t(F.plugin.manifest.name)} Logs`:"Anti Edit & Delete Logs";return React.createElement(_.ErrorBoundary,null,React.createElement(Ge,{label:i,leading:React.createElement(Ge.Icon,{source:p.getAssetIDByName("ic_audit_log_24px")}),trailing:Ge.Arrow,onPress:function(){return r.push("VendettaCustomPage",{title:i,render:_e})}}))}function Qn(){var n;const r=[],t=function(d){return d.replace(/\s?v\d+.\d+.\w+/,"")},i=F.plugin===null||F.plugin===void 0||(n=F.plugin.manifest)===null||n===void 0?void 0:n.name,l=i?`${t(i)} Settings`:"Anti Edit & Delete Settings",c=i?`${t(i)} Logs`:"Anti Edit & Delete Logs";return r.push(Kt(function(){return!0},function(){return React.createElement(Jn,null)},{key:"antied_setting",icon:p.getAssetIDByName("ic_edit_24px"),title:l,page:{title:l,render:Oe}}),Kt(function(){return!0},function(){return React.createElement(Kn,null)},{key:"antied_logs",icon:p.getAssetIDByName("ic_message_delete"),title:c,page:{title:c,render:_e}})),function(){return r.forEach(function(d){return d()})}}const Qt=h.findByProps("openLazy","hideActionSheet"),qn=h.findByProps("getMessage","getMessages"),Zn=h.findByProps("getChannel","getDMFromUserId"),{ActionSheetRow:qt}=h.findByProps("ActionSheetRow");function er(){return L.before("openLazy",Qt,function(n){let[r,t,i]=n;const l=i?.message;t!=="MessageLongPressActionSheet"||!l||r.then(function(c){const d=L.after("default",c,function(y,b){var C;e.React.useEffect(function(){return function(){d()}},[]);const $=pe.findInReactTree(b,function(f){var o;return f==null||(o=f.find)===null||o===void 0?void 0:o.call(f,function(R){var g,w;return(R==null||(g=R.props)===null||g===void 0?void 0:g.label)==(e.i18n===null||e.i18n===void 0||(w=e.i18n.Messages)===null||w===void 0?void 0:w.MESSAGE_ACTION_REPLY)})});if(!$)return b;const u=Math.max($.findIndex(function(f){var o,R;return(f==null||(o=f.props)===null||o===void 0?void 0:o.label)==(e.i18n===null||e.i18n===void 0||(R=e.i18n.Messages)===null||R===void 0?void 0:R.MESSAGE_ACTION_REPLY)}),$.length-1),m=qn.getMessage(l.channel_id,l?.id),E=Se((a.storage===null||a.storage===void 0||(C=a.storage.inputs)===null||C===void 0?void 0:C.editedMessageBuffer)||"`[ EDITED ]`");if(new RegExp(E,"gmi").test(l.content)){var s;const f=u||1;$.splice(f,0,e.React.createElement(qt,{label:"Remove Edit History",subLabel:`Added by ${ea(F.plugin===null||F.plugin===void 0||(s=F.plugin.manifest)===null||s===void 0?void 0:s.name)||"ANTIED"}`,icon:e.React.createElement(qt.Icon,{source:p.getAssetIDByName("ic_edit_24px")}),onPress:function(){var o,R,g,w,I,T;let D=(a.storage===null||a.storage===void 0||(o=a.storage.inputs)===null||o===void 0?void 0:o.editedMessageBuffer)||"`[ EDITED ]`";const x=Se(D),O=new RegExp(`(?:(?:\\s${x}(\\s\\(<t:\\d+:[tTdDfFR]>\\))?\\n{2})|(?:(?:\\s\\(<t:\\d+:[tTdDfFR]>\\) ${x}\\n{2})))`,"gm"),V=l==null||(R=l.content)===null||R===void 0?void 0:R.split(O);if(a.storage.debug){var B;console.log([[D],l==null||(B=l.content)===null||B===void 0?void 0:B.split(O),V])}const ue=V[V.length-1],ge=l==null||(g=l.embeds)===null||g===void 0?void 0:g.map(function(P){var Q,q,Z;const fe=P==null||(Z=P.color)===null||Z===void 0||(q=Z.replace(/.+\(/,""))===null||q===void 0||(Q=q.replace(/%/g,""))===null||Q===void 0?void 0:Q.replace(")",""),H=fe?.split(", "),he=e.ReactNative.processColor(`${oa(Y.HSLtoHEX(H[0],H[1],H[2]),H[3])}`);return{...P,author:P.author,title:P.rawTitle,description:P.rawDescription,url:P.url,type:P.type,image:P.image,thumbnail:P.thumbnail,color:he,content_scan_version:1}});if(e.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...l,content:`${ue}`,embeds:ge??[],attachments:l.attachments??[],mentions:l.mentions??[],guild_id:Zn.getChannel(m.channel_id).guild_id},otherPluginBypass:!0}),Qt.hideActionSheet(),(a.storage===null||a.storage===void 0||(I=a.storage.inputs)===null||I===void 0||(w=I.historyToast)===null||w===void 0?void 0:w.length)>0||(a.storage===null||a.storage===void 0||(T=a.storage.inputs)===null||T===void 0?void 0:T.historyToast)!=""){var K;G.showToast(`[ANTI ED] ${a.storage===null||a.storage===void 0||(K=a.storage.inputs)===null||K===void 0?void 0:K.historyToast}`,p.getAssetIDByName("ic_edit_24px"))}}}))}})})})}const Zt=h.findByProps("_channelMessages"),Se=function(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},ea=function(n){return n.replace(/\s?v\d+.\d+.\w+/,"")};Ct(a.storage,{setting:{colorpick:!1,customize:!1,ingorelist:!1,logging:!1,patches:!1,text:!1,timestamp:!1},switches:{customizeable:!1,enableMD:!0,enableMU:!0,enableLogging:!1,useBackgroundColor:!1,useSemRawColors:!1,ignoreBots:!1,minimalistic:!0,alwaysAdd:!1,darkMode:!0,removeDismissButton:!1,addTimestampForEdits:!1,timestampStyle:"R"},colors:{textColor:"#E40303",backgroundColor:"#FF2C2F",backgroundColorAlpha:"33",gutterColor:"#FF2C2F",gutterColorAlpha:"CC",semRawColorPrefix:"semanticColors.TEXT_BRAND"},inputs:{deletedMessageBuffer:"This message is deleted",editedMessageBuffer:"`[ EDITED ]`",historyToast:"History Removed",logLength:60,logCount:100,ignoredUserList:[]},misc:{timestampPos:"BEFORE"},log:[],logWarning:!1,debug:!1});let ta={};const aa=[];var tr={onLoad:function(){aa.push(Qn(),Bn(ta),kn(ta),xn(),On(),Gn(),zn(),er())},onUnload:function(){for(const n of aa)n();for(const n in Zt._channelMessages)for(const r of Zt._channelMessages[n]._array)r.was_deleted&&e.FluxDispatcher.dispatch({type:"MESSAGE_DELETE",id:r.id,channelId:r.channel_id,otherPluginBypass:!0})},settings:Oe};return oe.default=tr,oe.regexEscaper=Se,oe.stripVersions=ea,Object.defineProperty(oe,"__esModule",{value:!0}),oe})({},vendetta,vendetta.metro,vendetta.ui.components,vendetta.metro.common,vendetta.storage,vendetta.plugin,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.ui.alerts,vendetta.patcher,vendetta.utils);
