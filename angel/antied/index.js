(function(V,x,u,C,I,g,K,e,s,y,F,$,rt){"use strict";function st(a){var n=Object.create(null);return a&&Object.keys(a).forEach(function(t){if(t!=="default"){var o=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(n,t,o.get?o:{enumerable:!0,get:function(){return a[t]}})}}),n.default=a,Object.freeze(n)}var ot=st(g);const{openLazy:it,hideActionSheet:rn}=u.findByProps("openLazy","hideActionSheet");function Ce(a,n){if(a!=null&&n!=null)for(const t of Object.keys(n))typeof n[t]=="object"&&!Array.isArray(n[t])?(typeof a[t]!="object"&&(a[t]={}),Ce(a[t],n[t])):a[t]??(a[t]=n[t])}function lt(a,n){try{it(new Promise(function(t){return t({default:a})}),"ActionSheet",n)}catch(t){x.logger.error(t.stack),showToast("Got error when opening ActionSheet! Please check debug logs")}}const ct=function(a,n){return`${a}${Math.floor(n*255).toString(16).padStart(2,0)}`},ne={toInt(a){return a=a.replace(/^#/,""),parseInt(a,16)},toHex(a){return"#"+a.toString(16).toUpperCase()},HSLtoHEX(a,n,t){t/=100;const o=n*Math.min(t,1-t)/100,r=function(i){const m=(i+a/30)%12,f=t-o*Math.max(Math.min(m-3,9-m,1),-1);return Math.round(255*f).toString(16).padStart(2,"0")};return`#${r(0)}${r(8)}${r(4)}`}};function z(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{version:a,new:n,updated:t,fix:o}}const B={...C.General,...C.Forms},ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII=",dt={toPercentage:function(a){return a=Number(a),a===0?0:a===1?100:Math.round(a*100)},toDecimal:function(a){a=Number(a);const n=Math.min(Math.max(a,0),100);return n===0?0:n===100?1:n/100},formatDecimal:function(a){return a=Number(a),a===0||a===1?a:a.toFixed(2)},alphaToHex:function(a){a=Number(a);const n=Math.min(Math.max(a,0),100),t=Math.round(n/100*255).toString(16).toUpperCase();return t.length===1?"0"+t:t},hexAlphaToPercent:function(a){const n=parseInt(a,16);return isNaN(n)?0:Math.round(n/255*100)}};u.findByProps("openLazy","hideActionSheet");const Ae=u.findByProps("getChannel","getDMFromUserId"),gt=u.findByProps("_channelMessages"),ft=u.findByProps("getMessage","getMessages");function ht(a){return I.before("dispatch",e.FluxDispatcher,function(n){const[t]=n,o=t?.type;if(s.storage.debug&&console.log("[ANTIED fluxdispatcher]",t),o=="MESSAGE_DELETE"){if(s.storage.switches.enableMD==!1||t?.otherPluginBypass)return n;const r=gt.get(t.channelId)?.get(t.id);if(!r||t?.id&&a[t?.id]?.stage==2)return n;if(t?.id&&a[t?.id]?.stage==1)return a[t?.id].stage=2,a[t?.id]?.message??n;const i=r?.author?.id,m=r?.author?.username,f=!r?.content&&r?.attachments?.length==0&&r?.embeds?.length==0;if(!i||!m||f||s.storage?.switches?.ignoreBots&&r?.author?.bot||s.storage?.inputs?.ignoredUserList?.length>0&&s.storage.inputs.ignoredUserList?.some(function(d){return d?.id==r?.author?.id||d.username==r.author.username}))return n;const p=Ae?.getChannel(r?.channel_id)?.guild_id;let l={...r,content:r?.content,type:0,channel_id:r?.channel_id||t?.channelId,guild_id:p,timestamp:`${new Date().toJSON()}`,state:"SENT",was_deleted:!0};return s.storage?.switches?.useEphemeralForDeleted&&(l.flags=64),n[0]={type:"MESSAGE_UPDATE",channelId:r?.channel_id||t?.channelId,message:l,optimistic:!1,sendMessageOptions:{},isPushNotification:!1},a[t?.id||r?.id]={message:n,stage:1},s.storage?.switches?.enableLogging&&s.storage.log.push({type:"MessageDelete",author:{id:r?.author?.id,username:`${r?.author?.discriminator=="0"?`@${r?.author?.username}`:`${r?.author?.username}#${r?.author?.discriminator}`}`,avatar:r?.author?.avatar,bot:r?.author?.bot},content:r?.content,where:{channel:r?.channel_id||t?.channelId,guild:p,messageLink:r?.id}}),n}if(o=="MESSAGE_UPDATE"){if(s.storage.switches.enableMU==!1||t?.otherPluginBypass||t?.message?.author?.bot)return n;const r=ft.getMessage(t?.message?.channel_id||t?.channelId,t?.message?.id||t?.id),i=r?.author?.id,m=r?.author?.username,f=!r?.content&&r?.attachments?.length==0&&r?.embeds?.length==0;if(!r||!i||!m||f||!t?.message?.content||!r?.content||t?.message?.content==r?.content||s.storage?.inputs?.ignoredUserList?.length>0&&s.storage?.inputs?.ignoredUserList?.some(function(R){return R?.id==r?.author?.id||R?.username==r?.author?.username}))return n;let p=s.storage?.inputs?.editedMessageBuffer||"`[ EDITED ]`";const l=function(R){return`${R}

`},d=t?.message||r;let h=`${r?.content}`;if(s.storage?.switches?.addTimestampForEdits){const R=Date.now(),S=["t","T","d","D","f","F","R"].some(function(b){return b==s.storage.switches.timestampStyle})?s.storage.switches.timestampStyle:"R",c=`<t:${Math.abs(Math.round(R/1e3))}:${S}>`;if(s.storage?.misc?.timestampPos=="BEFORE"){const b=`${l(`(${c}) ${p}`)}${t?.message?.content??""}`;h+=`  ${b}`}else{const b=`${l(`${p} (${c})`)}${t?.message?.content??""}`;h+=`  ${b}`}}else h+=`  ${l(p)}${t?.message?.content??""}`;const E=Ae.getChannel(t?.channelId||t?.message?.channel_id||r?.channel_id)?.guild_id;return n[0]={type:"MESSAGE_UPDATE",message:{...d,content:h,guild_id:E,edited_timestamp:"invalid_timestamp"}},s.storage?.switches?.enableLogging&&s.storage.log.push({type:"MessageUpdate",author:{id:t?.message?.author?.id,username:`${t?.message?.author?.discriminator=="0"?`@${t?.message?.author?.username}`:`${t?.message?.author?.username}#${t?.message?.author?.discriminator}`}`,avatar:t?.message?.author?.avatar,bot:t?.message?.author?.bot},content:r?.content,edited:t?.message?.content,where:{channel:t?.channelId||t?.message?.channel_id||r?.channel_id,guild:E,messageLink:t?.message?.id}}),n}return n})}const Rt=u.findByProps("startEditMessage");function mt(){return I.before("startEditMessage",Rt,function(a){let n=s.storage?.inputs?.editedMessageBuffer||"`[ EDITED ]`";const t=ae(n),o=new RegExp(`(?:(?:\\s${t}(\\s\\(<t:\\d+:[tTdDfFR]>\\))?\\n{2})|(?:(?:\\s\\(<t:\\d+:[tTdDfFR]>\\) ${t}\\n{2})))`,"gm"),[r,i,m]=a,f=m.split(o);return a[2]=f[f.length-1],a})}const{DCDChatManager:pt}=e.ReactNative.NativeModules;function Et(a){return I.before("updateRows",pt,function(n){let t=JSON.parse(n[1]);const{textColor:o,backgroundColor:r,backgroundColorAlpha:i,gutterColor:m,gutterColorAlpha:f}=s.storage.colors,p=s.storage.inputs?.deletedMessageBuffer,{useBackgroundColor:l,minimalistic:d,removeDismissButton:h}=s.storage.switches;function E(c,b){c||(c=b);const w=c?.trim();if(w.startsWith("#")){const L=w.slice(1);if(/^[0-9A-Fa-f]{6}$/.test(L))return"#"+L.toUpperCase()}else if(/^[0-9A-Fa-f]{6}$/.test(w))return"#"+w.toUpperCase();return b||"#000"}function R(c,b){const w=b?.toString(),L=["text","heading","s","u","em","strong","list","blockQuote"];if(Array.isArray(c))return c.map(function(D){return R(D,w)});if(typeof c=="object"&&c!==null){const{content:D,type:P,target:A,items:T}=c;if(!L.includes(P))return c;if(P==="text"&&D&&D.length>=1)return{content:[{content:D,type:"text"}],target:"usernameOnClick",type:"link",context:{username:1,medium:!0,usernameOnClick:{action:"0",userId:"0",linkColor:e.ReactNative.processColor(w),messageChannelId:"0"}}};const O=R(D,w),nt=T?T.map(R,w):void 0;if(O!==D||nt!==T||!L.includes(P)){const j={...c,content:O};return P==="blockQuote"&&A&&(j.content=O,j.target=A),P==="list"&&j?.content&&delete j.content,T&&(j.items=nt),j}}return c}function S(c,b,w){return c&&c.content[0].content.splice(1),c}return t.forEach(function(c){if(s.storage.debug&&console.log(c),c?.type==1&&a[c?.message?.id]){if((p?.length>0||p!="")&&(c.message.edited=p),d==!1){const b=E(o,"#E40303"),w=R(c?.message?.content,b);c.message.content=w}if(h&&c?.message?.ephemeralIndication&&(c.message.ephemeralIndication=S(c.message.ephemeralIndication)),d==!1&&l==!0){const b=E(`${r}`,"#FF2C2F"),w=E(`${m}`,"#FF2C2F");c.backgroundHighlight??(c.backgroundHighlight={}),c.backgroundHighlight={backgroundColor:e.ReactNative.processColor(`${b}${i}`),gutterColor:e.ReactNative.processColor(`${w}${f}`)}}}}),n[1]=JSON.stringify(t),n[1]})}const bt=u.findByProps("updateMessageRecord","createMessageRecord");function yt(){return I.after("createMessageRecord",bt,function(a,n){let[t]=a;n.was_deleted=t.was_deleted})}const wt=u.findByName("MessageRecord",!1);function St(){return I.after("default",wt,function(a,n){let[t]=a;n.was_deleted=!!t.was_deleted})}const Ie=u.findByProps("updateMessageRecord","createMessageRecord");function Ct(){return I.instead("updateMessageRecord",Ie,function(a,n){let[t,o]=a;return o.was_deleted?Ie.createMessageRecord(o,t.reactions):n.apply(this,[t,o])})}const{FormSection:At}=C.Forms,It=u.findByName("getScreens"),_t=u.findByName("UserSettingsOverviewWrapper",!1),Tt=e.stylesheet.createThemedStyleSheet({container:{flex:1,backgroundColor:y.semanticColors.BACKGROUND_MOBILE_PRIMARY}});function Dt(a,n){n||(n=e.NavigationNative.useNavigation()),e.React.useEffect(function(){n.setOptions(a)},[n])}function _e(a,n,t){const o=[],r=I.after("default",_t,function(i,m){r();const f=K.findInReactTree(m.props.children,function(p){return p.type&&p.type.name==="UserSettingsOverview"});o.push(I.after("render",f.type.prototype,function(p,l){let{props:{children:d}}=l;const h=[e.i18n.Messages.BILLING_SETTINGS,e.i18n.Messages.PREMIUM_SETTINGS];d=K.findInReactTree(d,function(R){return R.children[1].type===At}).children;const E=d.findIndex(function(R){return h.includes(R?.props.label)});a()&&d.splice(E===-1?4:E,0,n({}))}))},!0);if(o.push(r),It&&t){const i=`BUNNY_PLUGIN_${e.lodash.snakeCase(t.key).toUpperCase()}`,m=t.page.render,f=e.React.memo(function(h){let{navigation:E}=h;return Dt(K.without(t.page,"noErrorBoundary","render"),E),e.React.createElement(e.ReactNative.View,{style:Tt.container},t.page.noErrorBoundary?e.React.createElement(m,null):e.React.createElement(C.ErrorBoundary,null,e.React.createElement(m,null)))}),p={[i]:{type:"route",title:function(){return t.title},usePredicate:a,icon:t.icon,parent:null,screen:{route:`BunnyPlugin${e.lodash.chain(t.key).camelCase().upperFirst().value()}`,getComponent:function(){return f}}}},l=function(h,E){const R=[...h],S=E?R?.[0]?.sections:R;if(!Array.isArray(S))return S;const c="Bunny",b=S.find(function(w){return w?.title===c||w?.label===c});return b&&!b?.settings?.includes(i)&&b.settings.push(i),R},d=function(){const h=u.findByProps("useOverviewSettings"),E=u.findByProps("getSettingTitleConfig"),R=u.findByProps("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),S="getSettingSearchListItems",c="getSettingListItems",b=u.findByProps(S),w=b?S:c,L=b??u.findByProps(c);if(!L||!h)return!1;o.push(I.after("useOverviewSettings",h,function(A,T){return l(T)})),o.push(I.after("getSettingTitleConfig",E,function(A,T){return{...T,[i]:t.title}})),o.push(I.after(w,L,function(A,T){let[O]=A;return[...O.includes(i)?[{type:"setting_search_result",ancestorRendererData:p[i],setting:i,title:function(){return t.title},breadcrumbs:["Bunny","Nexpid"],icon:p[i].icon}]:[],...T]}));const D=R.SETTING_RELATIONSHIPS,P=R.SETTING_RENDERER_CONFIGS;return R.SETTING_RELATIONSHIPS={...D,[i]:null},R.SETTING_RENDERER_CONFIGS={...P,...p},o.push(function(){R.SETTING_RELATIONSHIPS=D,R.SETTING_RENDERER_CONFIGS=D}),!0};(function(){const h=u.findByProps("SearchableSettingsList"),E=u.findByProps("SETTING_RENDERER_CONFIG"),R=u.findByProps("getSettingListItems");if(!R||!h||!E)return!1;o.push(I.before("type",h.SearchableSettingsList,function(c){return l(c,!0)})),o.push(I.after("getSettingListSearchResultItems",R,function(c,b){for(const w of b)w.setting===i&&(w.breadcrumbs=["Bunny","Nexpid"])}));const S=E.SETTING_RENDERER_CONFIG;return E.SETTING_RENDERER_CONFIG={...S,...p},o.push(function(){E.SETTING_RENDERER_CONFIG=S}),!0})()||d()}return function(){return o.forEach(function(i){return i()})}}const{View:Ft,FormRow:Nt,FormIcon:Lt,FormSwitch:Bt,FormDivider:$t}=B,Te=[{id:"enableMD",default:!0,label:"Toggle Message Delete",subLabel:"Logs deleted message"},{id:"enableMU",default:!0,label:"Toggle Message Update",subLabel:"Logs edited message"},{id:"enableLogging",default:!1,label:"Toggle Antied Logging",subLabel:"Save Logs to plugin's storage"},{id:"logWarning",default:!1,label:"Toggle Exceeding Log Limit Warning",subLabel:"Warn if log limit exceed"}];function Pt(a){let{styles:n}=a;return F.useProxy(s.storage),React.createElement(React.Fragment,null,React.createElement(Ft,{style:[n.subText]},Te?.map(function(t,o){return React.createElement(React.Fragment,null,React.createElement(Nt,{label:t?.label,subLabel:t?.subLabel,leading:t?.icon&&React.createElement(Lt,{style:{opacity:1},source:g.getAssetIDByName(t?.icon)}),trailing:"id"in t?React.createElement(Bt,{value:s.storage?.switches[t?.id]??t?.default,onValueChange:function(r){return s.storage.switches[t?.id]=r}}):void 0}),o!==Te?.length-1&&React.createElement($t,null))})))}const{View:xt,FormInput:vt,FormDivider:Mt}=B,De=[{id:"deletedMessageBuffer",title:"Customize Deleted Message",type:"default",placeholder:"This message is deleted"},{id:"editedMessageBuffer",title:"Customize Edited Separator",type:"default",placeholder:"`[ EDITED ]`"},{id:"historyToast",title:"Customize Remove History Toast Message",type:"default",placeholder:"History Removed"},{id:"logLength",title:"Customize Log message length",type:"numeric",placeholder:"60"},{id:"logCount",title:"Customize Log Limit",type:"numeric",placeholder:"1000"}];function kt(a){let{styles:n}=a;return F.useProxy(s.storage),React.createElement(React.Fragment,null,React.createElement(xt,{style:[n.subText]},De?.map(function(t,o){return React.createElement(React.Fragment,null,React.createElement(vt,{title:t?.title,keyboardType:t?.type,placeholder:t?.placeholder?.toString(),value:s.storage?.inputs[t.id]??t?.placeholder,onChange:function(r){return s.storage.inputs[t.id]=r.toString()}}),o!==De.length-1&&React.createElement(Mt,null))})))}const Fe=u.findByProps("show","confirm","close");u.findByName("StaticSearchBarContainer"),u.findByStoreName("UserStore");const Ut=u.findByProps("showUserProfile"),Ot=u.findByName("useIsFocused"),{openURL:Vt}=u.findByProps("openURL","openDeeplink"),{ScrollView:zt,View:v,Text:Q,TouchableOpacity:re,TextInput:sn,Image:Gt,Animated:q}=C.General,{FormLabel:on,FormIcon:ln,FormArrow:cn,FormRow:k,FormSwitch:un,FormSwitchRow:dn,FormSection:gn,FormDivider:fn,FormInput:hn}=C.Forms,{FlatList:Ht}=e.ReactNative,_=e.stylesheet.createThemedStyleSheet({main_text:{opacity:.975,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL},item_container:{display:"flex",flexDirection:"row",alignItems:"center",paddingTop:4,paddingBottom:4,width:"100%"},log_header:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",maxWidth:"95%"},log_sub_header:{display:"flex",flexDirection:"row",alignItems:"center",maxWidth:"50%"},log_time:{color:y.semanticColors.TEXT_MUTED,opacity:.99,fontSize:13,paddingLeft:4},log_type:{color:y.semanticColors.TEXT_MUTED,opacity:.45,fontSize:16,marginLeft:"auto"},avatar_container:{alignSelf:"start",justifySelf:"start",marginTop:5},author_avatar:{width:40,height:40,borderRadius:80},author_name:{color:y.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:14,letterSpacing:.25,paddingBottom:4},old_message:{color:y.semanticColors.TEXT_MUTED,opacity:.89,fontSize:13},message_content:{color:y.semanticColors.TEXT_NORMAL,opacity:.985,fontSize:13},main_container:{paddingLeft:8,paddingRight:4,paddingTop:2,paddingBottom:16,width:"95%"},text_container:{display:"flex",flexDirection:"column",paddingBottom:4,paddingLeft:8,width:"95%"}});function se(a,n){return a?.length>n?a?.substring(0,n)+"...":a}function oe(){F.useProxy(s.storage),Ot();const a=e.React.useRef(new q.Value(1)).current,n=function(){return q.spring(a,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},t=function(){return q.spring(a,{toValue:1,duration:250,useNativeDriver:!0}).start()},o={transform:[{scale:a}]},[r,i]=e.React.useState([]);e.React.useEffect(function(){s.storage?.log?.length>0&&i(s.storage.log.reverse())},[]),r?.length>s.storage?.inputs?.logCount&&s.storage.logWarning&&Fe.show({title:"Log exceed limit",body:"Clear log?",confirmText:"Yes",cancelText:"NO",confirmColor:"brand",onConfirm:function(){s.storage.log=[],i([]),$.showToast("[ANTIED] Cleared the log")}});const m=Number(s.storage?.inputs?.logLength||60);function f(p){let{data:l}=p;const{type:d,author:h,content:E,edited:R,where:S}=l;return e.React.createElement(e.React.Fragment,null,e.React.createElement(v,{style:_.item_container},e.React.createElement(re,{style:_.avatar_container,onPress:function(){return Ut.showUserProfile({userId:h.id})},onPressIn:n,onPressOut:t},e.React.createElement(q.View,{style:[o]},e.React.createElement(Gt,{source:{uri:h.avatar?`https://cdn.discordapp.com/avatars/${h?.id}/${h.avatar}.png`:"https://cdn.discordapp.com/embed/avatars/2.png"},style:_.author_avatar}))),e.React.createElement(v,{style:_.text_container},e.React.createElement(v,{style:_.log_header},e.React.createElement(v,{style:_.log_sub_header},e.React.createElement(Q,{style:[_.main_text,_.author_name]},`${h.username}`),e.React.createElement(v,{style:{paddingLeft:"2px"}},d=="MessageUpdate"?e.React.createElement(k.Icon,{source:g.getAssetIDByName("pencil")}):e.React.createElement(k.Icon,{source:g.getAssetIDByName("ic_message_delete")})),e.React.createElement(re,{onPress:function(){d=="MessageUpdate"&&l.where.guild&&l.where.channel&&l.where.messageLink?Vt(`https://discord.com/channels/${l.where.guild}/${l.where.channel}/${l.where.messageLink}`):$.showToast("Cannot find target Message")}},e.React.createElement(v,{style:{paddingLeft:"2px"}},e.React.createElement(k.Icon,{source:g.getAssetIDByName("ic_show_media")}))))),e.React.createElement(re,{onPress:function(){let c=h.username;c+=` (${h.id}):
`,c+=`>>> ${E}`,R&&(c+=`

${R}`),e.clipboard.setString(c),$.showToast("Log content copied")},style:_.text_container},e.React.createElement(v,null,R?.length>0?e.React.createElement(e.React.Fragment,null,e.React.createElement(Q,{style:[_.main_text,_.old_message]},se(E,m)),e.React.createElement(Q,{style:[_.main_text,_.message_content]},se(R,m))):e.React.createElement(Q,{style:_.message_content},se(E,m)))))))}return e.React.createElement(e.React.Fragment,null,e.React.createElement(zt,null,!s.storage?.switches?.enableLogging&&e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{label:"To save log of edited/deleted messages, go to plugin setting > patches > Toggle Antied Logging"})),r?.length>0?e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{label:"Nuke logs",trailing:e.React.createElement(k.Icon,{source:g.getAssetIDByName("ic_trash_24px")}),onPress:function(){Fe.show({title:"Nuke logs",body:"Nuke the Log?",confirmText:"Yash",cancelText:"nu uh",confirmColor:"brand",onConfirm:function(){s.storage.log=[],i([]),$.showToast("[ANTIED] Logs cleared")}})}})):e.React.createElement(e.React.Fragment,null,e.React.createElement(k,{label:"Only us chicken here, go touch some grass"})),r.length>0&&e.React.createElement(e.React.Fragment,null,e.React.createElement(v,{style:_.main_container},e.React.createElement(Ht,{style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20,paddingHorizontal:5},data:r,renderItem:function(p){let{item:l}=p;return e.React.createElement(f,{data:l})}})))))}const Yt=u.findByProps("show","confirm","close"),{FormRow:G}=B;function jt(){F.useProxy(s.storage);const a=e.NavigationNative.useNavigation();return React.createElement(React.Fragment,null,React.createElement(G,{label:"Anti Edit & Delete Logs",leading:React.createElement(G.Icon,{source:g.getAssetIDByName("ic_audit_log_24px")}),trailing:G.Arrow,onPress:function(){return a.push("VendettaCustomPage",{title:"Antied Logging Page",render:function(){return React.createElement(oe,null)}})}}),s.storage?.log?.length>0&&React.createElement(React.Fragment,null,React.createElement(G,{label:"Clear Logs",leading:React.createElement(G.Icon,{source:g.getAssetIDByName("ic_trash_24px")}),trailing:G.Arrow,onPress:function(){Yt.show({title:"Clear logs",body:"This will erase saved logs, continue?",confirmText:"Yes",cancelText:"No",confirmColor:"brand",onConfirm:function(){s.storage.log=[],$.showToast("[ANTIED] Logs cleared")}})}})))}const{FormRow:Xt}=B,Wt=u.findByName("RowCheckmark");function ie(a){let{label:n,subLabel:t,selected:o,onPress:r}=a;return React.createElement(Xt,{label:n,subLabel:t,trailing:React.createElement(Wt,{selected:o}),onPress:r})}const Ne=[{type:"t",label:"Short Time",subLabel:"16:20"},{type:"T",label:"Long Time",subLabel:"16:20:30"},{type:"d",label:"Short Date",subLabel:"20/04/2021"},{type:"D",label:"Long Date",subLabel:"20 April 2021"},{type:"f",label:"Short Date/Time",subLabel:"20 April 2021 16:20"},{type:"F",label:"Long Date/Time",subLabel:"Tuesday, 20 April 2021 16:20"},{type:"R",label:"Relative Time",subLabel:"2 months ago"}],Le=[{label:"Before",subLabel:"Old Message (2 minutes ago) [Edited] New Message",key:"BEFORE"},{label:"After",subLabel:"Old Message [Edited] (2 minutes ago) New Message",key:"AFTER"}],{FormRow:Be,FormDivider:le}=B;function Jt(){return F.useProxy(s.storage),React.createElement(React.Fragment,null,React.createElement(Be,{label:"Timestamp Style"}),Ne.map(function(a,n){let{type:t,label:o,subLabel:r}=a;return React.createElement(React.Fragment,null,React.createElement(ie,{label:o,subLabel:`Example: ${r}`,selected:s.storage.switches.timestampStyle==t,onPress:function(){return s.storage.switches.timestampStyle=t}}),n!==Ne.length-1&&React.createElement(le,null))}),React.createElement(le,null),React.createElement(Be,{label:"Timestamp Position"}),Le.map(function(a,n){let{key:t,label:o,subLabel:r}=a;return React.createElement(React.Fragment,null,React.createElement(ie,{label:o,subLabel:`Example: ${r}`,selected:s.storage.misc?.timestampPos==t,onPress:function(){return s.storage.misc.timestampPos=t}}),n!==Le.length-1&&React.createElement(le,null))}))}const Kt=Object.keys(y.semanticColors).map(function(a){return`semanticColors.${a}`}),Qt=Object.keys(y.rawColors).map(function(a){return`rawColors.${a}`}),$e=[...Kt,...Qt],{FormRow:qt,FormDivider:Zt,ScrollView:ea}=B;function ta(){return F.useProxy(s.storage),React.createElement(React.Fragment,null,React.createElement(ea,null,React.createElement(qt,{label:"Choose Color"}),$e.map(function(a,n){return React.createElement(React.Fragment,null,React.createElement(ie,{label:a,selected:s.storage.colors.semRawColorPrefix==a,onPress:function(){return s.storage.colors.semRawColorPrefix=a}}),n!==$e.length-1&&React.createElement(Zt,null))})))}const aa=u.findByName("CustomColorPickerActionSheet"),{alphaToHex:ce,hexAlphaToPercent:Pe,toPercentage:X,toDecimal:xe,formatDecimal:ve}=dt,{View:W,FormRow:J,FormSwitch:na,FormSliderRow:Me,FormDivider:ra,Text:ke,TouchableOpacity:sa,Image:oa}=B,Ue=[{id:"textColor",label:"Deleted Message Text Color",subLabel:"Click to customize Deleted Message Text Color",defaultColor:"#E40303"},{id:"backgroundColor",label:"Deleted Message Background Color",subLabel:"Click to customize Background Color",defaultColor:"#FF2C2F"},{id:"gutterColor",label:"Deleted Message Background Gutter Color",subLabel:"Click to customize Background Gutter Color",defaultColor:"#FF2C2F"}];function ia(a){let{styles:n}=a;F.useProxy(s.storage);const[t,o]=e.React.useState(xe(Pe(s.storage?.colors?.backgroundColorAlpha)??100)),[r,i]=e.React.useState(xe(Pe(s.storage?.colors?.gutterColorAlpha)??100)),m=e.NavigationNative.useNavigation(),f=function(l){return ce(X(l))},p=function(l){if(!l)return null;const[d,h]=l.split(".");return d=="semanticColors"?y.semanticColors[h]:y.rawColors[h]};return e.React.createElement(e.React.Fragment,null,e.React.createElement(W,{style:[n.subText]},s.storage?.switches?.useSemRawColors&&e.React.createElement(e.React.Fragment,null,e.React.createElement(J,{label:"Semantic & Raw Colors",subLabel:"If you enabled [Use Semantic/Raw Color], you can pick the colors from here",leading:e.React.createElement(J.Icon,{source:g.getAssetIDByName("ic_audit_log_24px")}),trailing:J.Arrow,onPress:function(){return m.push("VendettaCustomPage",{title:"Semantic & Raw Colors",render:function(){return e.React.createElement(ta,null)}})}})),Ue?.map(function(l){const d=function(){return lt(aa,{color:ne?.toInt(s.storage.colors[l.id]||l?.defaultColor||"#000"),onSelect:function(h){const E=ne?.toHex(h);s.storage.colors[l.id]=E}})};return e.React.createElement(e.React.Fragment,null,e.React.createElement(J,{label:l?.label,subLabel:l?.subLabel||"Click to Update",onPress:d,trailing:e.React.createElement(sa,{onPress:d},e.React.createElement(oa,{source:{uri:ut},style:{width:32,height:32,borderRadius:10,backgroundColor:s.storage?.colors[l.id]||Ue.find(function(h){return h?.id==l?.id})?.defaultColor||"#000"}}))}))}),e.React.createElement(W,{style:n.container},e.React.createElement(J,{style:{justifyContent:"center",alignItems:"center"},label:`Preview Style: ${s.storage?.switches?.darkMode?"Dark":"Light"} Mode`,subLabel:"Click to Switch Mode",trailing:e.React.createElement(na,{value:s.storage?.switches?.darkMode??!0,onValueChange:function(l){return s.storage.switches.darkMode=l}})}),e.React.createElement(W,{style:[n.row,n.border,{overflow:"hidden",marginRight:10}]},e.React.createElement(W,{style:{width:"2%",backgroundColor:`${s.storage.colors.gutterColor}${f(r)}`}}),e.React.createElement(W,{style:{flex:1,backgroundColor:`${s.storage.switches.useSemRawColors&&p(s.storage?.colors?.semRawColorPrefix)||s.storage.colors.backgroundColor}${f(t)}`,justifyContent:"center",alignItems:"center"}},e.React.createElement(ke,{style:{fontSize:20,color:s.storage?.switches?.darkMode?"white":"black"}}," Low Effort Normal Example Message "),e.React.createElement(ke,{style:{fontSize:20,color:s.storage.colors.textColor||"#000000"}}," Low Effort Deleted Example Message "))),e.React.createElement(Me,{label:`Background Color Alpha: ${X(t)}%`,value:t,style:{width:"90%"},onValueChange:function(l){o(Number(ve(l))),s.storage.colors.backgroundColorAlpha=ce(X(l))}}),e.React.createElement(ra,null),e.React.createElement(Me,{label:`Background Gutter Alpha: ${X(r)}%`,value:r,style:{width:"90%"},onValueChange:function(l){i(Number(ve(l))),s.storage.colors.gutterColorAlpha=ce(X(l))}}))))}const{ScrollView:la,View:ue,Text:ca,TouchableOpacity:Oe,TextInput:Rn,Image:ua,Animated:Z}=C.General,{FormLabel:da,FormIcon:ga,FormArrow:mn,FormRow:de,FormSwitch:fa,FormSwitchRow:pn,FormSection:ha,FormDivider:Ra,FormInput:Ve}=C.Forms,ma=u.findByName("useIsFocused");u.findByProps("BottomSheetScrollView");const ze=u.findByStoreName("UserStore"),Ge=u.findByProps("showUserProfile");g.getAssetIDByName("ic_add_24px"),g.getAssetIDByName("ic_arrow"),g.getAssetIDByName("ic_minus_circle_24px"),g.getAssetIDByName("Check"),g.getAssetIDByName("Small");function He(a){return e.React.createElement(ga,{style:{opacity:1},source:g.getAssetIDByName(a)})}const U=e.stylesheet.createThemedStyleSheet({basicPad:{paddingRight:10,marginBottom:10,letterSpacing:.25},header:{color:y.semanticColors.HEADER_PRIMARY,fontFamily:e.constants.Fonts.DISPLAY_BOLD,fontSize:25,paddingLeft:"3%",letterSpacing:.25},sub:{color:y.semanticColors.TEXT_POSITIVE,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,paddingLeft:"4%",fontSize:18},flagsText:{color:y.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"4%",fontSize:16},container:{marginTop:25,marginLeft:"5%",marginBottom:-15,flexDirection:"row"},textContainer:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap",shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.2,shadowRadius:4.65,elevation:8},image:{width:75,height:75,borderRadius:10,shadowColor:"#000",shadowOffset:{width:1,height:4},shadowOpacity:.2,shadowRadius:4.65,elevation:8},mainText:{opacity:.975,letterSpacing:.25},subHeader:{color:y.semanticColors.HEADER_SECONDARY,fontSize:12.75}});function Ye(a){let{index:n}=a;F.useProxy(s.storage);let t=s.storage?.inputs?.ignoredUserList[n];const o=e.React.useRef(new Z.Value(1)).current,r=function(){return Z.spring(o,{toValue:1.1,duration:10,useNativeDriver:!0}).start()},i=function(){return Z.spring(o,{toValue:1,duration:250,useNativeDriver:!0}).start()},m={transform:[{scale:o}]};let f=ze.getUser(t?.id),p=Object.values(ze.getUsers());f||(f=p.find(function(d){return d?.username==t?.username})),f||(f=p.find(function(d){return d?.username?.toLowerCase()==t?.username?.toLowerCase()}));const l=e.NavigationNative.useNavigation();return ma(),e.React.createElement(e.React.Fragment,null,e.React.createElement(la,null,e.React.createElement(ue,{style:[U.basicPad,U.sub]},e.React.createElement(ha,{title:"User Setting",style:[U.header]},e.React.createElement(de,{label:"Find User Id or Username",leading:He("ic_search"),onPress:function(){f&&!t.username?.length?t.username=f.username:f&&!t.id?.length?t.id=f.id:$.showToast("Cannot find User Id/Username.")}}),e.React.createElement(Ve,{title:"User Username | Case Sensitive",placeholder:"Missing No",value:t?.username,onChange:function(d){return t.username=d}}),e.React.createElement(Ve,{title:"User Id",placeholder:"Missing No",value:t?.id,onChange:function(d){return t.id=d}}),e.React.createElement(de,{label:"User is webhook?",subLabel:"User is webhook or system, and not BOT or Normal User.",leading:He("ic_webhook_24px"),trailing:e.React.createElement(fa,{value:t?.isWebhook||!1,onValueChange:function(d){return t.isWebhook=d}})})),f&&e.React.createElement(ue,{style:[U.container,{paddingBottom:10}]},e.React.createElement(Oe,{onPress:function(){return Ge.showUserProfile?.({userId:f?.id})},onPressIn:r,onPressOut:i},e.React.createElement(Z.View,{style:m},e.React.createElement(ua,{source:{uri:f?.getAvatarURL?.()?.replace?.("webp","png")||"https://cdn.discordapp.com/embed/avatars/2.png"},style:{width:128,height:128,borderRadius:10}}))),e.React.createElement(ue,{style:U.textContainer},e.React.createElement(Oe,{onPress:function(){return Ge.showUserProfile({userId:f?.id})}},e.React.createElement(ca,{style:[U.mainText,U.header]},f?.username||t?.username||"No Name"))),e.React.createElement(Ra,null)),e.React.createElement(de,{label:e.React.createElement(da,{text:"Remove User from Ignore List",style:{color:y.rawColors.RED_400}}),onPress:function(){l.pop(),s.storage?.inputs?.ignoredUserList?.splice(n,1)}}))))}const{ScrollView:pa,View:Ea,Text:En,TouchableOpacity:ba,TextInput:ya}=C.General,{FormLabel:bn,FormIcon:wa,FormArrow:Sa,FormRow:ge,FormSwitch:yn,FormSwitchRow:wn,FormSection:Ca,FormDivider:Aa,FormInput:Sn}=C.Forms;function je(a,n){return e.React.createElement(wa,{style:{opacity:1},source:a})}const Ia=u.findByName("useIsFocused");u.findByProps("BottomSheetScrollView");const{getUser:_a}=u.findByProps("getUser"),Ta=g.getAssetIDByName("ic_add_24px");g.getAssetIDByName("ic_arrow"),g.getAssetIDByName("ic_minus_circle_24px"),g.getAssetIDByName("Check"),g.getAssetIDByName("Small");const Da=g.getAssetIDByName("ic_trash_24px"),H=e.stylesheet.createThemedStyleSheet({basicPad:{paddingRight:10,marginBottom:10,letterSpacing:.25},header:{color:y.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"3.5%",fontSize:24},sub:{color:y.semanticColors.TEXT_POSITIVE,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,paddingLeft:"4%",fontSize:18},flagsText:{color:y.semanticColors.HEADER_SECONDARY,fontFamily:e.constants.Fonts.PRIMARY_BOLD,paddingLeft:"4%",fontSize:16},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:y.semanticColors.TEXT_NORMAL},placeholder:{color:y.semanticColors.INPUT_PLACEHOLDER_TEXT}});function Fa(){F.useProxy(s.storage);let[a,n]=e.React.useState("");const t=e.NavigationNative.useNavigation();Ia();let o=s.storage?.inputs?.ignoredUserList??[];const r=function(){if(a){if(isNaN(parseInt(a)))o.push({id:void 0,username:a});else{let i=_a(a);if(i)o.push({id:i?.id,username:"",showUser:!1,isWebhook:!1});else return $.showToast("Invalid User Id")}n(""),t.push("VendettaCustomPage",{title:"Adding User to Ignore List",render:function(){return e.React.createElement(Ye,{index:o?.length-1})}})}};return e.React.createElement(e.React.Fragment,null,e.React.createElement(pa,{style:{flex:1}},e.React.createElement(Ca,{style:[H.header,H.basicPad]},e.React.createElement(Ea,{style:[H.header,H.sub]},o.length>0&&e.React.createElement(ge,{label:"Clear List",trailing:je(Da),onPress:function(){o.length!==0&&rt.showConfirmationAlert({title:"Hol up, wait a minute!",content:`This will removes in total ${o.length} users from ignore list.`,confirmText:"Ye",cancelText:"Nah",confirmColor:"brand",onConfirm:function(){s.storage.inputs.ignoredUserList=[]}})}}),o?.map(function(i,m){return e.React.createElement(e.React.Fragment,null,e.React.createElement(ge,{label:i?.username||i?.id||"No Data",trailing:e.React.createElement(Sa,null),onPress:function(){return t.push("VendettaCustomPage",{title:"Editing User",render:function(){return e.React.createElement(Ye,{index:m})}})}}),m!==o?.length-1&&e.React.createElement(Aa,null))}),e.React.createElement(ge,{label:e.React.createElement(ya,{value:a,onChangeText:n,placeholder:"User ID or Username",placeholderTextColor:H.placeholder.color,selectionColor:e.constants.Colors.PRIMARY_DARK_100,onSubmitEditing:r,returnKeyType:"done",style:H.input}),trailing:e.React.createElement(ba,{onPress:r},je(Ta))})))))}const{FormRow:Na,FormDivider:La,FormIcon:Xe,TouchableOpacity:Ba}=B;function $a(){F.useProxy(s.storage);const a=e.NavigationNative.useNavigation(),n=function(){a.push("VendettaCustomPage",{title:"List of Ignored Users",render:function(){return React.createElement(Fa,null)}})};return React.createElement(React.Fragment,null,React.createElement(Na,{label:"Add User to List",subLabel:"List of ignored users for the plugin",leading:React.createElement(Xe,{style:{opacity:1},source:g.getAssetIDByName("ic_members")}),onPress:n,trailing:React.createElement(Ba,{onPress:n},React.createElement(Xe,{style:{opacity:1},source:g.getAssetIDByName("ic_add_24px")}))}),React.createElement(La,null))}const{View:Pa,FormRow:xa,FormIcon:va,FormSwitch:Ma,FormDivider:ka}=B,We=[{id:"minimalistic",default:!0,label:"Minimalistic Settings",subLabel:"Removes all Styling (Enabled by Default)"},{id:"useBackgroundColor",default:!1,label:"Enable Background Color",subLabel:"Background Color for Deleted Message, similiar to Mention but Customizeable"},{id:"useSemRawColors",default:!1,label:"Use Semantic/Raw Color",subLabel:"Use Semantic/Raw Color instead of Custom Color for Background Color, doesn't applied to GutterColor"},{id:"ignoreBots",default:!1,label:"Ignore Bots",subLabel:"Ignore bot deleted messages."},{id:"removeDismissButton",default:!1,label:"Remove Dissmiss Message",subLabel:"Remove clickable Dismiss Message text from deleted ephemeral messages."},{id:"addTimestampForEdits",default:!1,label:"Add Edit Timestamp",subLabel:"Add Timestamp for edited messages."},{id:"useEphemeralForDeleted",default:!0,label:"Use Ephemeral for Deleted",subLabel:"When messages got deleted it'll use ephemeral instead of normal message (Enabled by Default)."}];function Ua(a){let{styles:n}=a;return F.useProxy(s.storage),React.createElement(React.Fragment,null,React.createElement(Pa,{style:[n.subText]},We?.map(function(t,o){return React.createElement(React.Fragment,null,React.createElement(xa,{label:t?.label,subLabel:t?.subLabel,leading:t?.icon&&React.createElement(va,{style:{opacity:1},source:g.getAssetIDByName(t?.icon)}),trailing:"id"in t?React.createElement(Ma,{value:s.storage?.switches[t?.id]??t?.default,onValueChange:function(r){return s.storage.switches[t?.id]=r}}):void 0}),o!==We?.length-1&&React.createElement(ka,null))})))}function M(){for(var a=arguments.length,n=new Array(a),t=0;t<a;t++)n[t]=arguments[t];return[...n]}var fe=[z("1.2.0",M("Added Update Section")),z("1.2.1",null,M("Redesign Setting Page")),z("1.2.2",M("Added Support for Semantic Colors","Added Support for Raw Colors","Added Support for Timestamp Format"),M("Reworked how Message update appends separator")),z("1.2.3",null,null,M("Fixed Remove Edit button to not persist under Edit Message Button")),z("1.2.4",null,M("Update Remove Edit button style"),M("Fixed Message Parser Fails to parse edited message")),z("1.2.5",M("Added option useEphemeralForDeleted modification in Customize Section","Added new button on actionMessage if useEphemeralForDeleted disabled"))].reverse();const{ScrollView:An,View:Je,Text:In,TouchableOpacity:_n,TextInput:Tn,Image:Dn,Animated:Fn}=C.General,{FormLabel:Nn,FormIcon:Oa,FormArrow:Ln,FormRow:he,FormSwitch:Bn,FormSwitchRow:$n,FormSection:Pn,FormDivider:Va,FormInput:xn}=C.Forms,za=g.getAssetIDByName("ic_radio_square_checked_24px"),Ga=g.getAssetIDByName("ic_radio_square_24px"),Ha=g.getAssetIDByName("ic_information_24px");g.getAssetIDByName("ic_info");const Ya=g.getAssetIDByName("premium_sparkles"),ja=g.getAssetIDByName("ic_sync_24px"),Xa=g.getAssetIDByName("ic_progress_wrench_24px"),Y=e.stylesheet.createThemedStyleSheet({border:{borderRadius:10},textBody:{color:y.semanticColors.TEXT_NORMAL,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,letterSpacing:.25,fontSize:22},textBody:{color:y.semanticColors.INPUT_PLACEHOLDER_TEXT,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,letterSpacing:.25,fontSize:16},versionBG:{margin:10,padding:15,backgroundColor:"rgba(55, 149, 225, 0.3)"},rowLabel:{margin:10,padding:15,backgroundColor:"rgba(33, 219, 222, 0.34)"}});function ee(a){return e.React.createElement(Oa,{style:{opacity:1},source:a})}function Wa(a){let{change:n,index:t,totalIndex:o}=a;const[r,i]=e.React.useState(!1);e.React.useState(!1);function m(f,p,l,d){return e.React.createElement(Je,null,e.React.createElement(he,{label:p||"No Section",subLabel:l||null,leading:d&&ee(d),style:[Y.textHeader]}),f.map(function(h,E){return e.React.createElement(e.React.Fragment,null,e.React.createElement(he,{label:h,style:[Y.textBody,Y.rowLabel,Y.border]}))}))}return e.React.createElement(e.React.Fragment,null,e.React.createElement(C.ErrorBoundary,null,e.React.createElement(he,{label:n?.version,leading:t==0?ee(za):ee(Ga),trailing:ee(Ha),onPress:function(){i(!r)}}),r&&e.React.createElement(Je,{style:[Y.versionBG,Y.border]},n?.new?.length>0&&m(n.new,"New","New stuffies",Ya),n?.updated?.length>0&&m(n.updated,"Changes","Update things",ja),n?.fix?.length>0&&m(n.fix,"Fixes","Me hate borken things",Xa)),t==o.length-1?void 0:e.React.createElement(Va,null)))}const{FormSwitch:Ke,FormSection:Qe,FormRow:qe,ScrollView:Ja,View:Re,FormDivider:Ze,Animated:me}=B,Ka=u.findByName("LinearGradient"),N=e.stylesheet.createThemedStyleSheet({text:{color:y.semanticColors.HEADER_SECONDARY,paddingLeft:"5.5%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.PRIMARY_BOLD,fontSize:16},subText:{color:y.semanticColors.TEXT_POSITIVE,paddingLeft:"6%",paddingRight:10,marginBottom:10,letterSpacing:.25,fontFamily:e.constants.Fonts.DISPLAY_NORMAL,fontSize:12},input:{fontSize:16,fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,color:y.semanticColors.TEXT_NORMAL},placeholder:{color:y.semanticColors.INPUT_PLACEHOLDER_TEXT},container:{flex:1,justifyContent:"center",alignItems:"center"},colorPreview:{width:"75%",height:100,marginBottom:20},row:{flexDirection:"row",height:80,width:"90%",marginBottom:20},border:{borderRadius:12},lnBorder:{borderRadius:12,overflow:"hidden"},shadowTemplate:{shadowOffset:{width:1,height:3},shadowOpacity:.9,shadowRadius:24,elevation:16},lnShadow:{flex:1,margin:"1%",shadowColor:"#b8ff34"},darkMask:{backgroundColor:"rgba(10, 10, 10, 0.9)",margin:2,padding:"3%"},padBot:{paddingBottom:20}});function pe(){F.useProxy(s.storage);const[a]=e.React.useState(new me.Value(0));e.React.useEffect(function(){me.loop(me.timing(a,{toValue:4,duration:8e3,useNativeDriver:!0})).start()},[]);const n={backgroundColor:a.interpolate({inputRange:[0,1,2,3,4],outputRange:["rgba(188,31,31,0.5)","rgba(46,168,30,0.5)","rgba(48,179,173,0.5)","rgba(183,40,198,0.5)","rgba(188,31,31,0.5)"]})},t=function(r,i,m,f,p,l){return{id:r,title:i,label:m,subLabel:f,props:p,propsData:l}},o=[t("patches","Plugin Patcher","Show Patches","Toggle what the plugin patch",Pt,N),t("customize","Customization","Customize",null,Ua,N),t("logging","Logging","Toggle Logger",null,jt,null),t("text","Text Variables","Customize Texts",null,kt,N),t("timestamp","Timestamp","Timestamp Styles",null,Jt,N),t("colorpick","Colors","Customize Colors",null,ia,N),t("ingorelist","Ignore List","Show IngoreList",null,$a,null)];return e.React.createElement(e.React.Fragment,null,e.React.createElement(Ja,null,e.React.createElement(Ka,{start:{x:.8,y:0},end:{x:0,y:.8},colors:["#b8ff34","#4bff61","#44f6ff","#4dafff","#413dff","#d63efd"],style:[N.lnBorder,N.shadowTemplate,N.lnShadow,N.padBot]},e.React.createElement(Re,{style:[N.lnBorder,n,N.darkMask]},o.map(function(r){return e.React.createElement(e.React.Fragment,null,e.React.createElement(Qe,{title:r?.title},e.React.createElement(qe,{label:r?.label,subLabel:r?.subLabel,trailing:e.React.createElement(Ke,{value:s.storage.setting[r?.id],onValueChange:function(i){s.storage.setting[r?.id]=i}})}),s.storage.setting[r.id]&&r.props&&e.React.createElement(Re,{style:{margin:5,padding:10,borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.15)"}},e.React.createElement(r.props,{styles:r.propsData}))))}),e.React.createElement(Ze,null),e.React.createElement(qe,{label:"Debug",subLabel:"Enable console logging",style:[N.padBot],trailing:e.React.createElement(Ke,{value:s.storage.debug,onValueChange:function(r){s.storage.debug=r}})}),e.React.createElement(Ze,null),fe&&e.React.createElement(Qe,{title:"Updates"},e.React.createElement(Re,{style:{margin:5,padding:5,borderRadius:10,backgroundColor:"rgba(59, 30, 55, 0.15)"}},fe.map(function(r,i){return e.React.createElement(Wa,{change:r,index:i,totalIndex:fe.length})})))))))}const{FormRow:Ee}=C.Forms;function Qa(){const a=e.NavigationNative.useNavigation(),n=function(o){return o.replace(/\s?v\d+.\d+.\w+/,"")},t=x.plugin?.manifest?.name?`${n(x.plugin.manifest.name)} Settings`:"Anti Edit & Delete Settings";return React.createElement(C.ErrorBoundary,null,React.createElement(Ee,{label:t,leading:React.createElement(Ee.Icon,{source:g.getAssetIDByName("ic_edit_24px")}),trailing:Ee.Arrow,onPress:function(){return a.push("VendettaCustomPage",{title:t,render:pe})}}))}const{FormRow:be}=C.Forms;function qa(){const a=e.NavigationNative.useNavigation(),n=function(o){return o.replace(/\s?v\d+.\d+.\w+/,"")},t=x.plugin?.manifest?.name?`${n(x.plugin.manifest.name)} Logs`:"Anti Edit & Delete Logs";return React.createElement(C.ErrorBoundary,null,React.createElement(be,{label:t,leading:React.createElement(be.Icon,{source:g.getAssetIDByName("ic_audit_log_24px")}),trailing:be.Arrow,onPress:function(){return a.push("VendettaCustomPage",{title:t,render:oe})}}))}function Za(){const a=[],n=function(i){return i.replace(/\s?v\d+.\d+.\w+/,"")},t=x.plugin?.manifest?.name,o=t?`${n(t)} Settings`:"Anti Edit & Delete Settings",r=t?`${n(t)} Logs`:"Anti Edit & Delete Logs";return a.push(_e(function(){return!0},function(){return React.createElement(Qa,null)},{key:"antied_setting",icon:g.getAssetIDByName("ic_edit_24px"),title:o,page:{title:o,render:pe}}),_e(function(){return!0},function(){return React.createElement(qa,null)},{key:"antied_logs",icon:g.getAssetIDByName("ic_message_delete"),title:r,page:{title:r,render:oe}})),function(){return a.forEach(function(i){return i()})}}const ye=u.findByProps("openLazy","hideActionSheet"),en=u.findByProps("getMessage","getMessages"),et=u.findByProps("getChannel","getDMFromUserId"),{ActionSheetRow:te}=u.findByProps("ActionSheetRow");function tn(a){return I.before("openLazy",ye,function(n){let[t,o,r]=n;const i=r?.message;o!=="MessageLongPressActionSheet"||!i||t.then(function(m){const f=I.after("default",m,function(p,l){e.React.useEffect(function(){return function(){f()}},[]),s.storage.debug&&console.log("[ANTIED ActionSheet]",i);const d=K.findInReactTree(l,function(S){return S?.find?.(function(c){return c?.props?.label==e.i18n?.Messages?.MESSAGE_ACTION_REPLY})});if(!d)return l;const h=Math.max(d.findIndex(function(S){return S?.props?.label==e.i18n?.Messages?.MESSAGE_ACTION_REPLY}),d.length-1),E=en.getMessage(i.channel_id,i?.id),R=ae(s.storage?.inputs?.editedMessageBuffer||"`[ EDITED ]`");if(new RegExp(R,"gmi").test(i.content)){const S=h||1;d.splice(S,0,e.React.createElement(te,{label:"Remove Edit History",subLabel:`Added by ${we(x.plugin?.manifest?.name)||"ANTIED"}`,icon:e.React.createElement(te.Icon,{source:g.getAssetIDByName("ic_edit_24px")}),onPress:function(){let c=s.storage?.inputs?.editedMessageBuffer||"`[ EDITED ]`";const b=ae(c),w=new RegExp(`(?:(?:\\s${b}(\\s\\(<t:\\d+:[tTdDfFR]>\\))?\\n{2})|(?:(?:\\s\\(<t:\\d+:[tTdDfFR]>\\) ${b}\\n{2})))`,"gm"),L=i?.content?.split(w);s.storage.debug&&console.log([[c],i?.content?.split(w),L]);const D=L[L.length-1],P=i?.embeds?.map(function(A){const T=A?.color?.replace(/.+\(/,"")?.replace(/%/g,"")?.replace(")","")?.split(", "),O=e.ReactNative.processColor(`${ct(ne.HSLtoHEX(T[0],T[1],T[2]),T[3])}`);return{...A,author:A.author,title:A.rawTitle,description:A.rawDescription,url:A.url,type:A.type,image:A.image,thumbnail:A.thumbnail,color:O,content_scan_version:1}});e.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...i,content:`${D}`,embeds:P??[],attachments:i.attachments??[],mentions:i.mentions??[],guild_id:et.getChannel(E.channel_id).guild_id},otherPluginBypass:!0}),ye.hideActionSheet(),(s.storage?.inputs?.historyToast?.length>0||s.storage?.inputs?.historyToast!="")&&$.showToast(`[ANTI ED] ${s.storage?.inputs?.historyToast}`,g.getAssetIDByName("ic_edit_24px"))}}))}if(s.storage.debug&&console.log("[ANTIED ActionSheet]","useEphemeralForDeleted",!s.storage?.switches?.useEphemeralForDeleted,"msgExist?",!!a[i.id]),!s.storage?.switches?.useEphemeralForDeleted&&a[i.id]){const S=h||1;d.splice(S,0,e.React.createElement(te,{label:"Remove Deleted Message",subLabel:`Added by ${we(x.plugin?.manifest?.name)||"ANTIED"}`,isDestructive:!0,icon:e.React.createElement(te.Icon,{source:g.getAssetIDByName("ic_edit_24px")}),onPress:function(){e.FluxDispatcher.dispatch({type:"MESSAGE_DELETE",guildId:et.getChannel(E.channel_id).guild_id,id:i?.id,channelId:i?.channel_id,otherPluginBypass:!0}),ye.hideActionSheet(),(s.storage?.inputs?.historyToast?.length>0||s.storage?.inputs?.historyToast!="")&&$.showToast("[ANTIED] Message Removed",g.getAssetIDByName("ic_edit_24px"))}}))}})})})}const tt=u.findByProps("_channelMessages"),ae=function(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},we=function(a){return a.replace(/\s?v\d+.\d+.\w+/,"")},an=Object.keys(ot.all).map(function(a){return a?.name});Ce(s.storage,{setting:{colorpick:!1,customize:!1,ingorelist:!1,logging:!1,patches:!1,text:!1,timestamp:!1},switches:{customizeable:!1,enableMD:!0,enableMU:!0,enableLogging:!1,useBackgroundColor:!1,useSemRawColors:!1,ignoreBots:!1,minimalistic:!0,alwaysAdd:!1,darkMode:!0,removeDismissButton:!1,addTimestampForEdits:!1,timestampStyle:"R",useEphemeralForDeleted:!0},colors:{textColor:"#E40303",backgroundColor:"#FF2C2F",backgroundColorAlpha:"33",gutterColor:"#FF2C2F",gutterColorAlpha:"CC",semRawColorPrefix:"semanticColors.TEXT_BRAND"},inputs:{deletedMessageBuffer:"This message is deleted",editedMessageBuffer:"`[ EDITED ]`",historyToast:"History Removed",logLength:60,logCount:100,ignoredUserList:[]},misc:{timestampPos:"BEFORE",editHistoryIcon:"ic_edit_24px"},log:[],logWarning:!1,debug:!1});let Se={};const at=[];var nn={onLoad:function(){at.push(Za(),ht(Se),Et(Se),mt(),yt(),St(),Ct(),tn(Se))},onUnload:function(){for(const a of at)a();for(const a in tt._channelMessages)for(const n of tt._channelMessages[a]._array)n.was_deleted&&e.FluxDispatcher.dispatch({type:"MESSAGE_DELETE",id:n.id,channelId:n.channel_id,otherPluginBypass:!0})},settings:pe};return V.default=nn,V.regexEscaper=ae,V.stripVersions=we,V.vendettaUiAssets=an,Object.defineProperty(V,"__esModule",{value:!0}),V})({},vendetta,vendetta.metro,vendetta.ui.components,vendetta.patcher,vendetta.ui.assets,vendetta.utils,vendetta.metro.common,vendetta.plugin,vendetta.ui,vendetta.storage,vendetta.ui.toasts,vendetta.ui.alerts);
