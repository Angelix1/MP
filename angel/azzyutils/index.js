(function(R,r,_,c,L,M,a,q,u,A,Q,S,$e){"use strict";const{openLazy:ve,hideActionSheet:Ot}=c.findByProps("openLazy","hideActionSheet");function j(e,t){if(e!=null&&t!=null)for(const n of Object.keys(t))typeof t[n]=="object"&&!Array.isArray(t[n])?(typeof e[n]!="object"&&(e[n]={}),j(e[n],t[n])):e[n]??(e[n]=t[n])}function x(e,t){try{ve(new Promise(function(n){return n({default:e})}),"ActionSheet",t)}catch(n){L.logger.error(n.stack),showToast("Got error when opening ActionSheet! Please check debug logs")}}function k(e){const t=e>>16&255,n=e>>8&255,o=e&255;return`#${(1<<24|t<<16|n<<8|o).toString(16).slice(1)}`}function z(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{version:e,new:t,updated:n,fix:o}}const E={...M.General,...M.Forms},J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII=";function W(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#000";e||(e=t);const n=e?.trim();if(n.startsWith("#")){const o=n.slice(1);if(/^[0-9A-Fa-f]{6}$/.test(o))return"#"+o.toUpperCase()}else if(/^[0-9A-Fa-f]{6}$/.test(n))return"#"+n.toUpperCase();return t}const d={toPercentage:function(e){return e=Number(e),e===0?0:e===1?100:Math.round(e*100)},toDecimal:function(e){e=Number(e);const t=Math.min(Math.max(e,0),100);return t===0?0:t===100?1:t/100},formatDecimal:function(e){return e=Number(e),e===0||e===1?e:e.toFixed(2)},alphaToHex:function(e){e=Number(e);const t=Math.min(Math.max(e,0),100),n=Math.round(t/100*255).toString(16).toUpperCase();return n.length===1?"0"+n:n},hexAlphaToPercent:function(e){const t=parseInt(e,16);return isNaN(t)?0:Math.round(t/255*100)}};function Te(e){return Math.random()<e/100}const{ScrollView:Vt,View:K,Text:Gt,TouchableOpacity:Ht,TextInput:Yt,Image:Zt,Animated:qt}=M.General,{FormLabel:Qt,FormIcon:Be,FormArrow:jt,FormRow:O,FormSwitch:Jt,FormSwitchRow:Wt,FormSection:Kt,FormDivider:_e,FormInput:Xt}=M.Forms,De=u.getAssetIDByName("ic_radio_square_checked_24px"),Ne=u.getAssetIDByName("ic_radio_square_24px"),Pe=u.getAssetIDByName("ic_information_24px");u.getAssetIDByName("ic_info");const Ue=u.getAssetIDByName("premium_sparkles"),Le=u.getAssetIDByName("ic_sync_24px"),xe=u.getAssetIDByName("ic_progress_wrench_24px"),I=a.stylesheet.createThemedStyleSheet({border:{borderRadius:10},textBody:{color:q.semanticColors.TEXT_NORMAL,fontFamily:a.constants.Fonts.PRIMARY_MEDIUM,letterSpacing:.25,fontSize:22},textBody:{color:q.semanticColors.INPUT_PLACEHOLDER_TEXT,fontFamily:a.constants.Fonts.DISPLAY_NORMAL,letterSpacing:.25,fontSize:16},versionBG:{margin:10,padding:15,backgroundColor:"rgba(55, 149, 225, 0.3)"},rowLabel:{margin:10,padding:15,backgroundColor:"rgba(33, 219, 222, 0.34)"}});function D(e){return a.React.createElement(Be,{style:{opacity:1},source:e})}function ke(e){let{change:t,index:n,totalIndex:o}=e;const[l,p]=a.React.useState(!1);a.React.useState(!1);function g(m,f,i,b){return a.React.createElement(K,null,a.React.createElement(O,{label:f||"No Section",subLabel:i||null,leading:b&&D(b),style:[I.textHeader]}),m.map(function(y,s){return a.React.createElement(a.React.Fragment,null,a.React.createElement(O,{label:y,style:[I.textBody,I.rowLabel,I.border]}))}))}return a.React.createElement(a.React.Fragment,null,a.React.createElement(M.ErrorBoundary,null,a.React.createElement(O,{label:t?.version,leading:n==0?D(De):D(Ne),trailing:D(Pe),onPress:function(){p(!l)}}),l&&a.React.createElement(K,{style:[I.versionBG,I.border]},t?.new?.length>0&&g(t.new,"New","New stuffies",Ue),t?.updated?.length>0&&g(t.updated,"Changes","Update things",Le),t?.fix?.length>0&&g(t.fix,"Fixes","Me hate borken things",xe)),n==o.length-1?void 0:a.React.createElement(_e,null)))}function F(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return[...t]}var V=[z("1.0.0",F("Created the Plugin")),z("1.0.1 - 1.0.3",F("[1.0.1] Added Remove Decor","[1.0.1] Customization for reply alert","[1.0.1] Option to revert locally edited message (wipe on unload of the plugin)","[1.0.22] Setting for Quick Id","[1.0.22] Option to toggle Force alert","[1.0.22] Preview for ReplyAlert"),F("[1.0.2] Remove Custom Timestamp","[1.0.24] EML will wipe its log when onunload and revert every message its edit","[1.0.3] Update EML, QID buttons"),F("[1.0.21] Fix Cactus","[1.0.22] Fix No Share fails to find Share button","[1.0.23] Fix Quick ID removing edit message button","[1.0.3] Fixed EML button fails to append under Reply Button","[1.0.3] Fixed QID buttons fails to append to a correct place")),z("1.1.0",F("[1.1.0] Added Custom Username Color","[1.1.0] Added Custom Role Icon"),F("[1.1.0] Separated reply alert and custom mention to be their own thing"))].reverse();const{ScrollView:tn,View:G,Text:X,TouchableOpacity:ee,TextInput:nn,Image:te,Animated:an,FormLabel:rn,FormIcon:on,FormArrow:ln,FormRow:$,FormSwitch:ne,FormSwitchRow:sn,FormSection:cn,FormDivider:v,FormInput:un,FormRadioRow:dn,FormSliderRow:ae}=E,re=c.findByName("CustomColorPickerActionSheet");function ze(){_.useProxy(r.storage);const e=r.storage.utils.replyAlert;return a.React.createElement(a.React.Fragment,null,a.React.createElement($,{label:"Toggle Force Alert",subLabel:"When someone replying to your message with mention disabled, this option will force ping you",trailing:a.React.createElement(ne,{value:e?.useReplyAlert||!1,onValueChange:function(t){e.useReplyAlert=t}})}),a.React.createElement(v,null),a.React.createElement($,{label:"Ignore self Reply",subLabel:"When replying to own message, do not ping",trailing:a.React.createElement(ne,{value:e?.ignoreSelf||!1,onValueChange:function(t){e.ignoreSelf=t}})}))}function Oe(){_.useProxy(r.storage);const e=r.storage.utils.replyAlert,[t,n]=a.React.useState(d.toDecimal(d.hexAlphaToPercent(e.colorAlpha)||100)),[o,l]=a.React.useState(d.toDecimal(d.hexAlphaToPercent(e.gutterAlpha)||100)),p=function(){return x(re,{color:a.ReactNative.processColor(e?.customColor)||0,onSelect:function(m){const f=k(m);e.customColor=f,r.storage?.debug&&L.logger.log("Reply Alert BG Color","[Changed]",f)}})},g=function(){return x(re,{color:a.ReactNative.processColor(e?.customColor)||0,onSelect:function(m){const f=k(m);e.gutterColor=f,r.storage?.debug&&L.logger.log("Reply Alert Gutter Color","[Changed]",f)}})};return a.React.createElement(a.React.Fragment,null,a.React.createElement($,{label:"Preview",subLabel:"How it looks in the chat"}),a.React.createElement(G,{style:[{flexDirection:"row",height:80,width:"100%",overflow:"hidden",borderRadius:12,marginBottom:20,marginRight:10,marginLeft:10}]},a.React.createElement(G,{style:{width:"2%",backgroundColor:`${e?.gutterColor}${d.alphaToHex(d.toPercentage(o))}`}}),a.React.createElement(G,{style:{flex:1,backgroundColor:`${e?.customColor}${d.alphaToHex(d.toPercentage(t))}`,justifyContent:"center",alignItems:"center"}},a.React.createElement(X,{style:{fontSize:20,color:"#FFFFFF"}}," Example White Text "),a.React.createElement(X,{style:{fontSize:20,color:"#000000"}}," Example Black Text "))),a.React.createElement(v,null),a.React.createElement($,{label:"Background Color",subLabel:"Click to Update",onPress:p,trailing:a.React.createElement(ee,{onPress:p},a.React.createElement(te,{source:{uri:J},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.customColor||"#000"}}))}),a.React.createElement(v,null),a.React.createElement($,{label:"Gutter Color",subLabel:"Click to Update",onPress:g,trailing:a.React.createElement(ee,{onPress:g},a.React.createElement(te,{source:{uri:J},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.gutterColor||"#000"}}))}),a.React.createElement(v,null),a.React.createElement(ae,{label:`Background Color Alpha: ${d.toPercentage(t)}%`,value:t,style:{width:"90%"},onValueChange:function(m){n(Number(d.formatDecimal(m))),e.colorAlpha=d.alphaToHex(d.toPercentage(m))}}),a.React.createElement(v,null),a.React.createElement(ae,{label:`Gutter Color Alpha: ${d.toPercentage(o)}%`,value:o,style:{width:"90%"},onValueChange:function(m){l(Number(d.formatDecimal(m))),e.gutterAlpha=d.alphaToHex(d.toPercentage(m))}}))}const{FormRow:Ve,FormSwitch:Ge}=E;function He(){return React.createElement(React.Fragment,null,React.createElement(Ve,{label:"Bypass Antied Logging",trailing:React.createElement(Ge,{value:r.storage?.utils?.eml?.logEdit||!1,onValueChange:function(e){r.storage.utils.eml.logEdit=e}})}))}const{FormRow:Ye,FormSwitch:Ze}=E;function qe(){return React.createElement(React.Fragment,null,React.createElement(Ye,{label:"Add Save Image Button to Image ActionSheet",subLabel:"if Built-in Save Image gone",trailing:React.createElement(Ze,{value:r.storage?.utils?.noshare?.addSaveImage||!1,onValueChange:function(e){r.storage.utils.noshare.addSaveImage=e}})}))}const{FormInput:Qe}=E;function je(){return React.createElement(React.Fragment,null,React.createElement(Qe,{title:"Name",keyboardType:"default",placeholder:"Angel",value:r.storage?.utils?.cactus?.name,onChange:function(e){return r.storage.utils.cactus.name=e.toString()}}))}const{FormRow:Je,FormSwitch:We,FormDivider:oe}=E;function Ke(){_.useProxy(r.storage);const e=function(n,o,l){return{label:n,subLabel:o,key:l}},t=[e("Id","add Copy User Id","addID"),e("Mention","add Copy User Mention","addMention"),e("Id and Mention","add Copy User Id & Mention","addCombine")];return a.React.createElement(a.React.Fragment,null,t.map(function(n,o){return a.React.createElement(a.React.Fragment,null,a.React.createElement(Je,{label:n?.label||"Missing Label",subLabel:n?.subLabel,trailing:a.React.createElement(We,{value:r.storage?.utils?.quickid?.[n?.key]||!1,onValueChange:function(l){r.storage.utils.quickid[n.key]=l}})}),o!==t?.length-1&&a.React.createElement(oe,null))}),a.React.createElement(oe,null))}const Xe=c.findByName("CustomColorPickerActionSheet"),{FormRow:le,FormSwitch:et,TouchableOpacity:tt,Image:nt,FormDivider:se,FormIcon:at}=E,ie=[{id:"enableReply",label:"Patch reply",subLabel:"also replace username color in mentioned referenced message",icon:null,def:!1}];function rt(){const e=r.storage?.utils?.customUsernameColor,t=function(){return x(Xe,{color:a.ReactNative.processColor(e?.hex)||0,onSelect:function(n){const o=k(n);e.hex=o}})};return React.createElement(React.Fragment,null,React.createElement(le,{label:"Color",subLabel:"Click to Update",onPress:t,trailing:React.createElement(tt,{onPress:t},React.createElement(nt,{source:{uri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII="},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.hex||"#000000"}}))}),React.createElement(se,null),ie?.map(function(n,o){return React.createElement(React.Fragment,null,React.createElement(le,{label:n?.label,subLabel:n?.subLabel,leading:n?.icon&&React.createElement(at,{style:{opacity:1},source:u.getAssetIDByName(n?.icon)}),trailing:"id"in n?React.createElement(et,{value:r.storage?.utils?.customUsernameColor[n?.id]??n?.def,onValueChange:function(l){return r.storage.utils.customUsernameColor[n?.id]=l}}):void 0}),o!==ie?.length-1&&React.createElement(se,null))}))}const ce="https://cdn.discordapp.com/role-icons/1222207470714486825/bc3ef24c3f220155f90e55cc0cb0d0cf.png?size=512",{FormRow:ot,FormSwitch:gn,TouchableOpacity:fn,Image:lt,FormDivider:ue,FormIcon:hn,FormInput:st}=E,de=[{id:"name",label:"Role Icon Name",keyType:"default",placeholder:"BlobCatSip",def:"BlobCatSip"},{id:"source",label:"Role Icon Image Url",keyType:"default",placeholder:"https://cdn.discordapp.com/role-icons/1222207470714486825/bc3ef24c3f220155f90e55cc0cb0d0cf.png?size=512",def:ce},{id:"size",label:"Size of the Image",keyType:"number",placeholder:"18",def:18}];function it(){const e=r.storage?.utils?.customRoleIcon;return React.createElement(React.Fragment,null,React.createElement(ot,{label:"Icon Preview",trailing:React.createElement(lt,{source:{uri:ce},style:{width:128,height:128,borderRadius:10}})}),React.createElement(ue,null),de?.map(function(t,n){return React.createElement(React.Fragment,null,React.createElement(st,{title:t.label,keyboardType:t?.keyType,placeholder:t?.placeholder,value:e[t?.id]??t?.def,onChange:function(o){return e[t?.id]=o.toString()}}),n!==de?.length-1&&React.createElement(ue,null))}))}const{ScrollView:ct,View:N,Text:mn,TouchableOpacity:Rn,TextInput:pn,Image:bn,Animated:yn,FormLabel:An,FormIcon:En,FormArrow:Cn,FormRow:ge,FormSwitch:fe,FormSwitchRow:Sn,FormSection:he,FormDivider:me,FormInput:In,FormRadioRow:Fn,Component:wn}=E;function ut(){_.useProxy(r.storage);const e=function(n,o,l,p,g){return{id:n,title:o,label:l,subLabel:p,props:g}},t=[e("cactus","Cactus","Toggle uhhh.. something",null,je),e("eml","EML","Toggle Edit Message Locally",null,He),e("notype","No Type","Toggle No Typings",null,null),e("quickid","QID","Toggle Quick ID Setting",null,Ke),e("noshare","No Share","Toggle No Share",null,qe),e("customUsernameColor","CUC","Toggle Custom Username Color",null,rt),e("customRoleIcon","CRI","Toggle Custom Role Icon",null,it),e("ralert","Reply Alert","Toggle Settings",null,ze),e("customMention","Custom Mentions","Toggle Custom Mentions Settings",null,Oe),e("removeDecor","I HATE AVATAR DECORATIONS","Toggle Remove Avatar Decoration",null,null)];return React.createElement(React.Fragment,null,React.createElement(ct,null,React.createElement(N,{style:{borderRadius:10,backgroundColor:"rgba(0, 12, 46, 0.15)"}},React.createElement(ge,{label:"Debug",subLabel:"enable console logging",trailing:React.createElement(fe,{value:r.storage.debug,onValueChange:function(n){r.storage.debug=n}})}),React.createElement(me,null),t.map(function(n,o){return React.createElement(React.Fragment,null,React.createElement(he,{title:n?.title},React.createElement(ge,{label:n?.label,subLabel:n?.subLabel,trailing:React.createElement(fe,{value:r.storage.toggle[n?.id],onValueChange:function(l){r.storage.toggle[n?.id]=l}})}),r.storage.toggle[n.id]&&n.props&&React.createElement(N,{style:{margin:5,padding:10,borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.15)"}},React.createElement(n.props,null))))})),React.createElement(me,null),V&&React.createElement(N,{style:{paddingBottom:36}},React.createElement(he,{title:"Updates"},React.createElement(N,{style:{margin:5,padding:5,borderRadius:10,backgroundColor:"rgba(59, 30, 55, 0.15)"}},V.map(function(n,o){return React.createElement(ke,{change:n,index:o,totalIndex:V.length})}))))))}const dt=c.findByStoreName("UserStore");c.findByProps("getMessage","getMessages");const T=dt?.getCurrentUser?.()?.id;function gt(e){if(e.type=="MESSAGE_CREATE"){const t=e?.message?.referenced_message?.author?.id==T,n=e?.message?.mentions?.some(function(o){return o?.id===T});r.storage?.utils?.replyAlert?.useReplyAlert&&(t||n)&&(e?.message?.author?.id!=T?e.message.mentions.push({id:T}):r.storage?.utils?.replyAlert?.ignoreSelf==!1&&e.message.mentions.push({id:T}))}}function Re(e){const{gutterColor:t,customColor:n,gutterAlpha:o,colorAlpha:l}=r.storage?.utils?.replyAlert;if(r.storage?.toggle?.customMention&&e?.message?.mentioned){e.backgroundHighlight??(e.backgroundHighlight={});const p=W(n,"#DAFFFF"),g=W(t,"#121212");e.backgroundHighlight={backgroundColor:a.ReactNative.processColor(`${p}${l}`),gutterColor:a.ReactNative.processColor(`${g}${o}`)}}return e}function ft(){return A.before("dispatch",a.FluxDispatcher,function(e){let[t]=e;R.isEnabled&&gt(t)})}const pe=c.findByProps("getMessage","getMessages"),be=c.findByProps("getChannel","getDMFromUserId"),ht=c.findByProps("startEditMessage"),{ActionSheetRow:P}=c.findByProps("ActionSheetRow");let H=!1;function mt(e,t,n,o){if(t=="MessageLongPressActionSheet"&&r.storage?.toggle?.eml){const l=n?.message;if(!l)return;e.then(function(p){const g=A.after("default",p,function(m,f){a.React.useEffect(function(){return function(){g()}},[]);const i=Q.findInReactTree(f,function(s){return s?.find?.(function(C){return C?.props?.label==a.i18n?.Messages?.MESSAGE_ACTION_REPLY})});if(!i)return f;const b=Math.max(i.findIndex(function(s){return s?.props?.label==a.i18n?.Messages?.MESSAGE_ACTION_REPLY}),i.length-1),y=r.storage?.utils?.eml?.editedMsg?.find(function(s){return s.id==l?.id});y?i.splice(b,0,a.React.createElement(a.React.Fragment,null,a.React.createElement(P,{label:"Revert Locally Edited Message",subLabel:"Added by Azzy Util",icon:a.React.createElement(P.Icon,{source:u.getAssetIDByName("ic_edit_24px")}),onPress:function(){const s=pe.getMessage(l.channel_id,l.id);a.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...s,...l,content:y.content,edited_timestamp:s.editedTimestamp,mention_roles:s.mentionRoles,mention_everyone:s.mentionEveryone,guild_id:be.getChannel(s.channel_id||l.channel_id)?.guild_id},otherPluginBypass:!0}),r.storage.utils.eml.editedMsg=r.storage?.utils?.eml?.editedMsg?.filter(function(C){return C.id!=l.id}),o.hideActionSheet()}}))):i.splice(b,0,a.React.createElement(a.React.Fragment,null,a.React.createElement(P,{label:"Edit Message Locally",subLabel:"Added by Azzy Util",icon:a.React.createElement(P.Icon,{source:u.getAssetIDByName("ic_edit_24px")}),onPress:function(){ht.startEditMessage(`AZZYEML-${l.channel_id}`,l.id,l.content),o.hideActionSheet()}})))})})}}function Rt(e){return e[0]?.startsWith("AZZYEML-")?(e[0]=e[0].replaceAll("AZZYEML-",""),H=!0,e):(H=!1,e)}function pt(e){if(H){let[t,n,o]=e;const l=pe.getMessage(t,n);r.storage?.utils?.eml?.editedMsg.push(l),a.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...l,...o,edited_timestamp:l.editedTimestamp,mention_roles:l.mentionRoles,mention_everyone:l.mentionEveryone,member:l.author,guild_id:be.getChannel(l.channel_id||t)?.guild_id},otherPluginBypass:r.storage?.utils?.eml?.logEdit}),S.showToast("Message Edited",u.getAssetIDByName("ic_edit_24px"))}}const{ActionSheetRow:ye}=c.findByProps("ActionSheetRow");function bt(e,t,n,o){if(t=="MessageLongPressActionSheet"&&r.storage?.toggle?.quickid){const l=n?.message;if(!l)return;e.then(function(p){const g=A.after("default",p,function(m,f){a.React.useEffect(function(){return function(){g()}},[]);const i=Q.findInReactTree(f,function(h){return h?.find?.(function(w){return w?.props?.label==a.i18n?.Messages?.MENTION})});if(!i)return f;const b=Math.max(i.findIndex(function(h){return h?.props?.label==a.i18n?.Messages?.MENTION}),i.length-1);r.storage.debug&&(console.log(i),console.log("Position => "+b));function y(h,w,kt,zt){return{label:h,sub:w,icon:kt,callback:zt}}let s=[];const{addID:C,addMention:Z,addCombine:B}=r.storage?.utils?.quickid;C&&s.push(y("Copy User's Id","Result: <Some ID>","ic_copy_id",function(){o.hideActionSheet(),a.clipboard.setString(l?.author?.id??""),S.showToast("Copied User's ID to clipboard",u.getAssetIDByName("toast_copy_link"))})),Z&&s.push(y("Copy User's Mention","Result: <Mention>","ic_copy_id",function(){o.hideActionSheet(),a.clipboard.setString(`<@${l?.author?.id??""}>`),S.showToast("Copied User's Mention to clipboard",u.getAssetIDByName("toast_copy_link"))})),B&&s.push(y("Copy User's Id and Mention","Result: <Some ID> <Mention>","ic_copy_id",function(){o.hideActionSheet(),a.clipboard.setString(`${l?.author?.id??""} <@${l?.author?.id??""}>`),S.showToast("Copied User to clipboard",u.getAssetIDByName("toast_copy_link"))})),s.reverse(),b>=0&&i.splice(b,1);for(const h of s){const w=a.React.createElement(a.React.Fragment,null,a.React.createElement(ye,{label:h?.label,subLabel:h?.sub,icon:h?.icon&&a.React.createElement(ye.Icon,{source:u.getAssetIDByName(h?.icon)}),onPress:h?.callback}));b>=0?i.splice(b,0,w):i.push(w)}})})}}const{downloadMediaAsset:yt}=c.findByProps("downloadMediaAsset"),{FormRow:Ae,FormIcon:Ee}=E;function At(e,t,n,o){r.storage?.toggle?.noshare&&t=="MediaShareActionSheet"&&e.then(function(l){const p=A.after("default",l,function(g,m){let[{syncer:f}]=g;a.React.useEffect(function(){return p()},[]);let i=f.sources[f.index.value];Array.isArray(i)&&(i=i[0]);const b=i.sourceURI??i.uri,y=m.props.children.props.children,s=y.findIndex(function(h){return h?.props?.label===a.i18n?.Messages?.SHARE||h?.props?.label==="Share"}),C=a.React.createElement(Ae,{label:"Copy Image Link",subLabel:"Added by Azzy Util",leading:a.React.createElement(Ee,{style:{opacity:1},source:u.getAssetIDByName("ic_message_copy")}),onPress:function(){o.hideActionSheet(),a.clipboard.setString(b),S.showToast("Link copied")}}),Z=a.React.createElement(Ae,{label:"Save Image",subLabel:"Added by Azzy Util",leading:a.React.createElement(Ee,{style:{opacity:1},source:u.getAssetIDByName("ic_download_24px")}),onPress:function(){o.hideActionSheet(),yt(b,0),S.showToast("Downloading image",u.getAssetIDByName("toast_image_saved"))}}),B=[C];if(r.storage.utils.noshare.addSaveImage&&B.push(Z),y)if(s>=0){y.splice(s,1);for(const h of B)y.splice(s,0,h)}else y.push(...B)})})}const U=c.findByProps("openLazy","hideActionSheet");function Et(){return A.before("openLazy",U,function(e){let[t,n,o]=e;R.isEnabled&&(bt(t,n,o,U),At(t,n,o,U),mt(t,n,o,U))})}const Ce=c.findByStoreName("UserStore");function Ct(e){if(e?.message){let{hex:t,enableReply:n}=r.storage?.utils?.customUsernameColor;t??(t="#000"),n??(n=!1);const o=function(l){return t&&(l.usernameColor=a.ReactNative.processColor(t)),l};return r.storage?.debug&&console.log("[AZZYUTILS cuc.js]",e.message.authorId,e?.message?.referencedMessage?.message?.authorId),Ce?.getCurrentUser?.()?.id==e?.message?.authorId&&o(e?.message),n&&e?.message?.referencedMessage?.message&&Ce?.getCurrentUser?.()?.id==e?.message?.referencedMessage?.message?.authorId&&o(e?.message?.referencedMessage?.message),e}}c.findByStoreName("UserStore");function St(e){if(e?.message){let t=r.storage?.utils?.customRoleIcon||{name:"BlobCatSip",source:"https://cdn.discordapp.com/role-icons/1222207470714486825/bc3ef24c3f220155f90e55cc0cb0d0cf.png?size=512",alt:"Role icon, BlobCatSip",size:18};return t.alt??(t.alt=`Role icon, ${t.name}`),e.message.roleIcon=t,e}}const{DCDChatManager:Se}=a.ReactNative.NativeModules,It=function(){return A.before("updateRows",Se,function(e){if(R.isEnabled){let t=JSON.parse(e[1]);return r.storage?.debug&&console.log("[AZZYUTILS update_rows.js] ========== updateRows rows =========="),t.forEach(function(n){r.storage?.debug&&console.log(n),Re(n),r.storage?.toggle?.customUsernameColor&&Ct(n),r.storage?.toggle?.customRoleIcon&&St(n)}),r.storage?.debug&&console.log("====================================="),e[1]=JSON.stringify(t),e[1]}})},Ft=function(){return A.after("updateRows",Se,function(e){if(R.isEnabled){let t=JSON.parse(e[1]);return t.forEach(function(n){Re(n)}),e[1]=JSON.stringify(t),e[1]}})},Ie=c.findByProps("startTyping"),wt=function(){return A.instead("startTyping",Ie,function(){})},Mt=function(){return A.instead("stopTyping",Ie,function(){})},Fe=c.findByProps("startEditMessage"),$t=function(){return A.before("startEditMessage",Fe,function(e){R.isEnabled&&Rt(e)})},vt=function(){return A.before("editMessage",Fe,function(e){R.isEnabled&&pt(e)})};function Tt(e){return e?.avatarDecorationData&&r.storage?.toggle?.removeDecor&&(e.avatarDecorationData=null),e}const Bt=c.findByStoreName("UserStore"),_t=function(){return A.after("getUser",Bt,function(e,t){R.isEnabled&&Tt(t)})},we=["Rawr~","Nyaa","Don't touch my tail!","Maawww! Nappy!","Awowooo","I can chase butterflies all day!","Cuddles?!","These ears pick up everything :3","Shiny things~","Belly rubs, yay","Am cute","Snuggles","Tails","Pawbs","Boxes, owo","Feeling cuddly today!","Feeling cute"];function Dt(e){if(r.storage?.toggle?.cactus&&e?.content?.length>25&&Te(3)){const t=Math.floor(Math.random()*we.length);e.content=`${e?.content}

*${we[t]}*  - \`${r.storage?.utils?.cactus?.name||"Angel"}\``}}const Nt=c.findByProps("sendMessage","receiveMessage");function Pt(){return A.before("sendMessage",Nt,function(e){R.isEnabled&&Dt(e[1])})}j(r.storage,{toggle:{ctime:!1,ralert:!1,customMention:!1,notype:!1,quickid:!1,eml:!1,noshare:!1,removeDecor:!1,cactus:!1,customUsernameColor:!1,customRoleIcon:!1,customClan:!1},utils:{cactus:{name:""},quickid:{addID:!1,addMention:!1,addCombine:!1},replyAlert:{customColor:"#000",gutterColor:"#FFF",colorAlpha:"33",gutterAlpha:"33",useReplyAlert:!1,useCustomColor:!1,ignoreSelf:!1},eml:{logEdit:!1,editedMsg:[]},noshare:{addSaveImage:!1,addCopyImage:!1},customUsernameColor:{hex:"#FFFFFF",enableReply:!1},customRoleIcon:{name:"BlobCatSip",source:"https://cdn.discordapp.com/role-icons/1222207470714486825/bc3ef24c3f220155f90e55cc0cb0d0cf.png?size=512",size:18},customClan:{icon:"",tag:""}},debug:!1});let Y=[],Me;R.isEnabled=!1,Y.push(Et,ft,It,Ft,$t,vt,_t,Pt);const Ut=function(){return Y.forEach(function(e){return e()})},Lt=function(){r.storage.utils.eml.editedMsg.forEach(function(e){a.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:e,otherPluginBypass:!0})}),r.storage.utils.eml.editedMsg=[]};var xt={onLoad:function(){R.isEnabled=!0,r.storage?.toggle?.notype&&Y.push(wt,Mt),Me=Ut()?.catch(function(e){console.log("AZZYUTIL, Crash On Load"),console.log(e),$e.stopPlugin(r.id)})},onUnload:function(){R.isEnabled=!1,Me(),Lt()},settings:ut};return R.default=xt,Object.defineProperty(R,"__esModule",{value:!0}),R})({},vendetta.plugin,vendetta.storage,vendetta.metro,vendetta,vendetta.ui.components,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.plugins);
