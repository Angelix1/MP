(function(C,l,z,V,S,B,n,ee,p,w,te,D,$e){"use strict";const{openLazy:_e,hideActionSheet:wt}=S.findByProps("openLazy","hideActionSheet");function ne(e,t){if(e!=null&&t!=null)for(const a of Object.keys(t))typeof t[a]=="object"&&!Array.isArray(t[a])?(typeof e[a]!="object"&&(e[a]={}),ne(e[a],t[a])):e[a]??(e[a]=t[a])}function ae(e,t){try{_e(new Promise(function(a){return a({default:e})}),"ActionSheet",t)}catch(a){V.logger.error(a.stack),showToast("Got error when opening ActionSheet! Please check debug logs")}}function le(e){const t=e>>16&255,a=e>>8&255,o=e&255;return`#${(1<<24|t<<16|a<<8|o).toString(16).slice(1)}`}function x(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{version:e,new:t,updated:a,fix:o}}const I={...B.General,...B.Forms},oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII=";function re(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#000";e||(e=t);const a=e?.trim();if(a.startsWith("#")){const o=a.slice(1);if(/^[0-9A-Fa-f]{6}$/.test(o))return"#"+o.toUpperCase()}else if(/^[0-9A-Fa-f]{6}$/.test(a))return"#"+a.toUpperCase();return t}const m={toPercentage:function(e){return e=Number(e),e===0?0:e===1?100:Math.round(e*100)},toDecimal:function(e){e=Number(e);const t=Math.min(Math.max(e,0),100);return t===0?0:t===100?1:t/100},formatDecimal:function(e){return e=Number(e),e===0||e===1?e:e.toFixed(2)},alphaToHex:function(e){e=Number(e);const t=Math.min(Math.max(e,0),100),a=Math.round(t/100*255).toString(16).toUpperCase();return a.length===1?"0"+a:a},hexAlphaToPercent:function(e){const t=parseInt(e,16);return isNaN(t)?0:Math.round(t/255*100)}};function Te(e){return Math.random()<e/100}const{ScrollView:It,View:G,Text:ie,TouchableOpacity:se,TextInput:Ft,Image:ue,Animated:$t,FormLabel:_t,FormIcon:Tt,FormArrow:Dt,FormRow:P,FormSwitch:H,FormSwitchRow:Pt,FormSection:Nt,FormDivider:F,FormInput:Bt,FormRadioRow:Lt,FormSliderRow:ce}=I,de=S.findByName("CustomColorPickerActionSheet");function De(){z.useProxy(l.storage);const e=l.storage.utils.replyAlert,[t,a]=n.React.useState(m.toDecimal(m.hexAlphaToPercent(e.colorAlpha)||100)),[o,i]=n.React.useState(m.toDecimal(m.hexAlphaToPercent(e.gutterAlpha)||100)),r=function(){return ae(de,{color:n.ReactNative.processColor(e?.customColor)||0,onSelect:function(u){const y=le(u);e.customColor=y,!(l.storage===null||l.storage===void 0)&&l.storage.debug&&V.logger.log("Reply Alert BG Color","[Changed]",y)}})},g=function(){return ae(de,{color:n.ReactNative.processColor(e?.customColor)||0,onSelect:function(u){const y=le(u);e.gutterColor=y,!(l.storage===null||l.storage===void 0)&&l.storage.debug&&V.logger.log("Reply Alert Gutter Color","[Changed]",y)}})};return n.React.createElement(n.React.Fragment,null,n.React.createElement(P,{label:"Toggle Force Alert",subLabel:"When someone replying to your message with mention disabled, this option will force ping you",trailing:n.React.createElement(H,{value:e?.useReplyAlert||!1,onValueChange:function(u){e.useReplyAlert=u}})}),n.React.createElement(F,null),n.React.createElement(P,{label:"Use Custom Color Mentions",trailing:n.React.createElement(H,{value:e?.useCustomColor||!1,onValueChange:function(u){e.useCustomColor=u}})}),n.React.createElement(F,null),n.React.createElement(P,{label:"Ignore self Reply",subLabel:"When replying to own message, do not ping",trailing:n.React.createElement(H,{value:e?.ignoreSelf||!1,onValueChange:function(u){e.ignoreSelf=u}})}),n.React.createElement(F,null),n.React.createElement(P,{label:"Preview",subLabel:"How it looks in then chat"}),n.React.createElement(G,{style:[{flexDirection:"row",height:80,width:"100%",overflow:"hidden",borderRadius:12,marginBottom:20,marginRight:10,marginLeft:10}]},n.React.createElement(G,{style:{width:"2%",backgroundColor:`${e?.gutterColor}${m.alphaToHex(m.toPercentage(o))}`}}),n.React.createElement(G,{style:{flex:1,backgroundColor:`${e?.customColor}${m.alphaToHex(m.toPercentage(t))}`,justifyContent:"center",alignItems:"center"}},n.React.createElement(ie,{style:{fontSize:20,color:"#FFFFFF"}}," Example White Text "),n.React.createElement(ie,{style:{fontSize:20,color:"#000000"}}," Example Black Text "))),n.React.createElement(F,null),n.React.createElement(P,{label:"Background Color",subLabel:"Click to Update",onPress:r,trailing:n.React.createElement(se,{onPress:r},n.React.createElement(ue,{source:{uri:oe},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.customColor||"#000"}}))}),n.React.createElement(F,null),n.React.createElement(P,{label:"Gutter Color",subLabel:"Click to Update",onPress:g,trailing:n.React.createElement(se,{onPress:g},n.React.createElement(ue,{source:{uri:oe},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.gutterColor||"#000"}}))}),n.React.createElement(F,null),n.React.createElement(ce,{label:`Background Color Alpha: ${m.toPercentage(t)}%`,value:t,style:{width:"90%"},onValueChange:function(u){a(Number(m.formatDecimal(u))),e.colorAlpha=m.alphaToHex(m.toPercentage(u))}}),n.React.createElement(F,null),n.React.createElement(ce,{label:`Gutter Color Alpha: ${m.toPercentage(o)}%`,value:o,style:{width:"90%"},onValueChange:function(u){i(Number(m.formatDecimal(u))),e.gutterAlpha=m.alphaToHex(m.toPercentage(u))}}))}const{FormRow:Pe,FormSwitch:Ne}=I;function Be(){var e,t;return React.createElement(React.Fragment,null,React.createElement(Pe,{label:"Bypass Antied Logging",trailing:React.createElement(Ne,{value:(l.storage===null||l.storage===void 0||(t=l.storage.utils)===null||t===void 0||(e=t.eml)===null||e===void 0?void 0:e.logEdit)||!1,onValueChange:function(a){l.storage.utils.eml.logEdit=a}})}))}function $(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return[...t]}var q=[x("1.0.0",$("Created the Plugin")),x("1.0.1",$("Added Remove Decor","Customization for reply alert","Option to revert locally edited message (wipe on unload of the plugin)")),x("1.0.2",$("[1.0.22] Setting for Quick Id","[1.0.22] Option to toggle Force alert","[1.0.22] Preview for ReplyAlert"),$("[1.0.2] Remove Custom Timestamp","[1.0.24] EML will wipe its log when onunload and revert every message its edit"),$("[1.0.21] Fix Cactus","[1.0.22] Fix No Share fails to find Share button","[1.0.23] Fix Quick ID removing edit message button")),x("1.0.3",null,$("Update EML, QID buttons"),$("Fixed EML button fails to append under Reply Button","Fixed QID buttons fails to append to a correct place"))].reverse();const{ScrollView:kt,View:ge,Text:Ut,TouchableOpacity:Ot,TextInput:zt,Image:Vt,Animated:Gt}=B.General,{FormLabel:Ht,FormIcon:Le,FormArrow:qt,FormRow:Q,FormSwitch:Qt,FormSwitchRow:Yt,FormSection:Zt,FormDivider:xe,FormInput:jt}=B.Forms,ke=p.getAssetIDByName("ic_radio_square_checked_24px"),Ue=p.getAssetIDByName("ic_radio_square_24px"),Oe=p.getAssetIDByName("ic_information_24px");p.getAssetIDByName("ic_info");const ze=p.getAssetIDByName("premium_sparkles"),Ve=p.getAssetIDByName("ic_sync_24px"),Ge=p.getAssetIDByName("ic_progress_wrench_24px"),N=n.stylesheet.createThemedStyleSheet({border:{borderRadius:10},textBody:{color:ee.semanticColors.TEXT_NORMAL,fontFamily:n.constants.Fonts.PRIMARY_MEDIUM,letterSpacing:.25,fontSize:22},textBody:{color:ee.semanticColors.INPUT_PLACEHOLDER_TEXT,fontFamily:n.constants.Fonts.DISPLAY_NORMAL,letterSpacing:.25,fontSize:16},versionBG:{margin:10,padding:15,backgroundColor:"rgba(55, 149, 225, 0.3)"},rowLabel:{margin:10,padding:15,backgroundColor:"rgba(33, 219, 222, 0.34)"}});function k(e){return n.React.createElement(Le,{style:{opacity:1},source:e})}function He(e){let{change:t,index:a,totalIndex:o}=e;var i,r,g;const[u,y]=n.React.useState(!1);n.React.useState(!1);function d(R,f,b,E){return n.React.createElement(ge,null,n.React.createElement(Q,{label:f||"No Section",subLabel:b||null,leading:E&&k(E),style:[N.textHeader]}),R.map(function(M,_){return n.React.createElement(n.React.Fragment,null,n.React.createElement(Q,{label:M,style:[N.textBody,N.rowLabel,N.border]}))}))}return n.React.createElement(n.React.Fragment,null,n.React.createElement(B.ErrorBoundary,null,n.React.createElement(Q,{label:t?.version,leading:a==0?k(ke):k(Ue),trailing:k(Oe),onPress:function(){y(!u)}}),u&&n.React.createElement(ge,{style:[N.versionBG,N.border]},(t==null||(i=t.new)===null||i===void 0?void 0:i.length)>0&&d(t.new,"New","New stuffies",ze),(t==null||(r=t.updated)===null||r===void 0?void 0:r.length)>0&&d(t.updated,"Changes","Update things",Ve),(t==null||(g=t.fix)===null||g===void 0?void 0:g.length)>0&&d(t.fix,"Fixes","Me hate borken things",Ge)),a==o.length-1?void 0:n.React.createElement(xe,null)))}const{FormRow:qe,FormSwitch:Qe}=I;function Ye(){var e,t;return React.createElement(React.Fragment,null,React.createElement(qe,{label:"Add Save Image Button to Image ActionSheet",subLabel:"if Built-in Save Image gone",trailing:React.createElement(Qe,{value:(l.storage===null||l.storage===void 0||(t=l.storage.utils)===null||t===void 0||(e=t.noshare)===null||e===void 0?void 0:e.addSaveImage)||!1,onValueChange:function(a){l.storage.utils.noshare.addSaveImage=a}})}))}const{FormInput:Ze}=I;function je(){var e,t;return React.createElement(React.Fragment,null,React.createElement(Ze,{title:"Name",keyboardType:"default",placeholder:"Angel",value:l.storage===null||l.storage===void 0||(t=l.storage.utils)===null||t===void 0||(e=t.cactus)===null||e===void 0?void 0:e.name,onChange:function(a){return l.storage.utils.cactus.name=a.toString()}}))}const{FormRow:Je,FormSwitch:We,FormDivider:ve}=I;function Ke(){z.useProxy(l.storage);const e=function(a,o,i){return{label:a,subLabel:o,key:i}},t=[e("Id","add Copy User Id","addID"),e("Mention","add Copy User Mention","addMention"),e("Id and Mention","add Copy User Id & Mention","addCombine")];return n.React.createElement(n.React.Fragment,null,t.map(function(a,o){var i,r;return n.React.createElement(n.React.Fragment,null,n.React.createElement(Je,{label:a?.label||"Missing Label",subLabel:a?.subLabel,trailing:n.React.createElement(We,{value:(l.storage===null||l.storage===void 0||(r=l.storage.utils)===null||r===void 0||(i=r.quickid)===null||i===void 0?void 0:i[a?.key])||!1,onValueChange:function(g){l.storage.utils.quickid[a.key]=g}})}),o!==t?.length-1&&n.React.createElement(ve,null))}),n.React.createElement(ve,null))}const{ScrollView:Xe,View:Y,Text:Jt,TouchableOpacity:Wt,TextInput:Kt,Image:Xt,Animated:en,FormLabel:tn,FormIcon:nn,FormArrow:an,FormRow:fe,FormSwitch:he,FormSwitchRow:ln,FormSection:ye,FormDivider:Re,FormInput:on,FormRadioRow:rn,Component:sn}=I;function et(){z.useProxy(l.storage);const e=function(a,o,i,r,g){return{id:a,title:o,label:i,subLabel:r,props:g}},t=[e("cactus","Cactus","Toggle uhhh.. something",null,je),e("eml","EML","Toggle Edit Message Locally",null,Be),e("notype","No Type","Toggle No Typings",null,null),e("quickid","QID","Toggle Quick ID Setting",null,Ke),e("noshare","No Share","Toggle No Share",null,Ye),e("ralert","Reply Alert & Custom Mentions","Toggle Reply Alert & Custom Mentions Settings",null,De),e("removeDecor","I HATE AVATAR DECORATIONS","Toggle Remove Avatar Decoration",null,null)];return React.createElement(React.Fragment,null,React.createElement(Xe,null,React.createElement(Y,{style:{paddingBottom:36,borderRadius:10,backgroundColor:"rgba(0, 12, 46, 0.15)"}},React.createElement(fe,{label:"Debug",subLabel:"enable console logging",trailing:React.createElement(he,{value:l.storage.debug,onValueChange:function(a){l.storage.debug=a}})}),React.createElement(Re,null),t.map(function(a,o){return React.createElement(React.Fragment,null,React.createElement(ye,{title:a?.title},React.createElement(fe,{label:a?.label,subLabel:a?.subLabel,trailing:React.createElement(he,{value:l.storage.toggle[a?.id],onValueChange:function(i){l.storage.toggle[a?.id]=i}})}),l.storage.toggle[a.id]&&a.props&&React.createElement(Y,{style:{margin:5,padding:10,borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.15)"}},React.createElement(a.props,null))))})),React.createElement(Re,null),q&&React.createElement(ye,{title:"Updates"},React.createElement(Y,{style:{margin:5,padding:5,borderRadius:10,backgroundColor:"rgba(59, 30, 55, 0.15)"}},q.map(function(a,o){return React.createElement(He,{change:a,index:o,totalIndex:q.length})})))))}var Z,j;const J=S.findByStoreName("UserStore");S.findByProps("getMessage","getMessages");const L=J==null||(j=J.getCurrentUser)===null||j===void 0||(Z=j.call(J))===null||Z===void 0?void 0:Z.id;function tt(e){if(e.type=="MESSAGE_CREATE"){var t,a,o,i,r,g,u;const b=(e==null||(o=e.message)===null||o===void 0||(a=o.referenced_message)===null||a===void 0||(t=a.author)===null||t===void 0?void 0:t.id)==L,E=e==null||(r=e.message)===null||r===void 0||(i=r.mentions)===null||i===void 0?void 0:i.some(function(M){return M?.id===L});if(!(l.storage===null||l.storage===void 0||(u=l.storage.utils)===null||u===void 0||(g=u.replyAlert)===null||g===void 0)&&g.useReplyAlert&&(b||E)){var y,d;if((e==null||(d=e.message)===null||d===void 0||(y=d.author)===null||y===void 0?void 0:y.id)!=L)e.message.mentions.push({id:L});else{var R,f;(l.storage===null||l.storage===void 0||(f=l.storage.utils)===null||f===void 0||(R=f.replyAlert)===null||R===void 0?void 0:R.ignoreSelf)==!1&&e.message.mentions.push({id:L})}}}}function be(e){var t,a;const{gutterColor:o,customColor:i,gutterAlpha:r,colorAlpha:g,useCustomColor:u}=l.storage===null||l.storage===void 0||(t=l.storage.utils)===null||t===void 0?void 0:t.replyAlert;if(u&&!(e==null||(a=e.message)===null||a===void 0)&&a.mentioned){e.backgroundHighlight??(e.backgroundHighlight={});const y=re(i,"#DAFFFF"),d=re(o,"#121212");e.backgroundHighlight={backgroundColor:n.ReactNative.processColor(`${y}${g}`),gutterColor:n.ReactNative.processColor(`${d}${r}`)}}return e}function nt(){return w.before("dispatch",n.FluxDispatcher,function(e){let[t]=e;C.isEnabled&&tt(t)})}const Ee=S.findByProps("getMessage","getMessages"),Ae=S.findByProps("getChannel","getDMFromUserId"),at=S.findByProps("startEditMessage"),{ActionSheetRow:U}=S.findByProps("ActionSheetRow");let W=!1;function lt(e,t,a,o){var i;if(t=="MessageLongPressActionSheet"&&!(l.storage===null||l.storage===void 0||(i=l.storage.toggle)===null||i===void 0)&&i.eml){const r=a?.message;if(!r)return;e.then(function(g){const u=w.after("default",g,function(y,d){var R,f,b;n.React.useEffect(function(){return function(){u()}},[]);const E=te.findInReactTree(d,function(A){var h;return A==null||(h=A.find)===null||h===void 0?void 0:h.call(A,function(s){var c,v;return(s==null||(c=s.props)===null||c===void 0?void 0:c.label)==(n.i18n===null||n.i18n===void 0||(v=n.i18n.Messages)===null||v===void 0?void 0:v.MESSAGE_ACTION_REPLY)})});if(!E)return d;const M=Math.max(E.findIndex(function(A){var h,s;return(A==null||(h=A.props)===null||h===void 0?void 0:h.label)==(n.i18n===null||n.i18n===void 0||(s=n.i18n.Messages)===null||s===void 0?void 0:s.MESSAGE_ACTION_REPLY)}),E.length-1),_=l.storage===null||l.storage===void 0||(b=l.storage.utils)===null||b===void 0||(f=b.eml)===null||f===void 0||(R=f.editedMsg)===null||R===void 0?void 0:R.find(function(A){return A.id==r?.id});_?E.splice(M,0,n.React.createElement(n.React.Fragment,null,n.React.createElement(U,{label:"Revert Locally Edited Message",subLabel:"Added by Azzy Util",icon:n.React.createElement(U.Icon,{source:p.getAssetIDByName("ic_edit_24px")}),onPress:function(){var A,h,s,c;const v=Ee.getMessage(r.channel_id,r.id);n.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...v,...r,content:_.content,edited_timestamp:v.editedTimestamp,mention_roles:v.mentionRoles,mention_everyone:v.mentionEveryone,guild_id:(A=Ae.getChannel(v.channel_id||r.channel_id))===null||A===void 0?void 0:A.guild_id},otherPluginBypass:!0}),l.storage.utils.eml.editedMsg=l.storage===null||l.storage===void 0||(c=l.storage.utils)===null||c===void 0||(s=c.eml)===null||s===void 0||(h=s.editedMsg)===null||h===void 0?void 0:h.filter(function(T){return T.id!=r.id}),o.hideActionSheet()}}))):E.splice(M,0,n.React.createElement(n.React.Fragment,null,n.React.createElement(U,{label:"Edit Message Locally",subLabel:"Added by Azzy Util",icon:n.React.createElement(U.Icon,{source:p.getAssetIDByName("ic_edit_24px")}),onPress:function(){at.startEditMessage(`AZZYEML-${r.channel_id}`,r.id,r.content),o.hideActionSheet()}})))})})}}function ot(e){var t;return!((t=e[0])===null||t===void 0)&&t.startsWith("AZZYEML-")?(e[0]=e[0].replaceAll("AZZYEML-",""),W=!0,e):(W=!1,e)}function rt(e){if(W){var t,a,o,i,r;let[g,u,y]=e;const d=Ee.getMessage(g,u);l.storage===null||l.storage===void 0||(a=l.storage.utils)===null||a===void 0||(t=a.eml)===null||t===void 0||t.editedMsg.push(d),n.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...d,...y,edited_timestamp:d.editedTimestamp,mention_roles:d.mentionRoles,mention_everyone:d.mentionEveryone,member:d.author,guild_id:(o=Ae.getChannel(d.channel_id||g))===null||o===void 0?void 0:o.guild_id},otherPluginBypass:l.storage===null||l.storage===void 0||(r=l.storage.utils)===null||r===void 0||(i=r.eml)===null||i===void 0?void 0:i.logEdit}),D.showToast("Message Edited",p.getAssetIDByName("ic_edit_24px"))}}const{ActionSheetRow:pe}=S.findByProps("ActionSheetRow");function it(e,t,a,o){var i;if(t=="MessageLongPressActionSheet"&&!(l.storage===null||l.storage===void 0||(i=l.storage.toggle)===null||i===void 0)&&i.quickid){const r=a?.message;if(!r)return;e.then(function(g){const u=w.after("default",g,function(y,d){var R;n.React.useEffect(function(){return function(){u()}},[]);const f=te.findInReactTree(d,function(s){var c;return s==null||(c=s.find)===null||c===void 0?void 0:c.call(s,function(v){var T,X;return(v==null||(T=v.props)===null||T===void 0?void 0:T.label)==(n.i18n===null||n.i18n===void 0||(X=n.i18n.Messages)===null||X===void 0?void 0:X.MENTION)})});if(!f)return d;const b=Math.max(f.findIndex(function(s){var c,v;return(s==null||(c=s.props)===null||c===void 0?void 0:c.label)==(n.i18n===null||n.i18n===void 0||(v=n.i18n.Messages)===null||v===void 0?void 0:v.MENTION)}),f.length-1);l.storage.debug&&(console.log(f),console.log("Position => "+b));function E(s,c,v,T){return{label:s,sub:c,icon:v,callback:T}}let M=[];const{addID:_,addMention:A,addCombine:h}=l.storage===null||l.storage===void 0||(R=l.storage.utils)===null||R===void 0?void 0:R.quickid;_&&M.push(E("Copy User's Id","Result: <Some ID>","ic_copy_id",function(){var s;o.hideActionSheet(),n.clipboard.setString((r==null||(s=r.author)===null||s===void 0?void 0:s.id)??""),D.showToast("Copied User's ID to clipboard",p.getAssetIDByName("toast_copy_link"))})),A&&M.push(E("Copy User's Mention","Result: <Mention>","ic_copy_id",function(){var s;o.hideActionSheet(),n.clipboard.setString(`<@${(r==null||(s=r.author)===null||s===void 0?void 0:s.id)??""}>`),D.showToast("Copied User's Mention to clipboard",p.getAssetIDByName("toast_copy_link"))})),h&&M.push(E("Copy User's Id and Mention","Result: <Some ID> <Mention>","ic_copy_id",function(){var s,c;o.hideActionSheet(),n.clipboard.setString(`${(r==null||(s=r.author)===null||s===void 0?void 0:s.id)??""} <@${(r==null||(c=r.author)===null||c===void 0?void 0:c.id)??""}>`),D.showToast("Copied User to clipboard",p.getAssetIDByName("toast_copy_link"))})),M.reverse(),b>=0&&f.splice(b,1);for(const s of M){const c=n.React.createElement(n.React.Fragment,null,n.React.createElement(pe,{label:s?.label,subLabel:s?.sub,icon:s?.icon&&n.React.createElement(pe.Icon,{source:p.getAssetIDByName(s?.icon)}),onPress:s?.callback}));b>=0?f.splice(b,0,c):f.push(c)}})})}}const{downloadMediaAsset:st}=S.findByProps("downloadMediaAsset"),{FormRow:me,FormIcon:Se}=I;function ut(e,t,a,o){var i;!(l.storage===null||l.storage===void 0||(i=l.storage.toggle)===null||i===void 0)&&i.noshare&&t=="MediaShareActionSheet"&&e.then(function(r){const g=w.after("default",r,function(u,y){let[{syncer:d}]=u;n.React.useEffect(function(){return g()},[]);let R=d.sources[d.index.value];Array.isArray(R)&&(R=R[0]);const f=R.sourceURI??R.uri,b=y.props.children.props.children,E=b.findIndex(function(h){var s,c,v;return(h==null||(s=h.props)===null||s===void 0?void 0:s.label)===(n.i18n===null||n.i18n===void 0||(c=n.i18n.Messages)===null||c===void 0?void 0:c.SHARE)||(h==null||(v=h.props)===null||v===void 0?void 0:v.label)==="Share"}),M=n.React.createElement(me,{label:"Copy Image Link",subLabel:"Added by Azzy Util",leading:n.React.createElement(Se,{style:{opacity:1},source:p.getAssetIDByName("ic_message_copy")}),onPress:function(){o.hideActionSheet(),n.clipboard.setString(f),D.showToast("Link copied")}}),_=n.React.createElement(me,{label:"Save Image",subLabel:"Added by Azzy Util",leading:n.React.createElement(Se,{style:{opacity:1},source:p.getAssetIDByName("ic_download_24px")}),onPress:function(){o.hideActionSheet(),st(f,0),D.showToast("Downloading image",p.getAssetIDByName("toast_image_saved"))}}),A=[M];if(l.storage.utils.noshare.addSaveImage&&A.push(_),b)if(E>=0){b.splice(E,1);for(const h of A)b.splice(E,0,h)}else b.push(...A)})})}const O=S.findByProps("openLazy","hideActionSheet");function ct(){return w.before("openLazy",O,function(e){let[t,a,o]=e;C.isEnabled&&(it(t,a,o,O),ut(t,a,o,O),lt(t,a,o,O))})}const{DCDChatManager:Ce}=n.ReactNative.NativeModules,dt=function(){return w.before("updateRows",Ce,function(e){if(C.isEnabled){let t=JSON.parse(e[1]);return t.forEach(function(a){be(a)}),e[1]=JSON.stringify(t),e[1]}})},gt=function(){return w.after("updateRows",Ce,function(e){if(C.isEnabled){let t=JSON.parse(e[1]);return t.forEach(function(a){be(a)}),e[1]=JSON.stringify(t),e[1]}})},Me=S.findByProps("startTyping"),vt=function(){return w.instead("startTyping",Me,function(){})},ft=function(){return w.instead("stopTyping",Me,function(){})},we=S.findByProps("startEditMessage"),ht=function(){return w.before("startEditMessage",we,function(e){C.isEnabled&&ot(e)})},yt=function(){return w.before("editMessage",we,function(e){C.isEnabled&&rt(e)})};function Rt(e){var t;return e?.avatarDecorationData&&!(l.storage===null||l.storage===void 0||(t=l.storage.toggle)===null||t===void 0)&&t.removeDecor&&(e.avatarDecorationData=null),e}const bt=S.findByStoreName("UserStore"),Et=function(){return w.after("getUser",bt,function(e,t){C.isEnabled&&Rt(t)})},Ie=["Rawr~","Nyaa","Don't touch my tail!","Maawww! Nappy!","Awowooo","I can chase butterflies all day!","Cuddles?!","These ears pick up everything :3","Shiny things~","Belly rubs, yay","Am cute","Snuggles","Tails","Pawbs","Boxes, owo","Feeling cuddly today!","Feeling cute"];function At(e){var t,a;if(!(l.storage===null||l.storage===void 0||(t=l.storage.toggle)===null||t===void 0)&&t.cactus&&(e==null||(a=e.content)===null||a===void 0?void 0:a.length)>25&&Te(3)){var o,i;const r=Math.floor(Math.random()*Ie.length);e.content=`${e?.content}

*${Ie[r]}*  - \`${(l.storage===null||l.storage===void 0||(i=l.storage.utils)===null||i===void 0||(o=i.cactus)===null||o===void 0?void 0:o.name)||"Angel"}\``}}const pt=S.findByProps("sendMessage","receiveMessage");function mt(){return w.before("sendMessage",pt,function(e){C.isEnabled&&At(e[1])})}ne(l.storage,{toggle:{ctime:!1,ralert:!1,notype:!1,quickid:!1,eml:!1,noshare:!1,removeDecor:!1,cactus:!1},utils:{cactus:{name:""},quickid:{addID:!1,addMention:!1,addCombine:!1},replyAlert:{customColor:"#000",gutterColor:"#FFF",colorAlpha:"33",gutterAlpha:"33",useReplyAlert:!1,useCustomColor:!1,ignoreSelf:!1},eml:{logEdit:!1,editedMsg:[]},noshare:{addSaveImage:!1,addCopyImage:!1}},debug:!1});let K=[],Fe;C.isEnabled=!1,K.push(ct,nt,dt,gt,ht,yt,Et,mt);const St=function(){return K.forEach(function(e){return e()})},Ct=function(){l.storage.utils.eml.editedMsg.forEach(function(e){n.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:e,otherPluginBypass:!0})}),l.storage.utils.eml.editedMsg=[]};var Mt={onLoad:function(){var e,t;C.isEnabled=!0,!(l.storage===null||l.storage===void 0||(e=l.storage.toggle)===null||e===void 0)&&e.notype&&K.push(vt,ft),Fe=(t=St())===null||t===void 0?void 0:t.catch(function(a){console.log("AZZYUTIL, Crash On Load"),console.log(a),$e.stopPlugin(l.id)})},onUnload:function(){C.isEnabled=!1,Fe(),Ct()},settings:et};return C.default=Mt,Object.defineProperty(C,"__esModule",{value:!0}),C})({},vendetta.plugin,vendetta.storage,vendetta,vendetta.metro,vendetta.ui.components,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.plugins);
