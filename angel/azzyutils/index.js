(function(C,r,U,O,S,P,n,W,y,w,K,T,we){"use strict";const{openLazy:Fe,hideActionSheet:It}=S.findByProps("openLazy","hideActionSheet");function X(e,t){if(e!=null&&t!=null)for(const a of Object.keys(t))typeof t[a]=="object"&&!Array.isArray(t[a])?(typeof e[a]!="object"&&(e[a]={}),X(e[a],t[a])):e[a]??(e[a]=t[a])}function ee(e,t){try{Fe(new Promise(function(a){return a({default:e})}),"ActionSheet",t)}catch(a){O.logger.error(a.stack),showToast("Got error when opening ActionSheet! Please check debug logs")}}function te(e){const t=e>>16&255,a=e>>8&255,l=e&255;return`#${(1<<24|t<<16|a<<8|l).toString(16).slice(1)}`}function z(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{version:e,new:t,updated:a,fix:l}}const I={...P.General,...P.Forms},ne="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII=";function ae(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#000";e||(e=t);const a=e?.trim();if(a.startsWith("#")){const l=a.slice(1);if(/^[0-9A-Fa-f]{6}$/.test(l))return"#"+l.toUpperCase()}else if(/^[0-9A-Fa-f]{6}$/.test(a))return"#"+a.toUpperCase();return t}const A={toPercentage:function(e){return e=Number(e),e===0?0:e===1?100:Math.round(e*100)},toDecimal:function(e){e=Number(e);const t=Math.min(Math.max(e,0),100);return t===0?0:t===100?1:t/100},formatDecimal:function(e){return e=Number(e),e===0||e===1?e:e.toFixed(2)},alphaToHex:function(e){e=Number(e);const t=Math.min(Math.max(e,0),100),a=Math.round(t/100*255).toString(16).toUpperCase();return a.length===1?"0"+a:a},hexAlphaToPercent:function(e){const t=parseInt(e,16);return isNaN(t)?0:Math.round(t/255*100)}};function Me(e){if(typeof e!="number"||e<1||e>100)throw new Error("withinChance(percentage): percentage must be a number between 1 and 100");return Math.random()<e/100}const{ScrollView:$t,View:V,Text:re,TouchableOpacity:le,TextInput:_t,Image:oe,Animated:Tt,FormLabel:Dt,FormIcon:Nt,FormArrow:Pt,FormRow:D,FormSwitch:H,FormSwitchRow:Bt,FormSection:Lt,FormDivider:$,FormInput:xt,FormRadioRow:kt,FormSliderRow:ie}=I,se=S.findByName("CustomColorPickerActionSheet");function Ie(){U.useProxy(r.storage);const e=r.storage.utils.replyAlert,[t,a]=n.React.useState(A.toDecimal(A.hexAlphaToPercent(e.colorAlpha)||100)),[l,i]=n.React.useState(A.toDecimal(A.hexAlphaToPercent(e.gutterAlpha)||100)),o=function(){return ee(se,{color:n.ReactNative.processColor(e?.customColor)||0,onSelect:function(u){const v=te(u);e.customColor=v,!(r.storage===null||r.storage===void 0)&&r.storage.debug&&O.logger.log("Reply Alert BG Color","[Changed]",v)}})},g=function(){return ee(se,{color:n.ReactNative.processColor(e?.customColor)||0,onSelect:function(u){const v=te(u);e.gutterColor=v,!(r.storage===null||r.storage===void 0)&&r.storage.debug&&O.logger.log("Reply Alert Gutter Color","[Changed]",v)}})};return n.React.createElement(n.React.Fragment,null,n.React.createElement(D,{label:"Toggle Force Alert",subLabel:"When someone replying to your message with mention disabled, this option will force ping you",trailing:n.React.createElement(H,{value:e?.useReplyAlert||!1,onValueChange:function(u){e.useReplyAlert=u}})}),n.React.createElement($,null),n.React.createElement(D,{label:"Use Custom Color Mentions",trailing:n.React.createElement(H,{value:e?.useCustomColor||!1,onValueChange:function(u){e.useCustomColor=u}})}),n.React.createElement($,null),n.React.createElement(D,{label:"Ignore self Reply",subLabel:"When replying to own message, do not ping",trailing:n.React.createElement(H,{value:e?.ignoreSelf||!1,onValueChange:function(u){e.ignoreSelf=u}})}),n.React.createElement($,null),n.React.createElement(D,{label:"Preview",subLabel:"How it looks in then chat"}),n.React.createElement(V,{style:[{flexDirection:"row",height:80,width:"100%",overflow:"hidden",borderRadius:12,marginBottom:20,marginRight:10,marginLeft:10}]},n.React.createElement(V,{style:{width:"2%",backgroundColor:`${e?.gutterColor}${A.alphaToHex(A.toPercentage(l))}`}}),n.React.createElement(V,{style:{flex:1,backgroundColor:`${e?.customColor}${A.alphaToHex(A.toPercentage(t))}`,justifyContent:"center",alignItems:"center"}},n.React.createElement(re,{style:{fontSize:20,color:"#FFFFFF"}}," Example White Text "),n.React.createElement(re,{style:{fontSize:20,color:"#000000"}}," Example Black Text "))),n.React.createElement($,null),n.React.createElement(D,{label:"Background Color",subLabel:"Click to Update",onPress:o,trailing:n.React.createElement(le,{onPress:o},n.React.createElement(oe,{source:{uri:ne},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.customColor||"#000"}}))}),n.React.createElement($,null),n.React.createElement(D,{label:"Gutter Color",subLabel:"Click to Update",onPress:g,trailing:n.React.createElement(le,{onPress:g},n.React.createElement(oe,{source:{uri:ne},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.gutterColor||"#000"}}))}),n.React.createElement($,null),n.React.createElement(ie,{label:`Background Color Alpha: ${A.toPercentage(t)}%`,value:t,style:{width:"90%"},onValueChange:function(u){a(Number(A.formatDecimal(u))),e.colorAlpha=A.alphaToHex(A.toPercentage(u))}}),n.React.createElement($,null),n.React.createElement(ie,{label:`Gutter Color Alpha: ${A.toPercentage(l)}%`,value:l,style:{width:"90%"},onValueChange:function(u){i(Number(A.formatDecimal(u))),e.gutterAlpha=A.alphaToHex(A.toPercentage(u))}}))}const{FormRow:$e,FormSwitch:_e}=I;function Te(){var e,t;return React.createElement(React.Fragment,null,React.createElement($e,{label:"Bypass Antied Logging",trailing:React.createElement(_e,{value:(r.storage===null||r.storage===void 0||(t=r.storage.utils)===null||t===void 0||(e=t.eml)===null||e===void 0?void 0:e.logEdit)||!1,onValueChange:function(a){r.storage.utils.eml.logEdit=a}})}))}function B(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return[...t]}var G=[z("1.0.0",B("Created the Plugin")),z("1.0.1",B("Added Remove Decor","Customization for reply alert","Option to revert locally edited message (wipe on unload of the plugin)")),z("1.0.2",B("[1.0.22] Setting for Quick Id","[1.0.22] Option to toggle Force alert","[1.0.22] Preview for ReplyAlert"),B("[1.0.2] Remove Custom Timestamp"),B("[1.0.21] Fix Cactus","[1.0.22] Fix No Share fails to find Share button"))].reverse();const{ScrollView:Ot,View:ue,Text:zt,TouchableOpacity:Vt,TextInput:Ht,Image:Gt,Animated:qt}=P.General,{FormLabel:Yt,FormIcon:De,FormArrow:Zt,FormRow:q,FormSwitch:jt,FormSwitchRow:Qt,FormSection:Jt,FormDivider:Ne,FormInput:Wt}=P.Forms,Pe=y.getAssetIDByName("ic_radio_square_checked_24px"),Be=y.getAssetIDByName("ic_radio_square_24px"),Le=y.getAssetIDByName("ic_information_24px");y.getAssetIDByName("ic_info");const xe=y.getAssetIDByName("premium_sparkles"),ke=y.getAssetIDByName("ic_sync_24px"),Ue=y.getAssetIDByName("ic_progress_wrench_24px"),N=n.stylesheet.createThemedStyleSheet({border:{borderRadius:10},textBody:{color:W.semanticColors.TEXT_NORMAL,fontFamily:n.constants.Fonts.PRIMARY_MEDIUM,letterSpacing:.25,fontSize:22},textBody:{color:W.semanticColors.INPUT_PLACEHOLDER_TEXT,fontFamily:n.constants.Fonts.DISPLAY_NORMAL,letterSpacing:.25,fontSize:16},versionBG:{margin:10,padding:15,backgroundColor:"rgba(55, 149, 225, 0.3)"},rowLabel:{margin:10,padding:15,backgroundColor:"rgba(33, 219, 222, 0.34)"}});function x(e){return n.React.createElement(De,{style:{opacity:1},source:e})}function Oe(e){let{change:t,index:a,totalIndex:l}=e;var i,o,g;const[u,v]=n.React.useState(!1);n.React.useState(!1);function d(R,p,E,m){return n.React.createElement(ue,null,n.React.createElement(q,{label:p||"No Section",subLabel:E||null,leading:m&&x(m),style:[N.textHeader]}),R.map(function(F,_){return n.React.createElement(n.React.Fragment,null,n.React.createElement(q,{label:F,style:[N.textBody,N.rowLabel,N.border]}))}))}return n.React.createElement(n.React.Fragment,null,n.React.createElement(P.ErrorBoundary,null,n.React.createElement(q,{label:t?.version,leading:a==0?x(Pe):x(Be),trailing:x(Le),onPress:function(){v(!u)}}),u&&n.React.createElement(ue,{style:[N.versionBG,N.border]},(t==null||(i=t.new)===null||i===void 0?void 0:i.length)>0&&d(t.new,"New","New stuffies",xe),(t==null||(o=t.updated)===null||o===void 0?void 0:o.length)>0&&d(t.updated,"Changes","Update things",ke),(t==null||(g=t.fix)===null||g===void 0?void 0:g.length)>0&&d(t.fix,"Fixes","Me hate borken things",Ue)),a==l.length-1?void 0:n.React.createElement(Ne,null)))}const{FormRow:ze,FormSwitch:Ve}=I;function He(){var e,t;return React.createElement(React.Fragment,null,React.createElement(ze,{label:"Add Save Image Button to Image ActionSheet",subLabel:"if Built-in Save Image gone",trailing:React.createElement(Ve,{value:(r.storage===null||r.storage===void 0||(t=r.storage.utils)===null||t===void 0||(e=t.noshare)===null||e===void 0?void 0:e.addSaveImage)||!1,onValueChange:function(a){r.storage.utils.noshare.addSaveImage=a}})}))}const{FormInput:Ge}=I;function qe(){var e,t;return React.createElement(React.Fragment,null,React.createElement(Ge,{title:"Name",keyboardType:"default",placeholder:"Angel",value:r.storage===null||r.storage===void 0||(t=r.storage.utils)===null||t===void 0||(e=t.cactus)===null||e===void 0?void 0:e.name,onChange:function(a){return r.storage.utils.cactus.name=a.toString()}}))}const{FormRow:Ye,FormSwitch:Ze,FormDivider:ce}=I;function je(){U.useProxy(r.storage);const e=function(a,l,i){return{label:a,subLabel:l,key:i}},t=[e("Id","add Copy User Id","addID"),e("Mention","add Copy User Mention","addMention"),e("Id and Mention","add Copy User Id & Mention","addCombine")];return n.React.createElement(n.React.Fragment,null,t.map(function(a,l){var i,o;return n.React.createElement(n.React.Fragment,null,n.React.createElement(Ye,{label:a?.label||"Missing Label",subLabel:a?.subLabel,trailing:n.React.createElement(Ze,{value:(r.storage===null||r.storage===void 0||(o=r.storage.utils)===null||o===void 0||(i=o.quickid)===null||i===void 0?void 0:i[a?.key])||!1,onValueChange:function(g){r.storage.utils.quickid[a.key]=g}})}),l!==t?.length-1&&n.React.createElement(ce,null))}),n.React.createElement(ce,null))}const{ScrollView:Qe,View:Y,Text:Kt,TouchableOpacity:Xt,TextInput:en,Image:tn,Animated:nn,FormLabel:an,FormIcon:rn,FormArrow:ln,FormRow:Je,FormSwitch:We,FormSwitchRow:on,FormSection:de,FormDivider:Ke,FormInput:sn,FormRadioRow:un,Component:cn}=I;function Xe(){U.useProxy(r.storage);const e=function(a,l,i,o,g){return{id:a,title:l,label:i,subLabel:o,props:g}},t=[e("cactus","Cactus","Toggle uhhh.. something",null,qe),e("eml","EML","Toggle Edit Message Locally",null,Te),e("notype","No Type","Toggle No Typings",null,null),e("quickid","QID","Toggle Quick ID Setting",null,je),e("noshare","No Share","Toggle No Share",null,He),e("ralert","Reply Alert & Custom Mentions","Toggle Reply Alert Settings",null,Ie),e("removeDecor","I HATE AVATAR DECORATIONS","Toggle Remove Avatar Decoration",null,null)];return React.createElement(React.Fragment,null,React.createElement(Qe,null,React.createElement(Y,{style:{paddingBottom:36,borderRadius:10,backgroundColor:"rgba(0, 12, 46, 0.15)"}},t.map(function(a,l){return React.createElement(React.Fragment,null,React.createElement(de,{title:a?.title},React.createElement(Je,{label:a?.label,subLabel:a?.subLabel,trailing:React.createElement(We,{value:r.storage.toggle[a?.id],onValueChange:function(i){r.storage.toggle[a?.id]=i}})}),r.storage.toggle[a.id]&&a.props&&React.createElement(Y,{style:{margin:5,padding:10,borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.15)"}},React.createElement(a.props,null))))})),React.createElement(Ke,null),G&&React.createElement(de,{title:"Updates"},React.createElement(Y,{style:{margin:5,padding:5,borderRadius:10,backgroundColor:"rgba(59, 30, 55, 0.15)"}},G.map(function(a,l){return React.createElement(Oe,{change:a,index:l,totalIndex:G.length})})))))}var Z,j;const Q=S.findByStoreName("UserStore");S.findByProps("getMessage","getMessages");const L=Q==null||(j=Q.getCurrentUser)===null||j===void 0||(Z=j.call(Q))===null||Z===void 0?void 0:Z.id;function et(e){if(e.type=="MESSAGE_CREATE"){var t,a,l,i,o;const R=(e==null||(l=e.message)===null||l===void 0||(a=l.referenced_message)===null||a===void 0||(t=a.author)===null||t===void 0?void 0:t.id)==L,p=e==null||(o=e.message)===null||o===void 0||(i=o.mentions)===null||i===void 0?void 0:i.some(function(E){return E?.id===L});if(R||p){var g,u;if((e==null||(u=e.message)===null||u===void 0||(g=u.author)===null||g===void 0?void 0:g.id)!=L)e.message.mentions.push({id:L});else{var v,d;(r.storage===null||r.storage===void 0||(d=r.storage.utils)===null||d===void 0||(v=d.replyAlert)===null||v===void 0?void 0:v.ignoreSelf)==!1&&e.message.mentions.push({id:L})}}}}function ge(e){var t,a;const{gutterColor:l,customColor:i,gutterAlpha:o,colorAlpha:g,useCustomColor:u}=r.storage===null||r.storage===void 0||(t=r.storage.utils)===null||t===void 0?void 0:t.replyAlert;if(u&&!(e==null||(a=e.message)===null||a===void 0)&&a.mentioned){e.backgroundHighlight??(e.backgroundHighlight={});const v=ae(i,"#DAFFFF"),d=ae(l,"#121212");e.backgroundHighlight={backgroundColor:n.ReactNative.processColor(`${v}${g}`),gutterColor:n.ReactNative.processColor(`${d}${o}`)}}return e}function tt(){return w.before("dispatch",n.FluxDispatcher,function(e){let[t]=e;C.isEnabled&&et(t)})}const fe=S.findByProps("getMessage","getMessages"),ve=S.findByProps("getChannel","getDMFromUserId"),nt=S.findByProps("startEditMessage"),{FormRow:he,FormIcon:ye}=I;let J=!1;function at(e,t,a,l){var i;if(t=="MessageLongPressActionSheet"&&!(r.storage===null||r.storage===void 0||(i=r.storage.toggle)===null||i===void 0)&&i.eml){const o=a?.message;if(!o)return;e.then(function(g){const u=w.after("default",g,function(v,d){var R,p,E;n.React.useEffect(function(){return function(){u()}},[]);const m=K.findInReactTree(d,function(h){var f,b;return(h==null||(b=h[0])===null||b===void 0||(f=b.type)===null||f===void 0?void 0:f.name)==="ButtonRow"});if(!m)return d;const F=Math.max(m.findIndex(function(h){var f,b,s,c;return(h==null||(f=h.props)===null||f===void 0?void 0:f.message)===(n.i18n===null||n.i18n===void 0||(b=n.i18n.Messages)===null||b===void 0?void 0:b.MESSAGE_ACTION_REPLY)||(h==null||(s=h.props)===null||s===void 0?void 0:s.label)===(n.i18n===null||n.i18n===void 0||(c=n.i18n.Messages)===null||c===void 0?void 0:c.MESSAGE_ACTION_REPLY)}),0),_=r.storage===null||r.storage===void 0||(E=r.storage.utils)===null||E===void 0||(p=E.eml)===null||p===void 0||(R=p.editedMsg)===null||R===void 0?void 0:R.find(function(h){return h.id==o?.id});_?m.splice(F,0,n.React.createElement(n.React.Fragment,null,n.React.createElement(he,{label:"Revert Locally Edited Message",subLabel:"Added by Azzy Util",leading:n.React.createElement(ye,{style:{opacity:1},source:y.getAssetIDByName("ic_edit_24px")}),onPress:function(){var h,f,b,s;const c=fe.getMessage(o.channel_id,o.id);n.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...c,...o,content:_.content,edited_timestamp:c.editedTimestamp,mention_roles:c.mentionRoles,mention_everyone:c.mentionEveryone,guild_id:(h=ve.getChannel(c.channel_id||o.channel_id))===null||h===void 0?void 0:h.guild_id},otherPluginBypass:!0}),r.storage.utils.eml.editedMsg=r.storage===null||r.storage===void 0||(s=r.storage.utils)===null||s===void 0||(b=s.eml)===null||b===void 0||(f=b.editedMsg)===null||f===void 0?void 0:f.filter(function(M){return M.id!=o.id}),l.hideActionSheet()}}))):m.splice(F,0,n.React.createElement(n.React.Fragment,null,n.React.createElement(he,{label:"Edit Message Locally",subLabel:"Added by Azzy Util",leading:n.React.createElement(ye,{style:{opacity:1},source:y.getAssetIDByName("ic_edit_24px")}),onPress:function(){nt.startEditMessage(`AZZYEML-${o.channel_id}`,o.id,o.content),l.hideActionSheet()}})))})})}}function rt(e){var t;return!((t=e[0])===null||t===void 0)&&t.startsWith("AZZYEML-")?(e[0]=e[0].replaceAll("AZZYEML-",""),J=!0,e):(J=!1,e)}function lt(e){if(J){var t,a,l,i,o;let[g,u,v]=e;const d=fe.getMessage(g,u);r.storage===null||r.storage===void 0||(a=r.storage.utils)===null||a===void 0||(t=a.eml)===null||t===void 0||t.editedMsg.push(d),n.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...d,...v,edited_timestamp:d.editedTimestamp,mention_roles:d.mentionRoles,mention_everyone:d.mentionEveryone,member:d.author,guild_id:(l=ve.getChannel(d.channel_id||g))===null||l===void 0?void 0:l.guild_id},otherPluginBypass:r.storage===null||r.storage===void 0||(o=r.storage.utils)===null||o===void 0||(i=o.eml)===null||i===void 0?void 0:i.logEdit}),T.showToast("Message Edited",y.getAssetIDByName("ic_edit_24px"))}}const{FormRow:ot,FormIcon:it}=I;function st(e,t,a,l){var i;if(t=="MessageLongPressActionSheet"&&!(r.storage===null||r.storage===void 0||(i=r.storage.toggle)===null||i===void 0)&&i.quickid){const o=a?.message;if(!o)return;e.then(function(g){const u=w.after("default",g,function(v,d){var R;n.React.useEffect(function(){return function(){u()}},[]);const p=K.findInReactTree(d,function(s){var c,M;return(s==null||(M=s[0])===null||M===void 0||(c=M.type)===null||c===void 0?void 0:c.name)==="ButtonRow"});if(!p)return d;const E=Math.max(p.findIndex(function(s){var c,M;return(s==null||(c=s.props)===null||c===void 0?void 0:c.message)===(n.i18n===null||n.i18n===void 0||(M=n.i18n.Messages)===null||M===void 0?void 0:M.MENTION)}),0);function m(s,c,M,Mt){return{label:s,sub:c,icon:M,callback:Mt}}let F=[];const{addID:_,addMention:h,addCombine:f}=r.storage===null||r.storage===void 0||(R=r.storage.utils)===null||R===void 0?void 0:R.quickid;_&&F.push(m("Copy User's Id","Result: <Some ID>","ic_copy_id",function(){var s;l.hideActionSheet(),n.clipboard.setString((o==null||(s=o.author)===null||s===void 0?void 0:s.id)??""),T.showToast("Copied User's ID to clipboard",y.getAssetIDByName("toast_copy_link"))})),h&&F.push(m("Copy User's Mention","Result: <Mention>","ic_copy_id",function(){var s;l.hideActionSheet(),n.clipboard.setString(`<@${(o==null||(s=o.author)===null||s===void 0?void 0:s.id)??""}>`),T.showToast("Copied User's Mention to clipboard",y.getAssetIDByName("toast_copy_link"))})),f&&F.push(m("Copy User's Id and Mention","Result: <Some ID> <Mention>","ic_copy_id",function(){var s,c;l.hideActionSheet(),n.clipboard.setString(`${(o==null||(s=o.author)===null||s===void 0?void 0:s.id)??""} <@${(o==null||(c=o.author)===null||c===void 0?void 0:c.id)??""}>`),T.showToast("Copied User to clipboard",y.getAssetIDByName("toast_copy_link"))})),F.reverse();const b=E||1;p.splice(E,1);for(const s of F)p.splice(b,0,n.React.createElement(n.React.Fragment,null,n.React.createElement(ot,{label:s?.label,subLabel:s?.sub,onPress:s?.callback,leading:s?.icon&&n.React.createElement(it,{style:{opacity:1},source:y.getAssetIDByName(s?.icon)})})))})})}}const{downloadMediaAsset:ut}=S.findByProps("downloadMediaAsset"),{FormRow:Re,FormIcon:be}=I;function ct(e,t,a,l){var i;!(r.storage===null||r.storage===void 0||(i=r.storage.toggle)===null||i===void 0)&&i.noshare&&t=="MediaShareActionSheet"&&e.then(function(o){const g=w.after("default",o,function(u,v){let[{syncer:d}]=u;n.React.useEffect(function(){return g()},[]);let R=d.sources[d.index.value];Array.isArray(R)&&(R=R[0]);const p=R.sourceURI??R.uri,E=v.props.children.props.children,m=Math.max(E.findIndex(function(f){var b,s,c;return(f==null||(b=f.props)===null||b===void 0?void 0:b.label)===(n.i18n===null||n.i18n===void 0||(s=n.i18n.Messages)===null||s===void 0?void 0:s.SHARE)||(f==null||(c=f.props)===null||c===void 0?void 0:c.label)==="Share"}),0),F=n.React.createElement(Re,{label:"Copy Image Link",subLabel:"Added by Azzy Util",leading:n.React.createElement(be,{style:{opacity:1},source:y.getAssetIDByName("ic_message_copy")}),onPress:function(){l.hideActionSheet(),n.clipboard.setString(p),T.showToast("Link copied")}}),_=n.React.createElement(Re,{label:"Save Image",subLabel:"Added by Azzy Util",leading:n.React.createElement(be,{style:{opacity:1},source:y.getAssetIDByName("ic_download_24px")}),onPress:function(){l.hideActionSheet(),ut(p,0),T.showToast("Downloading image",y.getAssetIDByName("toast_image_saved"))}}),h=[F];if(r.storage.utils.noshare.addSaveImage&&h.push(_),E)if(m>=0){E.splice(m,1);for(const f of h)E.splice(m,0,f)}else E.push(...h)})})}const k=S.findByProps("openLazy","hideActionSheet");function dt(){return w.before("openLazy",k,function(e){let[t,a,l]=e;C.isEnabled&&(st(t,a,l,k),ct(t,a,l,k),at(t,a,l,k))})}const{DCDChatManager:Ae}=n.ReactNative.NativeModules,gt=function(){return w.before("updateRows",Ae,function(e){if(C.isEnabled){let t=JSON.parse(e[1]);return t.forEach(function(a){ge(a)}),e[1]=JSON.stringify(t),e[1]}})},ft=function(){return w.after("updateRows",Ae,function(e){if(C.isEnabled){let t=JSON.parse(e[1]);return t.forEach(function(a){ge(a)}),e[1]=JSON.stringify(t),e[1]}})},Ee=S.findByProps("startTyping"),vt=function(){return w.instead("startTyping",Ee,function(){})},ht=function(){return w.instead("stopTyping",Ee,function(){})},pe=S.findByProps("startEditMessage"),yt=function(){return w.before("startEditMessage",pe,function(e){C.isEnabled&&rt(e)})},Rt=function(){return w.before("editMessage",pe,function(e){C.isEnabled&&lt(e)})};function bt(e){return e?.avatarDecorationData&&(e.avatarDecorationData=null),e}const At=S.findByStoreName("UserStore"),Et=function(){return w.after("getUser",At,function(e,t){C.isEnabled&&bt(t)})},me=["Rawr~","Nyaa","Don't touch my tail!","Maawww! Nappy!","Awowooo","I can chase butterflies all day!","Cuddles?!","These ears pick up everything :3","Shiny things~","Belly rubs, yay","Am cute","Snuggles","Tails","Pawbs","Boxes, owo","Feeling cuddly today!","Feeling cute"];function pt(e){var t,a;if(!(r.storage===null||r.storage===void 0||(t=r.storage.toggle)===null||t===void 0)&&t.cactus&&(e==null||(a=e.content)===null||a===void 0?void 0:a.length)>25&&Me(3)){var l,i;const o=Math.floor(Math.random()*me.length);e.content=`${e?.content}

*${me[o]}*  - \`${(r.storage===null||r.storage===void 0||(i=r.storage.utils)===null||i===void 0||(l=i.cactus)===null||l===void 0?void 0:l.name)||"Angel"}\``}}const mt=S.findByProps("sendMessage","receiveMessage");function Ct(){return w.before("sendMessage",mt,function(e){C.isEnabled&&pt(e[1])})}X(r.storage,{toggle:{ctime:!1,ralert:!1,notype:!1,quickid:!1,eml:!1,noshare:!1,removeDecor:!1,cactus:!1},utils:{cactus:{name:""},quickid:{addID:!1,addMention:!1,addCombine:!1},replyAlert:{customColor:"#000",gutterColor:"#FFF",colorAlpha:"33",gutterAlpha:"33",useReplyAlert:!1,useCustomColor:!1,ignoreSelf:!1},eml:{logEdit:!1,editedMsg:[]},noshare:{addSaveImage:!1,addCopyImage:!1}},debug:!1});let Ce=[],Se;C.isEnabled=!1,Ce.push(dt,tt,gt,ft,vt,ht,yt,Rt,Et,Ct);const St=function(){return Ce.forEach(function(e){return e()})},wt=function(){r.storage.utils.eml.editedMsg=[]};var Ft={onLoad:function(){var e;C.isEnabled=!0,Se=(e=St())===null||e===void 0?void 0:e.catch(function(t){console.log("AZZYUTIL, Crash On Load"),console.log(t),we.stopPlugin(r.id)})},onUnload:function(){C.isEnabled=!1,Se(),wt()},settings:Xe};return C.default=Ft,Object.defineProperty(C,"__esModule",{value:!0}),C})({},vendetta.plugin,vendetta.storage,vendetta,vendetta.metro,vendetta.ui.components,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.plugins);
