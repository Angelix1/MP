(function(C,l,U,O,w,P,t,K,E,F,X,T,$e){"use strict";const{openLazy:_e,hideActionSheet:Mt}=w.findByProps("openLazy","hideActionSheet");function ee(e,n){if(e!=null&&n!=null)for(const a of Object.keys(n))typeof n[a]=="object"&&!Array.isArray(n[a])?(typeof e[a]!="object"&&(e[a]={}),ee(e[a],n[a])):e[a]??(e[a]=n[a])}function te(e,n){try{_e(new Promise(function(a){return a({default:e})}),"ActionSheet",n)}catch(a){O.logger.error(a.stack),showToast("Got error when opening ActionSheet! Please check debug logs")}}function ne(e){const n=e>>16&255,a=e>>8&255,r=e&255;return`#${(1<<24|n<<16|a<<8|r).toString(16).slice(1)}`}function V(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;return{version:e,new:n,updated:a,fix:r}}const I={...P.General,...P.Forms},ae="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mJsrQAAAgwBAJ9P6qYAAAAASUVORK5CYII=";function le(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#000";e||(e=n);const a=e?.trim();if(a.startsWith("#")){const r=a.slice(1);if(/^[0-9A-Fa-f]{6}$/.test(r))return"#"+r.toUpperCase()}else if(/^[0-9A-Fa-f]{6}$/.test(a))return"#"+a.toUpperCase();return n}const p={toPercentage:function(e){return e=Number(e),e===0?0:e===1?100:Math.round(e*100)},toDecimal:function(e){e=Number(e);const n=Math.min(Math.max(e,0),100);return n===0?0:n===100?1:n/100},formatDecimal:function(e){return e=Number(e),e===0||e===1?e:e.toFixed(2)},alphaToHex:function(e){e=Number(e);const n=Math.min(Math.max(e,0),100),a=Math.round(n/100*255).toString(16).toUpperCase();return a.length===1?"0"+a:a},hexAlphaToPercent:function(e){const n=parseInt(e,16);return isNaN(n)?0:Math.round(n/255*100)}};function Te(e){if(typeof e!="number"||e<1||e>100)throw new Error("withinChance(percentage): percentage must be a number between 1 and 100");return Math.random()<e/100}const{ScrollView:$t,View:z,Text:re,TouchableOpacity:oe,TextInput:_t,Image:ie,Animated:Tt,FormLabel:Nt,FormIcon:Dt,FormArrow:Pt,FormRow:N,FormSwitch:H,FormSwitchRow:Bt,FormSection:Lt,FormDivider:M,FormInput:kt,FormRadioRow:xt,FormSliderRow:se}=I,ue=w.findByName("CustomColorPickerActionSheet");function Ne(){U.useProxy(l.storage);const e=l.storage.utils.replyAlert,[n,a]=t.React.useState(p.toDecimal(p.hexAlphaToPercent(e.colorAlpha)||100)),[r,s]=t.React.useState(p.toDecimal(p.hexAlphaToPercent(e.gutterAlpha)||100)),o=function(){return te(ue,{color:t.ReactNative.processColor(e?.customColor)||0,onSelect:function(u){const h=ne(u);e.customColor=h,!(l.storage===null||l.storage===void 0)&&l.storage.debug&&O.logger.log("Reply Alert BG Color","[Changed]",h)}})},g=function(){return te(ue,{color:t.ReactNative.processColor(e?.customColor)||0,onSelect:function(u){const h=ne(u);e.gutterColor=h,!(l.storage===null||l.storage===void 0)&&l.storage.debug&&O.logger.log("Reply Alert Gutter Color","[Changed]",h)}})};return t.React.createElement(t.React.Fragment,null,t.React.createElement(N,{label:"Toggle Force Alert",subLabel:"When someone replying to your message with mention disabled, this option will force ping you",trailing:t.React.createElement(H,{value:e?.useReplyAlert||!1,onValueChange:function(u){e.useReplyAlert=u}})}),t.React.createElement(M,null),t.React.createElement(N,{label:"Use Custom Color Mentions",trailing:t.React.createElement(H,{value:e?.useCustomColor||!1,onValueChange:function(u){e.useCustomColor=u}})}),t.React.createElement(M,null),t.React.createElement(N,{label:"Ignore self Reply",subLabel:"When replying to own message, do not ping",trailing:t.React.createElement(H,{value:e?.ignoreSelf||!1,onValueChange:function(u){e.ignoreSelf=u}})}),t.React.createElement(M,null),t.React.createElement(N,{label:"Preview",subLabel:"How it looks in then chat"}),t.React.createElement(z,{style:[{flexDirection:"row",height:80,width:"100%",overflow:"hidden",borderRadius:12,marginBottom:20,marginRight:10,marginLeft:10}]},t.React.createElement(z,{style:{width:"2%",backgroundColor:`${e?.gutterColor}${p.alphaToHex(p.toPercentage(r))}`}}),t.React.createElement(z,{style:{flex:1,backgroundColor:`${e?.customColor}${p.alphaToHex(p.toPercentage(n))}`,justifyContent:"center",alignItems:"center"}},t.React.createElement(re,{style:{fontSize:20,color:"#FFFFFF"}}," Example White Text "),t.React.createElement(re,{style:{fontSize:20,color:"#000000"}}," Example Black Text "))),t.React.createElement(M,null),t.React.createElement(N,{label:"Background Color",subLabel:"Click to Update",onPress:o,trailing:t.React.createElement(oe,{onPress:o},t.React.createElement(ie,{source:{uri:ae},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.customColor||"#000"}}))}),t.React.createElement(M,null),t.React.createElement(N,{label:"Gutter Color",subLabel:"Click to Update",onPress:g,trailing:t.React.createElement(oe,{onPress:g},t.React.createElement(ie,{source:{uri:ae},style:{width:128,height:128,borderRadius:10,backgroundColor:e?.gutterColor||"#000"}}))}),t.React.createElement(M,null),t.React.createElement(se,{label:`Background Color Alpha: ${p.toPercentage(n)}%`,value:n,style:{width:"90%"},onValueChange:function(u){a(Number(p.formatDecimal(u))),e.colorAlpha=p.alphaToHex(p.toPercentage(u))}}),t.React.createElement(M,null),t.React.createElement(se,{label:`Gutter Color Alpha: ${p.toPercentage(r)}%`,value:r,style:{width:"90%"},onValueChange:function(u){s(Number(p.formatDecimal(u))),e.gutterAlpha=p.alphaToHex(p.toPercentage(u))}}))}const{FormRow:De,FormSwitch:Pe}=I;function Be(){var e,n;return React.createElement(React.Fragment,null,React.createElement(De,{label:"Bypass Antied Logging",trailing:React.createElement(Pe,{value:(l.storage===null||l.storage===void 0||(n=l.storage.utils)===null||n===void 0||(e=n.eml)===null||e===void 0?void 0:e.logEdit)||!1,onValueChange:function(a){l.storage.utils.eml.logEdit=a}})}))}function B(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return[...n]}var G=[V("1.0.0",B("Created the Plugin")),V("1.0.1",B("Added Remove Decor","Customization for reply alert","Option to revert locally edited message (wipe on unload of the plugin)")),V("1.0.2",B("[1.0.22] Setting for Quick Id","[1.0.22] Option to toggle Force alert","[1.0.22] Preview for ReplyAlert"),B("[1.0.2] Remove Custom Timestamp"),B("[1.0.21] Fix Cactus","[1.0.22] Fix No Share fails to find Share button","[1.0.23] Fix Quick ID removing edit message button"))].reverse();const{ScrollView:Ot,View:ce,Text:Vt,TouchableOpacity:zt,TextInput:Ht,Image:Gt,Animated:qt}=P.General,{FormLabel:Yt,FormIcon:Le,FormArrow:Zt,FormRow:q,FormSwitch:Qt,FormSwitchRow:jt,FormSection:Jt,FormDivider:ke,FormInput:Wt}=P.Forms,xe=E.getAssetIDByName("ic_radio_square_checked_24px"),Ue=E.getAssetIDByName("ic_radio_square_24px"),Oe=E.getAssetIDByName("ic_information_24px");E.getAssetIDByName("ic_info");const Ve=E.getAssetIDByName("premium_sparkles"),ze=E.getAssetIDByName("ic_sync_24px"),He=E.getAssetIDByName("ic_progress_wrench_24px"),D=t.stylesheet.createThemedStyleSheet({border:{borderRadius:10},textBody:{color:K.semanticColors.TEXT_NORMAL,fontFamily:t.constants.Fonts.PRIMARY_MEDIUM,letterSpacing:.25,fontSize:22},textBody:{color:K.semanticColors.INPUT_PLACEHOLDER_TEXT,fontFamily:t.constants.Fonts.DISPLAY_NORMAL,letterSpacing:.25,fontSize:16},versionBG:{margin:10,padding:15,backgroundColor:"rgba(55, 149, 225, 0.3)"},rowLabel:{margin:10,padding:15,backgroundColor:"rgba(33, 219, 222, 0.34)"}});function k(e){return t.React.createElement(Le,{style:{opacity:1},source:e})}function Ge(e){let{change:n,index:a,totalIndex:r}=e;var s,o,g;const[u,h]=t.React.useState(!1);t.React.useState(!1);function d(R,b,y,m){return t.React.createElement(ce,null,t.React.createElement(q,{label:b||"No Section",subLabel:y||null,leading:m&&k(m),style:[D.textHeader]}),R.map(function(S,$){return t.React.createElement(t.React.Fragment,null,t.React.createElement(q,{label:S,style:[D.textBody,D.rowLabel,D.border]}))}))}return t.React.createElement(t.React.Fragment,null,t.React.createElement(P.ErrorBoundary,null,t.React.createElement(q,{label:n?.version,leading:a==0?k(xe):k(Ue),trailing:k(Oe),onPress:function(){h(!u)}}),u&&t.React.createElement(ce,{style:[D.versionBG,D.border]},(n==null||(s=n.new)===null||s===void 0?void 0:s.length)>0&&d(n.new,"New","New stuffies",Ve),(n==null||(o=n.updated)===null||o===void 0?void 0:o.length)>0&&d(n.updated,"Changes","Update things",ze),(n==null||(g=n.fix)===null||g===void 0?void 0:g.length)>0&&d(n.fix,"Fixes","Me hate borken things",He)),a==r.length-1?void 0:t.React.createElement(ke,null)))}const{FormRow:qe,FormSwitch:Ye}=I;function Ze(){var e,n;return React.createElement(React.Fragment,null,React.createElement(qe,{label:"Add Save Image Button to Image ActionSheet",subLabel:"if Built-in Save Image gone",trailing:React.createElement(Ye,{value:(l.storage===null||l.storage===void 0||(n=l.storage.utils)===null||n===void 0||(e=n.noshare)===null||e===void 0?void 0:e.addSaveImage)||!1,onValueChange:function(a){l.storage.utils.noshare.addSaveImage=a}})}))}const{FormInput:Qe}=I;function je(){var e,n;return React.createElement(React.Fragment,null,React.createElement(Qe,{title:"Name",keyboardType:"default",placeholder:"Angel",value:l.storage===null||l.storage===void 0||(n=l.storage.utils)===null||n===void 0||(e=n.cactus)===null||e===void 0?void 0:e.name,onChange:function(a){return l.storage.utils.cactus.name=a.toString()}}))}const{FormRow:Je,FormSwitch:We,FormDivider:de}=I;function Ke(){U.useProxy(l.storage);const e=function(a,r,s){return{label:a,subLabel:r,key:s}},n=[e("Id","add Copy User Id","addID"),e("Mention","add Copy User Mention","addMention"),e("Id and Mention","add Copy User Id & Mention","addCombine")];return t.React.createElement(t.React.Fragment,null,n.map(function(a,r){var s,o;return t.React.createElement(t.React.Fragment,null,t.React.createElement(Je,{label:a?.label||"Missing Label",subLabel:a?.subLabel,trailing:t.React.createElement(We,{value:(l.storage===null||l.storage===void 0||(o=l.storage.utils)===null||o===void 0||(s=o.quickid)===null||s===void 0?void 0:s[a?.key])||!1,onValueChange:function(g){l.storage.utils.quickid[a.key]=g}})}),r!==n?.length-1&&t.React.createElement(de,null))}),t.React.createElement(de,null))}const{ScrollView:Xe,View:Y,Text:Kt,TouchableOpacity:Xt,TextInput:en,Image:tn,Animated:nn,FormLabel:an,FormIcon:ln,FormArrow:rn,FormRow:ge,FormSwitch:fe,FormSwitchRow:on,FormSection:ve,FormDivider:he,FormInput:sn,FormRadioRow:un,Component:cn}=I;function et(){U.useProxy(l.storage);const e=function(a,r,s,o,g){return{id:a,title:r,label:s,subLabel:o,props:g}},n=[e("cactus","Cactus","Toggle uhhh.. something",null,je),e("eml","EML","Toggle Edit Message Locally",null,Be),e("notype","No Type","Toggle No Typings",null,null),e("quickid","QID","Toggle Quick ID Setting",null,Ke),e("noshare","No Share","Toggle No Share",null,Ze),e("ralert","Reply Alert & Custom Mentions","Toggle Reply Alert & Custom Mentions Settings",null,Ne),e("removeDecor","I HATE AVATAR DECORATIONS","Toggle Remove Avatar Decoration",null,null)];return React.createElement(React.Fragment,null,React.createElement(Xe,null,React.createElement(Y,{style:{paddingBottom:36,borderRadius:10,backgroundColor:"rgba(0, 12, 46, 0.15)"}},React.createElement(ge,{label:"Debug",subLabel:"enable console logging",trailing:React.createElement(fe,{value:l.storage.debug,onValueChange:function(a){l.storage.debug=a}})}),React.createElement(he,null),n.map(function(a,r){return React.createElement(React.Fragment,null,React.createElement(ve,{title:a?.title},React.createElement(ge,{label:a?.label,subLabel:a?.subLabel,trailing:React.createElement(fe,{value:l.storage.toggle[a?.id],onValueChange:function(s){l.storage.toggle[a?.id]=s}})}),l.storage.toggle[a.id]&&a.props&&React.createElement(Y,{style:{margin:5,padding:10,borderRadius:10,backgroundColor:"rgba(0, 0, 0, 0.15)"}},React.createElement(a.props,null))))})),React.createElement(he,null),G&&React.createElement(ve,{title:"Updates"},React.createElement(Y,{style:{margin:5,padding:5,borderRadius:10,backgroundColor:"rgba(59, 30, 55, 0.15)"}},G.map(function(a,r){return React.createElement(Ge,{change:a,index:r,totalIndex:G.length})})))))}var Z,Q;const j=w.findByStoreName("UserStore");w.findByProps("getMessage","getMessages");const L=j==null||(Q=j.getCurrentUser)===null||Q===void 0||(Z=Q.call(j))===null||Z===void 0?void 0:Z.id;function tt(e){if(e.type=="MESSAGE_CREATE"){var n,a,r,s,o,g,u;const y=(e==null||(r=e.message)===null||r===void 0||(a=r.referenced_message)===null||a===void 0||(n=a.author)===null||n===void 0?void 0:n.id)==L,m=e==null||(o=e.message)===null||o===void 0||(s=o.mentions)===null||s===void 0?void 0:s.some(function(S){return S?.id===L});if(!(l.storage===null||l.storage===void 0||(u=l.storage.utils)===null||u===void 0||(g=u.replyAlert)===null||g===void 0)&&g.useReplyAlert&&(y||m)){var h,d;if((e==null||(d=e.message)===null||d===void 0||(h=d.author)===null||h===void 0?void 0:h.id)!=L)e.message.mentions.push({id:L});else{var R,b;(l.storage===null||l.storage===void 0||(b=l.storage.utils)===null||b===void 0||(R=b.replyAlert)===null||R===void 0?void 0:R.ignoreSelf)==!1&&e.message.mentions.push({id:L})}}}}function Re(e){var n,a;const{gutterColor:r,customColor:s,gutterAlpha:o,colorAlpha:g,useCustomColor:u}=l.storage===null||l.storage===void 0||(n=l.storage.utils)===null||n===void 0?void 0:n.replyAlert;if(u&&!(e==null||(a=e.message)===null||a===void 0)&&a.mentioned){e.backgroundHighlight??(e.backgroundHighlight={});const h=le(s,"#DAFFFF"),d=le(r,"#121212");e.backgroundHighlight={backgroundColor:t.ReactNative.processColor(`${h}${g}`),gutterColor:t.ReactNative.processColor(`${d}${o}`)}}return e}function nt(){return F.before("dispatch",t.FluxDispatcher,function(e){let[n]=e;C.isEnabled&&tt(n)})}const be=w.findByProps("getMessage","getMessages"),ye=w.findByProps("getChannel","getDMFromUserId"),at=w.findByProps("startEditMessage"),{FormRow:Ae,FormIcon:Ee}=I;let J=!1;function lt(e,n,a,r){var s;if(n=="MessageLongPressActionSheet"&&!(l.storage===null||l.storage===void 0||(s=l.storage.toggle)===null||s===void 0)&&s.eml){const o=a?.message;if(!o)return;e.then(function(g){const u=F.after("default",g,function(h,d){var R,b,y;t.React.useEffect(function(){return function(){u()}},[]);const m=X.findInReactTree(d,function(A){var v,i;return(A==null||(i=A[0])===null||i===void 0||(v=i.type)===null||v===void 0?void 0:v.name)==="ButtonRow"});if(!m)return d;const S=Math.max(m.findIndex(function(A){var v,i,c,f;return(A==null||(v=A.props)===null||v===void 0?void 0:v.message)===(t.i18n===null||t.i18n===void 0||(i=t.i18n.Messages)===null||i===void 0?void 0:i.MESSAGE_ACTION_REPLY)||(A==null||(c=A.props)===null||c===void 0?void 0:c.label)===(t.i18n===null||t.i18n===void 0||(f=t.i18n.Messages)===null||f===void 0?void 0:f.MESSAGE_ACTION_REPLY)}),0),$=l.storage===null||l.storage===void 0||(y=l.storage.utils)===null||y===void 0||(b=y.eml)===null||b===void 0||(R=b.editedMsg)===null||R===void 0?void 0:R.find(function(A){return A.id==o?.id});$?m.splice(S,0,t.React.createElement(t.React.Fragment,null,t.React.createElement(Ae,{label:"Revert Locally Edited Message",subLabel:"Added by Azzy Util",leading:t.React.createElement(Ee,{style:{opacity:1},source:E.getAssetIDByName("ic_edit_24px")}),onPress:function(){var A,v,i,c;const f=be.getMessage(o.channel_id,o.id);t.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...f,...o,content:$.content,edited_timestamp:f.editedTimestamp,mention_roles:f.mentionRoles,mention_everyone:f.mentionEveryone,guild_id:(A=ye.getChannel(f.channel_id||o.channel_id))===null||A===void 0?void 0:A.guild_id},otherPluginBypass:!0}),l.storage.utils.eml.editedMsg=l.storage===null||l.storage===void 0||(c=l.storage.utils)===null||c===void 0||(i=c.eml)===null||i===void 0||(v=i.editedMsg)===null||v===void 0?void 0:v.filter(function(_){return _.id!=o.id}),r.hideActionSheet()}}))):m.splice(S,0,t.React.createElement(t.React.Fragment,null,t.React.createElement(Ae,{label:"Edit Message Locally",subLabel:"Added by Azzy Util",leading:t.React.createElement(Ee,{style:{opacity:1},source:E.getAssetIDByName("ic_edit_24px")}),onPress:function(){at.startEditMessage(`AZZYEML-${o.channel_id}`,o.id,o.content),r.hideActionSheet()}})))})})}}function rt(e){var n;return!((n=e[0])===null||n===void 0)&&n.startsWith("AZZYEML-")?(e[0]=e[0].replaceAll("AZZYEML-",""),J=!0,e):(J=!1,e)}function ot(e){if(J){var n,a,r,s,o;let[g,u,h]=e;const d=be.getMessage(g,u);l.storage===null||l.storage===void 0||(a=l.storage.utils)===null||a===void 0||(n=a.eml)===null||n===void 0||n.editedMsg.push(d),t.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:{...d,...h,edited_timestamp:d.editedTimestamp,mention_roles:d.mentionRoles,mention_everyone:d.mentionEveryone,member:d.author,guild_id:(r=ye.getChannel(d.channel_id||g))===null||r===void 0?void 0:r.guild_id},otherPluginBypass:l.storage===null||l.storage===void 0||(o=l.storage.utils)===null||o===void 0||(s=o.eml)===null||s===void 0?void 0:s.logEdit}),T.showToast("Message Edited",E.getAssetIDByName("ic_edit_24px"))}}const{FormRow:it,FormIcon:st}=I;function ut(e,n,a,r){var s;if(n=="MessageLongPressActionSheet"&&!(l.storage===null||l.storage===void 0||(s=l.storage.toggle)===null||s===void 0)&&s.quickid){const o=a?.message;if(!o)return;e.then(function(g){const u=F.after("default",g,function(h,d){var R;t.React.useEffect(function(){return function(){u()}},[]);const b=X.findInReactTree(d,function(i){var c,f;return(i==null||(f=i[0])===null||f===void 0||(c=f.type)===null||c===void 0?void 0:c.name)==="ButtonRow"});if(!b)return d;const y=b.findIndex(function(i){var c,f,_,W;return(i==null||(c=i.props)===null||c===void 0?void 0:c.message)===(t.i18n===null||t.i18n===void 0||(f=t.i18n.Messages)===null||f===void 0?void 0:f.MENTION)||(i==null||(_=i.props)===null||_===void 0?void 0:_.label)===(t.i18n===null||t.i18n===void 0||(W=t.i18n.Messages)===null||W===void 0?void 0:W.MENTION)});l.storage.debug&&(console.log(b),console.log("Position => "+y));function m(i,c,f,_){return{label:i,sub:c,icon:f,callback:_}}let S=[];const{addID:$,addMention:A,addCombine:v}=l.storage===null||l.storage===void 0||(R=l.storage.utils)===null||R===void 0?void 0:R.quickid;$&&S.push(m("Copy User's Id","Result: <Some ID>","ic_copy_id",function(){var i;r.hideActionSheet(),t.clipboard.setString((o==null||(i=o.author)===null||i===void 0?void 0:i.id)??""),T.showToast("Copied User's ID to clipboard",E.getAssetIDByName("toast_copy_link"))})),A&&S.push(m("Copy User's Mention","Result: <Mention>","ic_copy_id",function(){var i;r.hideActionSheet(),t.clipboard.setString(`<@${(o==null||(i=o.author)===null||i===void 0?void 0:i.id)??""}>`),T.showToast("Copied User's Mention to clipboard",E.getAssetIDByName("toast_copy_link"))})),v&&S.push(m("Copy User's Id and Mention","Result: <Some ID> <Mention>","ic_copy_id",function(){var i,c;r.hideActionSheet(),t.clipboard.setString(`${(o==null||(i=o.author)===null||i===void 0?void 0:i.id)??""} <@${(o==null||(c=o.author)===null||c===void 0?void 0:c.id)??""}>`),T.showToast("Copied User to clipboard",E.getAssetIDByName("toast_copy_link"))})),S.reverse(),y>=0&&b.splice(y,1);for(const i of S){const c=t.React.createElement(t.React.Fragment,null,t.React.createElement(it,{label:i?.label,subLabel:i?.sub,onPress:i?.callback,leading:i?.icon&&t.React.createElement(st,{style:{opacity:1},source:E.getAssetIDByName(i?.icon)})}));y>=0?b.splice(y,0,c):b.push(c)}})})}}const{downloadMediaAsset:ct}=w.findByProps("downloadMediaAsset"),{FormRow:me,FormIcon:pe}=I;function dt(e,n,a,r){var s;!(l.storage===null||l.storage===void 0||(s=l.storage.toggle)===null||s===void 0)&&s.noshare&&n=="MediaShareActionSheet"&&e.then(function(o){const g=F.after("default",o,function(u,h){let[{syncer:d}]=u;t.React.useEffect(function(){return g()},[]);let R=d.sources[d.index.value];Array.isArray(R)&&(R=R[0]);const b=R.sourceURI??R.uri,y=h.props.children.props.children,m=y.findIndex(function(v){var i,c,f;return(v==null||(i=v.props)===null||i===void 0?void 0:i.label)===(t.i18n===null||t.i18n===void 0||(c=t.i18n.Messages)===null||c===void 0?void 0:c.SHARE)||(v==null||(f=v.props)===null||f===void 0?void 0:f.label)==="Share"}),S=t.React.createElement(me,{label:"Copy Image Link",subLabel:"Added by Azzy Util",leading:t.React.createElement(pe,{style:{opacity:1},source:E.getAssetIDByName("ic_message_copy")}),onPress:function(){r.hideActionSheet(),t.clipboard.setString(b),T.showToast("Link copied")}}),$=t.React.createElement(me,{label:"Save Image",subLabel:"Added by Azzy Util",leading:t.React.createElement(pe,{style:{opacity:1},source:E.getAssetIDByName("ic_download_24px")}),onPress:function(){r.hideActionSheet(),ct(b,0),T.showToast("Downloading image",E.getAssetIDByName("toast_image_saved"))}}),A=[S];if(l.storage.utils.noshare.addSaveImage&&A.push($),y)if(m>=0){y.splice(m,1);for(const v of A)y.splice(m,0,v)}else y.push(...A)})})}const x=w.findByProps("openLazy","hideActionSheet");function gt(){return F.before("openLazy",x,function(e){let[n,a,r]=e;C.isEnabled&&(ut(n,a,r,x),dt(n,a,r,x),lt(n,a,r,x))})}const{DCDChatManager:Ce}=t.ReactNative.NativeModules,ft=function(){return F.before("updateRows",Ce,function(e){if(C.isEnabled){let n=JSON.parse(e[1]);return n.forEach(function(a){Re(a)}),e[1]=JSON.stringify(n),e[1]}})},vt=function(){return F.after("updateRows",Ce,function(e){if(C.isEnabled){let n=JSON.parse(e[1]);return n.forEach(function(a){Re(a)}),e[1]=JSON.stringify(n),e[1]}})},Se=w.findByProps("startTyping"),ht=function(){return F.instead("startTyping",Se,function(){})},Rt=function(){return F.instead("stopTyping",Se,function(){})},we=w.findByProps("startEditMessage"),bt=function(){return F.before("startEditMessage",we,function(e){C.isEnabled&&rt(e)})},yt=function(){return F.before("editMessage",we,function(e){C.isEnabled&&ot(e)})};function At(e){return e?.avatarDecorationData&&(e.avatarDecorationData=null),e}const Et=w.findByStoreName("UserStore"),mt=function(){return F.after("getUser",Et,function(e,n){C.isEnabled&&At(n)})},Fe=["Rawr~","Nyaa","Don't touch my tail!","Maawww! Nappy!","Awowooo","I can chase butterflies all day!","Cuddles?!","These ears pick up everything :3","Shiny things~","Belly rubs, yay","Am cute","Snuggles","Tails","Pawbs","Boxes, owo","Feeling cuddly today!","Feeling cute"];function pt(e){var n,a;if(!(l.storage===null||l.storage===void 0||(n=l.storage.toggle)===null||n===void 0)&&n.cactus&&(e==null||(a=e.content)===null||a===void 0?void 0:a.length)>25&&Te(3)){var r,s;const o=Math.floor(Math.random()*Fe.length);e.content=`${e?.content}

*${Fe[o]}*  - \`${(l.storage===null||l.storage===void 0||(s=l.storage.utils)===null||s===void 0||(r=s.cactus)===null||r===void 0?void 0:r.name)||"Angel"}\``}}const Ct=w.findByProps("sendMessage","receiveMessage");function St(){return F.before("sendMessage",Ct,function(e){C.isEnabled&&pt(e[1])})}ee(l.storage,{toggle:{ctime:!1,ralert:!1,notype:!1,quickid:!1,eml:!1,noshare:!1,removeDecor:!1,cactus:!1},utils:{cactus:{name:""},quickid:{addID:!1,addMention:!1,addCombine:!1},replyAlert:{customColor:"#000",gutterColor:"#FFF",colorAlpha:"33",gutterAlpha:"33",useReplyAlert:!1,useCustomColor:!1,ignoreSelf:!1},eml:{logEdit:!1,editedMsg:[]},noshare:{addSaveImage:!1,addCopyImage:!1}},debug:!1});let Ie=[],Me;C.isEnabled=!1,Ie.push(gt,nt,ft,vt,ht,Rt,bt,yt,mt,St);const wt=function(){return Ie.forEach(function(e){return e()})},Ft=function(){l.storage.utils.eml.editedMsg=[]};var It={onLoad:function(){var e;C.isEnabled=!0,Me=(e=wt())===null||e===void 0?void 0:e.catch(function(n){console.log("AZZYUTIL, Crash On Load"),console.log(n),$e.stopPlugin(l.id)})},onUnload:function(){C.isEnabled=!1,Me(),Ft()},settings:et};return C.default=It,Object.defineProperty(C,"__esModule",{value:!0}),C})({},vendetta.plugin,vendetta.storage,vendetta,vendetta.metro,vendetta.ui.components,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.patcher,vendetta.utils,vendetta.ui.toasts,vendetta.plugins);
